--- net/minecraft/src/RenderBlocks.java
+++ net/minecraft/src/RenderBlocks.java
@@ -246,19 +246,19 @@
 		}
 
 		var6.setColorOpaque_F(var7, var7, var7);
-		double var8 = (double)0.4F;
-		double var10 = 0.5D - var8;
-		double var12 = (double)0.2F;
+		float var8 = (float)Math.PI * 0.125F;
+		double var10 = 0.5D;
+		double var12 = 0.21875D;
 		if(var5 == 1) {
-			this.renderTorchAtAngle(var1, (double)var2 - var10, (double)var3 + var12, (double)var4, -var8, 0.0D);
+			this.renderTorchAtAngle(var1, (double)var2 - var10, (double)var3 + var12, (double)var4, 0.0F, -var8);
 		} else if(var5 == 2) {
-			this.renderTorchAtAngle(var1, (double)var2 + var10, (double)var3 + var12, (double)var4, var8, 0.0D);
+			this.renderTorchAtAngle(var1, (double)var2 + var10, (double)var3 + var12, (double)var4, 0.0F, var8);
 		} else if(var5 == 3) {
-			this.renderTorchAtAngle(var1, (double)var2, (double)var3 + var12, (double)var4 - var10, 0.0D, -var8);
+			this.renderTorchAtAngle(var1, (double)var2, (double)var3 + var12, (double)var4 - var10, -var8, 0.0F);
 		} else if(var5 == 4) {
-			this.renderTorchAtAngle(var1, (double)var2, (double)var3 + var12, (double)var4 + var10, 0.0D, var8);
+			this.renderTorchAtAngle(var1, (double)var2, (double)var3 + var12, (double)var4 + var10, var8, 0.0F);
 		} else {
-			this.renderTorchAtAngle(var1, (double)var2, (double)var3, (double)var4, 0.0D, 0.0D);
+			this.renderTorchAtAngle(var1, (double)var2, (double)var3, (double)var4, 0.0F, 0.0F);
 		}
 
 		return true;
@@ -299,8 +299,8 @@
 			var12 = BlockRedstoneRepeater.field_22024_a[var7];
 		}
 
-		this.renderTorchAtAngle(var1, (double)var2 + var12, (double)var3 + var10, (double)var4 + var14, 0.0D, 0.0D);
-		this.renderTorchAtAngle(var1, (double)var2 + var16, (double)var3 + var10, (double)var4 + var18, 0.0D, 0.0D);
+		this.renderTorchAtAngle(var1, (double)var2 + var12, (double)var3 + var10, (double)var4 + var14, 0.0F, 0.0F);
+		this.renderTorchAtAngle(var1, (double)var2 + var16, (double)var3 + var10, (double)var4 + var18, 0.0F, 0.0F);
 		int var20 = var1.getBlockTextureFromSide(1);
 		int var21 = (var20 & 15) << 4;
 		int var22 = var20 & 240;
@@ -1332,51 +1332,120 @@
 		return true;
 	}
 
-	public void renderTorchAtAngle(Block var1, double var2, double var4, double var6, double var8, double var10) {
-		Tessellator var12 = Tessellator.instance;
-		int var13 = var1.getBlockTextureFromSide(0);
+	public void renderTorchAtAngle(Block var1, double var2, double var4, double var6, float var8, float var10) {
+		Tessellator var68 = Tessellator.instance;
+		int var11 = var1.getBlockTextureFromSide(0);
 		if(this.overrideBlockTexture >= 0) {
-			var13 = this.overrideBlockTexture;
-		}
-
-		int var14 = (var13 & 15) << 4;
-		int var15 = var13 & 240;
-		float var16 = (float)var14 / 256.0F;
-		float var17 = ((float)var14 + 15.99F) / 256.0F;
-		float var18 = (float)var15 / 256.0F;
-		float var19 = ((float)var15 + 15.99F) / 256.0F;
-		double var20 = (double)var16 + 1.75D / 64.0D;
-		double var22 = (double)var18 + 6.0D / 256.0D;
-		double var24 = (double)var16 + 9.0D / 256.0D;
-		double var26 = (double)var18 + 1.0D / 32.0D;
-		var2 += 0.5D;
-		var6 += 0.5D;
-		double var28 = var2 - 0.5D;
-		double var30 = var2 + 0.5D;
-		double var32 = var6 - 0.5D;
-		double var34 = var6 + 0.5D;
-		double var36 = 1.0D / 16.0D;
-		double var38 = 0.625D;
-		var12.addVertexWithUV(var2 + var8 * (1.0D - var38) - var36, var4 + var38, var6 + var10 * (1.0D - var38) - var36, var20, var22);
-		var12.addVertexWithUV(var2 + var8 * (1.0D - var38) - var36, var4 + var38, var6 + var10 * (1.0D - var38) + var36, var20, var26);
-		var12.addVertexWithUV(var2 + var8 * (1.0D - var38) + var36, var4 + var38, var6 + var10 * (1.0D - var38) + var36, var24, var26);
-		var12.addVertexWithUV(var2 + var8 * (1.0D - var38) + var36, var4 + var38, var6 + var10 * (1.0D - var38) - var36, var24, var22);
-		var12.addVertexWithUV(var2 - var36, var4 + 1.0D, var32, (double)var16, (double)var18);
-		var12.addVertexWithUV(var2 - var36 + var8, var4 + 0.0D, var32 + var10, (double)var16, (double)var19);
-		var12.addVertexWithUV(var2 - var36 + var8, var4 + 0.0D, var34 + var10, (double)var17, (double)var19);
-		var12.addVertexWithUV(var2 - var36, var4 + 1.0D, var34, (double)var17, (double)var18);
-		var12.addVertexWithUV(var2 + var36, var4 + 1.0D, var34, (double)var16, (double)var18);
-		var12.addVertexWithUV(var2 + var8 + var36, var4 + 0.0D, var34 + var10, (double)var16, (double)var19);
-		var12.addVertexWithUV(var2 + var8 + var36, var4 + 0.0D, var32 + var10, (double)var17, (double)var19);
-		var12.addVertexWithUV(var2 + var36, var4 + 1.0D, var32, (double)var17, (double)var18);
-		var12.addVertexWithUV(var28, var4 + 1.0D, var6 + var36, (double)var16, (double)var18);
-		var12.addVertexWithUV(var28 + var8, var4 + 0.0D, var6 + var36 + var10, (double)var16, (double)var19);
-		var12.addVertexWithUV(var30 + var8, var4 + 0.0D, var6 + var36 + var10, (double)var17, (double)var19);
-		var12.addVertexWithUV(var30, var4 + 1.0D, var6 + var36, (double)var17, (double)var18);
-		var12.addVertexWithUV(var30, var4 + 1.0D, var6 - var36, (double)var16, (double)var18);
-		var12.addVertexWithUV(var30 + var8, var4 + 0.0D, var6 - var36 + var10, (double)var16, (double)var19);
-		var12.addVertexWithUV(var28 + var8, var4 + 0.0D, var6 - var36 + var10, (double)var17, (double)var19);
-		var12.addVertexWithUV(var28, var4 + 1.0D, var6 - var36, (double)var17, (double)var18);
+			var11 = this.overrideBlockTexture;
+		}
+
+		int var12 = (var11 & 15) << 4;
+		int var13 = var11 & 240;
+		float var14 = (float)var12 / 256.0F;
+		float var15 = ((float)var12 + 15.99F) / 256.0F;
+		float var16 = (float)var13 / 256.0F;
+		float var17 = ((float)var13 + 15.99F) / 256.0F;
+		Vec3D[] var18 = new Vec3D[24];
+		float var19 = 1.0F / 16.0F;
+		float var20 = 1.0F / 16.0F;
+		float var21 = 10.0F / 16.0F;
+
+		int var22;
+		for(var22 = 0; var22 < 3; ++var22) {
+			if(var22 == 1) {
+				var19 = 0.5F;
+				var20 = 1.0F / 16.0F;
+				var21 = 1.0F;
+			} else if(var22 == 2) {
+				var19 = 1.0F / 16.0F;
+				var20 = 0.5F;
+			}
+
+			var18[0 + var22 * 8] = Vec3D.createVector((double)(-var19), 0.0D, (double)(-var20));
+			var18[1 + var22 * 8] = Vec3D.createVector((double)var19, 0.0D, (double)(-var20));
+			var18[2 + var22 * 8] = Vec3D.createVector((double)var19, 0.0D, (double)var20);
+			var18[3 + var22 * 8] = Vec3D.createVector((double)(-var19), 0.0D, (double)var20);
+			var18[4 + var22 * 8] = Vec3D.createVector((double)(-var19), (double)var21, (double)(-var20));
+			var18[5 + var22 * 8] = Vec3D.createVector((double)var19, (double)var21, (double)(-var20));
+			var18[6 + var22 * 8] = Vec3D.createVector((double)var19, (double)var21, (double)var20);
+			var18[7 + var22 * 8] = Vec3D.createVector((double)(-var19), (double)var21, (double)var20);
+		}
+
+		for(var22 = 0; var22 < 24; ++var22) {
+			var18[var22].rotateAroundX(var8);
+			float var23 = MathHelper.cos(var10);
+			float var24 = MathHelper.sin(var10);
+			double var25 = var18[var22].xCoord * (double)var23 - var18[var22].yCoord * (double)var24;
+			double var27 = var18[var22].yCoord * (double)var23 + var18[var22].xCoord * (double)var24;
+			double var29 = var18[var22].zCoord;
+			var18[var22].xCoord = var25;
+			var18[var22].yCoord = var27;
+			var18[var22].zCoord = var29;
+			var18[var22].xCoord += var2 + 0.5D;
+			var18[var22].yCoord += var4;
+			var18[var22].zCoord += var6 + 0.5D;
+		}
+
+		Vec3D var31 = null;
+		Vec3D var32 = null;
+		Vec3D var33 = null;
+		Vec3D var34 = null;
+
+		for(int var26 = 0; var26 < 6; ++var26) {
+			if(var26 == 0) {
+				var14 = (float)(var12 + 7) / 256.0F;
+				var15 = ((float)(var12 + 9) - 0.01F) / 256.0F;
+				var16 = ((float)(var13 + 15) - 0.01F) / 256.0F;
+				var17 = (float)(var13 + 13) / 256.0F;
+			} else if(var26 == 1) {
+				var14 = (float)(var12 + 7) / 256.0F;
+				var15 = ((float)(var12 + 9) - 0.01F) / 256.0F;
+				var16 = (float)(var13 + 6) / 256.0F;
+				var17 = ((float)(var13 + 8) - 0.01F) / 256.0F;
+			} else if(var26 == 2) {
+				var14 = (float)var12 / 256.0F;
+				var15 = ((float)(var12 + 16) - 0.01F) / 256.0F;
+				var16 = (float)var13 / 256.0F;
+				var17 = ((float)(var13 + 16) - 0.01F) / 256.0F;
+			}
+
+			if(var26 == 0) {
+				var31 = var18[0];
+				var32 = var18[1];
+				var33 = var18[2];
+				var34 = var18[3];
+			} else if(var26 == 1) {
+				var31 = var18[7];
+				var32 = var18[6];
+				var33 = var18[5];
+				var34 = var18[4];
+			} else if(var26 == 2) {
+				var31 = var18[9];
+				var32 = var18[8];
+				var33 = var18[12];
+				var34 = var18[13];
+			} else if(var26 == 3) {
+				var31 = var18[18];
+				var32 = var18[17];
+				var33 = var18[21];
+				var34 = var18[22];
+			} else if(var26 == 4) {
+				var31 = var18[11];
+				var32 = var18[10];
+				var33 = var18[14];
+				var34 = var18[15];
+			} else if(var26 == 5) {
+				var31 = var18[16];
+				var32 = var18[19];
+				var33 = var18[23];
+				var34 = var18[20];
+			}
+
+			var68.addVertexWithUV(var31.xCoord, var31.yCoord, var31.zCoord, (double)var14, (double)var17);
+			var68.addVertexWithUV(var32.xCoord, var32.yCoord, var32.zCoord, (double)var15, (double)var17);
+			var68.addVertexWithUV(var33.xCoord, var33.yCoord, var33.zCoord, (double)var15, (double)var16);
+			var68.addVertexWithUV(var34.xCoord, var34.yCoord, var34.zCoord, (double)var14, (double)var16);
+		}
 	}
 
 	public void renderCrossedSquares(Block var1, int var2, double var3, double var5, double var7) {
@@ -1499,14 +1568,19 @@
 			float var36;
 			float var37;
 			float var38;
+			float var29;
 			if(this.renderAllFaces || var10) {
 				var13 = true;
 				var28 = var1.getBlockTextureFromSideAndMetadata(1, var23);
-				float var29 = (float)BlockFluid.func_293_a(this.blockAccess, var2, var3, var4, var22);
+				var29 = (float)BlockFluid.func_293_a(this.blockAccess, var2, var3, var4, var22);
 				if(var29 > -999.0F) {
 					var28 = var1.getBlockTextureFromSideAndMetadata(2, var23);
 				}
 
+				var24 -= 0.001F;
+				var25 -= 0.001F;
+				var26 -= 0.001F;
+				var27 -= 0.001F;
 				int var30 = (var28 & 15) << 4;
 				var31 = var28 & 240;
 				double var32 = ((double)var30 + 8.0D) / 256.0D;
@@ -1529,8 +1603,8 @@
 			}
 
 			if(this.renderAllFaces || var11) {
-				float var52 = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-				var5.setColorOpaque_F(var14 * var52, var14 * var52, var14 * var52);
+				var29 = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
+				var5.setColorOpaque_F(var14 * var29 * var7, var14 * var29 * var8, var14 * var29 * var9);
 				this.renderBottomFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTextureFromSide(0));
 				var13 = true;
 			}
@@ -3242,7 +3316,7 @@
 			} else if(var5 == 2) {
 				var4.startDrawingQuads();
 				var4.setNormal(0.0F, -1.0F, 0.0F);
-				this.renderTorchAtAngle(var1, -0.5D, -0.5D, -0.5D, 0.0D, 0.0D);
+				this.renderTorchAtAngle(var1, -0.5D, -0.5D, -0.5D, 0.0F, 0.0F);
 				var4.draw();
 			} else {
 				int var9;
--- net/minecraft/src/BlockFlowing.java
+++ net/minecraft/src/BlockFlowing.java
@@ -49,9 +49,9 @@
 			}
 
 			if(this.numAdjacentSources >= 2 && this.blockMaterial == Material.water) {
-				if(var1.getBlockMaterial(var2, var3 - 1, var4).isSolid()) {
+				if(this.blockBlocksFlow(var1, var2, var3 - 1, var4)) {
 					var10 = 0;
-				} else if(var1.getBlockMaterial(var2, var3 - 1, var4) == this.blockMaterial && var1.getBlockMetadata(var2, var3, var4) == 0) {
+				} else if(var1.getBlockMaterial(var2, var3 - 1, var4) == this.blockMaterial && var1.getBlockMetadata(var2, var3 - 1, var4) == 0) {
 					var10 = 0;
 				}
 			}
@@ -78,6 +78,12 @@
 		}
 
 		if(this.liquidCanDisplaceBlock(var1, var2, var3 - 1, var4)) {
+			if(this.blockMaterial == Material.lava && var1.getBlockMaterial(var2, var3 - 1, var4) == Material.water) {
+				var1.setBlockWithNotify(var2, var3 - 1, var4, Block.stone.blockID);
+				this.triggerLavaMixEffects(var1, var2, var3 - 1, var4);
+				return;
+			}
+
 			if(var6 >= 8) {
 				var1.setBlockAndMetadataWithNotify(var2, var3 - 1, var4, this.blockID, var6);
 			} else {
--- /dev/null
+++ net/minecraft/src/EntityFirefliesFX.java
@@ -1,0 +1,104 @@
+package net.minecraft.src;
+
+public class EntityFirefliesFX extends EntityFX {
+	private float firefliesScale;
+
+	public EntityFirefliesFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		super(var1, var2, var4, var6, var8, var10, var12);
+		this.posX = var2 + (double)((this.rand.nextFloat() - this.rand.nextFloat()) * 0.05F);
+		this.posY = var4 + (double)((this.rand.nextFloat() - this.rand.nextFloat()) * 0.05F);
+		this.posZ = var6 + (double)((this.rand.nextFloat() - this.rand.nextFloat()) * 0.05F);
+		this.motionX = this.motionX * 0.01D + var8;
+		this.motionY = this.motionY * 0.01D + var10;
+		this.motionZ = this.motionZ * 0.01D + var12;
+		this.firefliesScale = this.particleScale;
+		this.particleRed = (181.0F + this.rand.nextFloat() * 74.0F) / 255.0F;
+		this.particleGreen = (218.0F + this.rand.nextFloat() * 20.0F) / 255.0F;
+		this.particleBlue = this.rand.nextFloat() * 79.0F / 255.0F;
+		this.particleMaxAge = (int)(8.0D / (Math.random() * 0.8D + 0.2D)) + 64;
+		this.noClip = true;
+		this.particleTextureIndex = 97;
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		float var8 = ((float)this.particleAge + var2) / (float)this.particleMaxAge;
+		this.particleScale = this.firefliesScale * (1.0F - var8 * var8 * 0.5F);
+		float var9 = (float)(this.particleTextureIndex % 16) / 16.0F;
+		float var10 = var9 + 0.999F / 16.0F;
+		float var11 = (float)(this.particleTextureIndex / 16) / 16.0F;
+		float var12 = var11 + 0.999F / 16.0F;
+		float var13 = 0.1F * this.particleScale;
+		float var14 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
+		float var15 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
+		float var16 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
+		float var17 = this.getEntityBrightness(var2);
+		var1.setColorOpaque_F(this.particleRed * var17, this.particleGreen * var17, this.particleBlue * var17);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 - var5 * var13 - var7 * var13), (double)var10, (double)var12);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 - var5 * var13 + var7 * var13), (double)var10, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 + var5 * var13 + var7 * var13), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 + var5 * var13 - var7 * var13), (double)var9, (double)var12);
+		var9 += 2.0F / 16.0F;
+		var10 += 2.0F / 16.0F;
+		var1.setColorOpaque_F(var17, var17, var17);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 - var5 * var13 - var7 * var13), (double)var10, (double)var12);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 - var5 * var13 + var7 * var13), (double)var10, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 + var5 * var13 + var7 * var13), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 + var5 * var13 - var7 * var13), (double)var9, (double)var12);
+	}
+
+	public float getEntityBrightness(float var1) {
+		float var2 = ((float)this.particleAge + var1) / (float)this.particleMaxAge;
+		if(var2 < 0.0F) {
+			var2 = 0.0F;
+		}
+
+		if(var2 > 1.0F) {
+			var2 = 1.0F;
+		}
+
+		float var3 = super.getEntityBrightness(var1);
+		return var3 * (1.0F - var2) + var2;
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		if(this.particleAge++ >= this.particleMaxAge) {
+			this.setEntityDead();
+		}
+
+		float var1 = this.rand.nextFloat() * 0.1F;
+		float var2 = this.rand.nextFloat() * 0.1F;
+		float var3 = this.rand.nextFloat() * 0.1F;
+		if(this.rand.nextInt(2) == 0) {
+			var1 *= -1.0F;
+		}
+
+		if(this.rand.nextInt(2) == 0) {
+			var2 *= -1.0F;
+		}
+
+		if(this.rand.nextInt(2) == 0) {
+			var3 *= -1.0F;
+		}
+
+		this.motionX -= (double)(var1 * 0.1F);
+		this.motionY += (double)(var2 * 0.1F);
+		this.motionZ -= (double)(var3 * 0.1F);
+		this.motionX = (double)var1;
+		this.motionY = (double)var2;
+		this.motionZ = (double)var3;
+		if(this.particleAge % 10 == 0) {
+			this.motionX = (double)var1;
+			this.motionY = (double)var2;
+			this.motionZ = (double)var3;
+		}
+
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		if(this.onGround) {
+			this.setEntityDead();
+		}
+
+	}
+}
--- net/minecraft/src/EntityRenderer.java
+++ net/minecraft/src/EntityRenderer.java
@@ -138,7 +138,7 @@
 		EntityLiving var2 = this.mc.renderViewEntity;
 		float var3 = 70.0F;
 		if(var2.isInsideOfMaterial(Material.water)) {
-			var3 = 60.0F;
+			var3 *= 0.857142857F;
 		}
 
 		if(var2.health <= 0) {
@@ -820,15 +820,19 @@
 			this.fogColorBlue *= var12;
 		}
 
+		float var14;
 		if(this.cloudFog) {
 			Vec3D var16 = var2.func_628_d(var1);
 			this.fogColorRed = (float)var16.xCoord;
 			this.fogColorGreen = (float)var16.yCoord;
 			this.fogColorBlue = (float)var16.zCoord;
 		} else if(var3.isInsideOfMaterial(Material.water)) {
-			this.fogColorRed = 0.02F;
-			this.fogColorGreen = 0.02F;
-			this.fogColorBlue = 0.2F;
+			this.mc.theWorld.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var3.posX), MathHelper.floor_double(var3.posZ), 1, 1);
+			int var16 = ColorizerWater.getWaterColor(this.mc.theWorld.getWorldChunkManager().temperature[0], this.mc.theWorld.getWorldChunkManager().humidity[0]);
+			var14 = 0.5F;
+			this.fogColorRed = (float)(var16 >> 16 & 255) / 255.0F * 0.15F * var14;
+			this.fogColorGreen = (float)(var16 >> 8 & 255) / 255.0F * 0.2F * var14;
+			this.fogColorBlue = (float)(var16 & 255) / 255.0F * 0.4F * var14;
 		} else if(var3.isInsideOfMaterial(Material.lava)) {
 			this.fogColorRed = 0.6F;
 			this.fogColorGreen = 0.1F;
@@ -841,7 +845,7 @@
 		this.fogColorBlue *= var12;
 		if(this.mc.gameSettings.anaglyph) {
 			float var13 = (this.fogColorRed * 30.0F + this.fogColorGreen * 59.0F + this.fogColorBlue * 11.0F) / 100.0F;
-			float var14 = (this.fogColorRed * 30.0F + this.fogColorGreen * 70.0F) / 100.0F;
+			var14 = (this.fogColorRed * 30.0F + this.fogColorGreen * 70.0F) / 100.0F;
 			float var15 = (this.fogColorRed * 30.0F + this.fogColorBlue * 70.0F) / 100.0F;
 			this.fogColorRed = var13;
 			this.fogColorGreen = var14;
--- net/minecraft/src/EntitySplashFX.java
+++ net/minecraft/src/EntitySplashFX.java
@@ -1,10 +1,10 @@
 package net.minecraft.src;
 
 public class EntitySplashFX extends EntityRainFX {
-	public EntitySplashFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+	public EntitySplashFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12, boolean var14) {
 		super(var1, var2, var4, var6);
 		this.particleGravity = 0.04F;
-		++this.particleTextureIndex;
+		this.particleTextureIndex = var14 ? 17 + this.rand.nextInt(2) : this.particleTextureIndex + 1;
 		if(var10 == 0.0D && (var8 != 0.0D || var12 != 0.0D)) {
 			this.motionX = var8;
 			this.motionY = var10 + 0.1D;
--- /dev/null
+++ net/minecraft/src/EntityWlameFX.java
@@ -1,0 +1,59 @@
+package net.minecraft.src;
+
+public class EntityWlameFX extends EntityFlameFX {
+	private float wlameScale = this.particleScale;
+
+	public EntityWlameFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		super(var1, var2, var4, var6, var8, var10, var12);
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var14 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var14 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var14 & 255) / 255.0F;
+		this.noClip = false;
+		this.particleTextureIndex += 48;
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		float var8 = ((float)this.particleAge + var2) / (float)this.particleMaxAge;
+		this.particleScale = this.wlameScale * (1.0F - var8 * var8 * 0.5F);
+		float var9 = (float)(this.particleTextureIndex % 16) / 16.0F;
+		float var10 = var9 + 0.999F / 16.0F;
+		float var11 = (float)(this.particleTextureIndex / 16) / 16.0F;
+		float var12 = var11 + 0.999F / 16.0F;
+		float var13 = 0.1F * this.particleScale;
+		float var14 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
+		float var15 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
+		float var16 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
+		float var17 = this.getEntityBrightness(var2);
+		var1.setColorOpaque_F(this.particleRed * var17, this.particleGreen * var17, this.particleBlue * var17);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 - var5 * var13 - var7 * var13), (double)var10, (double)var12);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 - var5 * var13 + var7 * var13), (double)var10, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 + var5 * var13 + var7 * var13), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 + var5 * var13 - var7 * var13), (double)var9, (double)var12);
+		var9 += 2.0F / 16.0F;
+		var10 += 2.0F / 16.0F;
+		var1.setColorOpaque_F(var17, var17, var17);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 - var5 * var13 - var7 * var13), (double)var10, (double)var12);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 - var5 * var13 + var7 * var13), (double)var10, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 + var5 * var13 + var7 * var13), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 + var5 * var13 - var7 * var13), (double)var9, (double)var12);
+	}
+
+	public float getEntityBrightness(float var1) {
+		int var2 = MathHelper.floor_double(this.posX);
+		double var3 = (this.boundingBox.maxY - this.boundingBox.minY) * 0.66D;
+		int var5 = MathHelper.floor_double(this.posY - (double)this.yOffset + var3);
+		int var6 = MathHelper.floor_double(this.posZ);
+		if(this.worldObj.checkChunksExist(MathHelper.floor_double(this.boundingBox.minX), MathHelper.floor_double(this.boundingBox.minY), MathHelper.floor_double(this.boundingBox.minZ), MathHelper.floor_double(this.boundingBox.maxX), MathHelper.floor_double(this.boundingBox.maxY), MathHelper.floor_double(this.boundingBox.maxZ))) {
+			float var7 = this.worldObj.getLightBrightness(var2, var5, var6);
+			if(var7 < this.entityBrightness) {
+				var7 = this.entityBrightness;
+			}
+
+			return var7;
+		} else {
+			return this.entityBrightness;
+		}
+	}
+}
--- net/minecraft/src/TextureWaterFX.java
+++ net/minecraft/src/TextureWaterFX.java
@@ -62,8 +62,8 @@
 			}
 
 			float var13 = var3 * var3;
-			var5 = (int)(32.0F + var13 * 32.0F);
-			var6 = (int)(50.0F + var13 * 64.0F);
+			var5 = (int)(111.0F + var13 * 76.0F);
+			var6 = (int)(139.0F + var13 * 116.0F);
 			int var7 = 255;
 			int var8 = (int)(146.0F + var13 * 50.0F);
 			if(this.anaglyphEnabled) {
--- net/minecraft/src/EntityRainFX.java
+++ net/minecraft/src/EntityRainFX.java
@@ -6,9 +6,11 @@
 		this.motionX *= (double)0.3F;
 		this.motionY = (double)((float)Math.random() * 0.2F + 0.1F);
 		this.motionZ *= (double)0.3F;
-		this.particleRed = 1.0F;
-		this.particleGreen = 1.0F;
-		this.particleBlue = 1.0F;
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var8 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var8 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var8 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var8 & 255) / 255.0F;
 		this.particleTextureIndex = 19 + this.rand.nextInt(4);
 		this.setSize(0.01F, 0.01F);
 		this.particleGravity = 0.06F;
--- net/minecraft/src/EntityBubbleFX.java
+++ net/minecraft/src/EntityBubbleFX.java
@@ -3,9 +3,11 @@
 public class EntityBubbleFX extends EntityFX {
 	public EntityBubbleFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
 		super(var1, var2, var4, var6, var8, var10, var12);
-		this.particleRed = 1.0F;
-		this.particleGreen = 1.0F;
-		this.particleBlue = 1.0F;
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var14 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var14 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var14 & 255) / 255.0F;
 		this.particleTextureIndex = 32;
 		this.setSize(0.02F, 0.02F);
 		this.particleScale *= this.rand.nextFloat() * 0.6F + 0.2F;
@@ -13,6 +15,30 @@
 		this.motionY = var10 * (double)0.2F + (double)((float)(Math.random() * 2.0D - 1.0D) * 0.02F);
 		this.motionZ = var12 * (double)0.2F + (double)((float)(Math.random() * 2.0D - 1.0D) * 0.02F);
 		this.particleMaxAge = (int)(8.0D / (Math.random() * 0.8D + 0.2D));
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		float var8 = (float)(this.particleTextureIndex % 16) / 16.0F;
+		float var9 = var8 + 0.999F / 16.0F;
+		float var10 = (float)(this.particleTextureIndex / 16) / 16.0F;
+		float var11 = var10 + 0.999F / 16.0F;
+		float var12 = 0.1F * this.particleScale;
+		float var13 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
+		float var14 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
+		float var15 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
+		float var16 = this.getEntityBrightness(var2);
+		var1.setColorOpaque_F(this.particleRed * var16, this.particleGreen * var16, this.particleBlue * var16);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var9, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 + var5 * var12 + var7 * var12), (double)var8, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 + var5 * var12 - var7 * var12), (double)var8, (double)var11);
+		var8 += 2.0F / 16.0F;
+		var9 += 2.0F / 16.0F;
+		var1.setColorOpaque_F(var16, var16, var16);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var9, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 + var5 * var12 + var7 * var12), (double)var8, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 + var5 * var12 - var7 * var12), (double)var8, (double)var11);
 	}
 
 	public void onUpdate() {
--- net/minecraft/client/Minecraft.java
+++ net/minecraft/client/Minecraft.java
@@ -1297,6 +1297,8 @@
 			}
 
 			this.playerController.func_6473_b(this.thePlayer);
+			this.textureWaterFX.textureId = this.renderEngine.getTexture("/misc/water.png");
+			this.textureLavaFX.textureId = 0;
 			if(var3 != null) {
 				var1.emptyMethod1();
 			}
--- net/minecraft/src/RenderGlobal.java
+++ net/minecraft/src/RenderGlobal.java
@@ -1282,8 +1282,12 @@
 			if(var14 * var14 + var16 * var16 + var18 * var18 <= var20 * var20) {
 				if(var1.equals("bubble")) {
 					this.mc.effectRenderer.addEffect(new EntityBubbleFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else if(var1.equals("suspended")) {
+					this.mc.effectRenderer.addEffect(new EntitySuspendFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("smoke")) {
 					this.mc.effectRenderer.addEffect(new EntitySmokeFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else if(var1.equals("fireflies")) {
+					this.mc.effectRenderer.addEffect(new EntityFirefliesFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("note")) {
 					this.mc.effectRenderer.addEffect(new EntityNoteFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("portal")) {
@@ -1296,20 +1300,62 @@
 					this.mc.effectRenderer.addEffect(new EntityLavaFX(this.worldObj, var2, var4, var6));
 				} else if(var1.equals("footstep")) {
 					this.mc.effectRenderer.addEffect(new EntityFootStepFX(this.renderEngine, this.worldObj, var2, var4, var6));
+				} else if(var1.equals("largesplash")) {
+					this.mc.effectRenderer.addEffect(new EntitySplashFX(this.worldObj, var2, var4, var6, var8, var10, var12, true));
 				} else if(var1.equals("splash")) {
-					this.mc.effectRenderer.addEffect(new EntitySplashFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+					this.mc.effectRenderer.addEffect(new EntitySplashFX(this.worldObj, var2, var4, var6, var8, var10, var12, false));
+				} else if(var1.equals("wake")) {
+					this.mc.effectRenderer.addEffect(new EntityWakeFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("largesmoke")) {
 					this.mc.effectRenderer.addEffect(new EntitySmokeFX(this.worldObj, var2, var4, var6, var8, var10, var12, 2.5F));
 				} else if(var1.equals("reddust")) {
 					this.mc.effectRenderer.addEffect(new EntityReddustFX(this.worldObj, var2, var4, var6, (float)var8, (float)var10, (float)var12));
 				} else if(var1.equals("snowballpoof")) {
 					this.mc.effectRenderer.addEffect(new EntitySlimeFX(this.worldObj, var2, var4, var6, Item.snowball));
+				} else if(var1.equals("wlame")) {
+					this.mc.effectRenderer.addEffect(new EntityWlameFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else if(var1.equals("water")) {
+					this.mc.effectRenderer.addEffect(new EntityWaterFX(this.worldObj, var2, var4, var6));
 				} else if(var1.equals("snowshovel")) {
 					this.mc.effectRenderer.addEffect(new EntitySnowShovelFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("slime")) {
 					this.mc.effectRenderer.addEffect(new EntitySlimeFX(this.worldObj, var2, var4, var6, Item.slimeBall));
 				} else if(var1.equals("heart")) {
 					this.mc.effectRenderer.addEffect(new EntityHeartFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else {
+					String[] var22;
+					int var23;
+					if(var1.startsWith("iconcrack_")) {
+						var22 = var1.split("_", 3);
+						var23 = Integer.parseInt(var22[1]);
+						this.mc.effectRenderer.addEffect(new EntitySlimeFX(this.worldObj, var2, var4, var6, Item.itemsList[var23]));
+					} else {
+						int var24;
+						int var25;
+						int var26;
+						int var27;
+						if(var1.startsWith("tilecrack_")) {
+							var22 = var1.split("_", 3);
+							var23 = Integer.parseInt(var22[1]);
+							var24 = Integer.parseInt(var22[2]);
+							var25 = MathHelper.floor_double(var2);
+							var26 = MathHelper.floor_double(var4);
+							var27 = MathHelper.floor_double(var6);
+							this.mc.effectRenderer.addEffect((new EntityDiggingFX(this.worldObj, var2, var4, var6, var8, var10, var12, Block.blocksList[var23], 1, var24)).func_4041_a(var25, var26, var27));
+						} else if(var1.startsWith("tiledust_")) {
+							var22 = var1.split("_", 3);
+							var23 = Integer.parseInt(var22[1]);
+							var24 = Integer.parseInt(var22[2]);
+							var25 = MathHelper.floor_double(var2);
+							var26 = MathHelper.floor_double(var4);
+							var27 = MathHelper.floor_double(var6);
+							EntityDiggingFX var28 = new EntityDiggingFX(this.worldObj, var2, var4, var6, var8, var10, var12, Block.blocksList[var23], 1, var24);
+							var28.motionX = var8;
+							var28.motionY = var10;
+							var28.motionZ = var12;
+							this.mc.effectRenderer.addEffect(var28.func_4041_a(var25, var26, var27));
+						}
+					}
 				}
 
 			}
@@ -1359,6 +1405,7 @@
 	public void func_28136_a(EntityPlayer var1, int var2, int var3, int var4, int var5, int var6) {
 		Random var7 = this.worldObj.rand;
 		int var16;
+		int var70;
 		switch(var2) {
 		case 1000:
 			this.worldObj.playSoundEffect((double)var3, (double)var4, (double)var5, "random.click", 1.0F, 1.0F);
@@ -1413,6 +1460,44 @@
 			}
 
 			this.mc.effectRenderer.addBlockDestroyEffects(var3, var4, var5, var6 & 255, var6 >> 8 & 255);
+			break;
+		case 2004:
+			for(var70 = 0; var70 < 20; ++var70) {
+				double var33 = (double)var3 + 0.5D + ((double)this.worldObj.rand.nextFloat() - 0.5D) * 2.0D;
+				double var35 = (double)var4 + 0.5D + ((double)this.worldObj.rand.nextFloat() - 0.5D) * 2.0D;
+				double var37 = (double)var5 + 0.5D + ((double)this.worldObj.rand.nextFloat() - 0.5D) * 2.0D;
+				this.worldObj.spawnParticle("smoke", var33, var35, var37, 0.0D, 0.0D, 0.0D);
+				this.worldObj.spawnParticle("flame", var33, var35, var37, 0.0D, 0.0D, 0.0D);
+			}
+		case 2006:
+		default:
+			break;
+		case 2007:
+			if(this.mc.gameSettings.fancyGraphics) {
+				for(var70 = 0; var70 < var6; ++var70) {
+					float var18 = var7.nextFloat() * 0.1F;
+					float var19 = var7.nextFloat() * 0.1F;
+					float var20 = var7.nextFloat() * 0.1F;
+					float var21 = var7.nextFloat();
+					float var22 = var7.nextFloat();
+					float var23 = var7.nextFloat();
+					if(var7.nextInt(2) == 0) {
+						var18 *= -1.0F;
+					}
+
+					if(var7.nextInt(2) == 0) {
+						var19 *= -1.0F;
+					}
+
+					if(var7.nextInt(2) == 0) {
+						var20 *= -1.0F;
+					}
+
+					if(var7.nextInt(3) == 0) {
+						this.worldObj.spawnParticle("fireflies", (double)((float)var3 + var21), (double)((float)var4 + var22), (double)((float)var5 + var23), (double)var18, (double)var19, (double)var20);
+					}
+				}
+			}
 		}
 
 	}
--- net/minecraft/src/BlockFluid.java
+++ net/minecraft/src/BlockFluid.java
@@ -2,7 +2,11 @@
 
 import java.util.Random;
 
+import net.minecraft.client.Minecraft;
+
 public abstract class BlockFluid extends Block {
+	protected static boolean graphicsLevel;
+
 	protected BlockFluid(int var1, Material var2) {
 		super(var1, (var2 == Material.lava ? 14 : 12) * 16 + 13, var2);
 		float var3 = 0.0F;
@@ -11,8 +15,19 @@
 		this.setTickOnLoad(true);
 	}
 
+	public int getRenderColor(int var1) {
+		return this.blockMaterial == Material.water ? 25828 : (graphicsLevel && this.blockMaterial == Material.lava ? 16722688 : 16777215);
+	}
+
 	public int colorMultiplier(IBlockAccess var1, int var2, int var3, int var4) {
-		return 16777215;
+		if(this.blockMaterial == Material.water) {
+			var1.getWorldChunkManager().func_4069_a(var2, var4, 1, 1);
+			double var5 = var1.getWorldChunkManager().temperature[0];
+			double var7 = var1.getWorldChunkManager().humidity[0];
+			return ColorizerWater.getWaterColor(var5, var7);
+		} else {
+			return graphicsLevel && this.blockMaterial == Material.lava ? 16722688 : 16777215;
+		}
 	}
 
 	public static float getPercentAir(int var0) {
@@ -59,12 +74,12 @@
 
 	public boolean getIsBlockSolid(IBlockAccess var1, int var2, int var3, int var4, int var5) {
 		Material var6 = var1.getBlockMaterial(var2, var3, var4);
-		return var6 == this.blockMaterial ? false : (var6 == Material.ice ? false : (var5 == 1 ? true : super.getIsBlockSolid(var1, var2, var3, var4, var5)));
+		return var6 == this.blockMaterial ? false : (var5 == 1 ? true : (var6 == Material.ice ? false : super.getIsBlockSolid(var1, var2, var3, var4, var5)));
 	}
 
 	public boolean shouldSideBeRendered(IBlockAccess var1, int var2, int var3, int var4, int var5) {
 		Material var6 = var1.getBlockMaterial(var2, var3, var4);
-		return var6 == this.blockMaterial ? false : (var6 == Material.ice ? false : (var5 == 1 ? true : super.shouldSideBeRendered(var1, var2, var3, var4, var5)));
+		return var6 == this.blockMaterial ? false : (var5 == 1 ? true : (var6 == Material.ice ? false : super.shouldSideBeRendered(var1, var2, var3, var4, var5)));
 	}
 
 	public AxisAlignedBB getCollisionBoundingBoxFromPool(World var1, int var2, int var3, int var4) {
@@ -191,20 +206,116 @@
 	}
 
 	public void randomDisplayTick(World var1, int var2, int var3, int var4, Random var5) {
+		int var6;
+		double var12;
+		if(this.blockMaterial == Material.water && Minecraft.isFancyGraphicsEnabled()) {
+			if(var5.nextInt(10) == 0) {
+				var6 = var1.getBlockMetadata(var2, var3, var4);
+				if(var6 <= 0 || var6 >= 8) {
+					var1.spawnParticle("suspended", (double)((float)var2 + var5.nextFloat()), (double)((float)var3 + var5.nextFloat()), (double)((float)var4 + var5.nextFloat()), 0.0D, 0.0D, 0.0D);
+				}
+			}
+
+			for(var6 = 0; var6 < 4; ++var6) {
+				int var7 = var5.nextInt(4);
+				int var8 = var2;
+				int var9 = var4;
+				if(var7 == 0) {
+					var8 = var2 - 1;
+				}
+
+				if(var7 == 1) {
+					++var8;
+				}
+
+				if(var7 == 2) {
+					var9 = var4 - 1;
+				}
+
+				if(var7 == 3) {
+					++var9;
+				}
+
+				Material var10 = var1.getBlockMaterial(var8, var3 - 1, var9);
+				if(var1.getBlockMaterial(var8, var3, var9) == Material.air && (var10.getIsSolid() || var10.getIsLiquid() || var10 == Material.portal)) {
+					float var11 = 1.0F / 16.0F;
+					var12 = (double)((float)var2 + var5.nextFloat());
+					double var14 = (double)((float)var3 + var5.nextFloat());
+					double var16 = (double)((float)var4 + var5.nextFloat());
+					if(var7 == 0) {
+						var12 = (double)((float)var2 - var11);
+					}
+
+					if(var7 == 1) {
+						var12 = (double)((float)(var2 + 1) + var11);
+					}
+
+					if(var7 == 2) {
+						var16 = (double)((float)var4 - var11);
+					}
+
+					if(var7 == 3) {
+						var16 = (double)((float)(var4 + 1) + var11);
+					}
+
+					double var18 = 0.0D;
+					double var20 = 0.0D;
+					if(var7 == 0) {
+						var18 = (double)(-var11);
+					}
+
+					if(var7 == 1) {
+						var18 = (double)var11;
+					}
+
+					if(var7 == 2) {
+						var20 = (double)(-var11);
+					}
+
+					if(var7 == 3) {
+						var20 = (double)var11;
+					}
+
+					var1.spawnParticle("splash", var12, var14, var16, var18, 0.0D, var20);
+				}
+			}
+		}
+		
 		if(this.blockMaterial == Material.water && var5.nextInt(64) == 0) {
-			int var6 = var1.getBlockMetadata(var2, var3, var4);
+			var6 = var1.getBlockMetadata(var2, var3, var4);
 			if(var6 > 0 && var6 < 8) {
 				var1.playSoundEffect((double)((float)var2 + 0.5F), (double)((float)var3 + 0.5F), (double)((float)var4 + 0.5F), "liquid.water", var5.nextFloat() * 0.25F + 12.0F / 16.0F, var5.nextFloat() * 1.0F + 0.5F);
 			}
 		}
 
-		if(this.blockMaterial == Material.lava && var1.getBlockMaterial(var2, var3 + 1, var4) == Material.air && !var1.isBlockOpaqueCube(var2, var3 + 1, var4) && var5.nextInt(100) == 0) {
-			double var12 = (double)((float)var2 + var5.nextFloat());
-			double var8 = (double)var3 + this.maxY;
-			double var10 = (double)((float)var4 + var5.nextFloat());
-			var1.spawnParticle("lava", var12, var8, var10, 0.0D, 0.0D, 0.0D);
-		}
-
+		double var25;
+		double var26;
+		if(this.blockMaterial == Material.lava && var1.getBlockMaterial(var2, var3 + 1, var4) == Material.air && !var1.isBlockOpaqueCube(var2, var3 + 1, var4)) {
+			if(var5.nextInt(100) == 0) {
+				double var23 = (double)((float)var2 + var5.nextFloat());
+				var25 = (double)var3 + this.maxY;
+				var26 = (double)((float)var4 + var5.nextFloat());
+				var1.spawnParticle("lava", var23, var25, var26, 0.0D, 0.0D, 0.0D);
+				var1.playSoundEffect(var23, var25, var26, "liquid.lavapop", 0.2F + var5.nextFloat() * 0.2F, 0.9F + var5.nextFloat() * 0.15F);
+			}
+
+			if(var5.nextInt(200) == 0) {
+				var1.playSoundEffect((double)var2, (double)var3, (double)var4, "liquid.lava", 0.2F + var5.nextFloat() * 0.2F, 0.9F + var5.nextFloat() * 0.15F);
+			}
+		}
+
+		Material var24 = var1.getBlockMaterial(var2, var3 - 2, var4);
+		boolean var22 = this.blockMaterial == Material.water;
+		if(var5.nextInt(50) == 0 && var1.isBlockNormalCube(var2, var3 - 1, var4) && !var24.getIsSolid() && var24 != this.blockMaterial) {
+			var25 = (double)((float)var2 + var5.nextFloat());
+			var26 = (double)var3 - 1.125D;
+			var12 = (double)((float)var4 + var5.nextFloat());
+			if(var22) {
+				var1.spawnParticle("water", var25, var26, var12, 0.0D, 0.0D, 0.0D);
+			} else if(this.blockMaterial == Material.lava) {
+				var1.spawnParticle("lava", var25, var26, var12, 0.0D, 0.0D, 0.0D);
+			}
+		}
 	}
 
 	public static double func_293_a(IBlockAccess var0, int var1, int var2, int var3, Material var4) {
--- net/minecraft/src/ColorizerWater.java
+++ net/minecraft/src/ColorizerWater.java
@@ -6,4 +6,14 @@
 	public static void func_28182_a(int[] var0) {
 		waterBuffer = var0;
 	}
+
+	public static int getWaterColor(double var0, double var2) {
+		try {
+			int var4 = (int)((1.0D - var0) * 255.0D);
+			int var5 = (int)((1.0D - var2 * var0) * 255.0D);
+			return waterBuffer[var5 << 8 | var4];
+		} catch (Throwable var6) {
+			return 25828;
+		}
+	}
 }
--- net/minecraft/src/TextureWaterFlowFX.java
+++ net/minecraft/src/TextureWaterFlowFX.java
@@ -63,8 +63,8 @@
 			}
 
 			float var13 = var3 * var3;
-			var5 = (int)(32.0F + var13 * 32.0F);
-			var6 = (int)(50.0F + var13 * 64.0F);
+			var5 = (int)(111.0F + var13 * 76.0F);
+			var6 = (int)(139.0F + var13 * 116.0F);
 			int var7 = 255;
 			int var8 = (int)(146.0F + var13 * 50.0F);
 			if(this.anaglyphEnabled) {
--- /dev/null
+++ net/minecraft/src/EntityWaterFX.java
@@ -1,0 +1,84 @@
+package net.minecraft.src;
+
+public class EntityWaterFX extends EntityLavaFX {
+	private float waterParticleScale;
+
+	public EntityWaterFX(World var1, double var2, double var4, double var6) {
+		super(var1, var2, var4, var6);
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var8 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var8 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var8 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var8 & 255) / 255.0F;
+		this.waterParticleScale = this.particleScale;
+		this.particleTextureIndex += 48;
+	}
+
+	public float getEntityBrightness(float var1) {
+		int var2 = MathHelper.floor_double(this.posX);
+		double var3 = (this.boundingBox.maxY - this.boundingBox.minY) * 0.66D;
+		int var5 = MathHelper.floor_double(this.posY - (double)this.yOffset + var3);
+		int var6 = MathHelper.floor_double(this.posZ);
+		if(this.worldObj.checkChunksExist(MathHelper.floor_double(this.boundingBox.minX), MathHelper.floor_double(this.boundingBox.minY), MathHelper.floor_double(this.boundingBox.minZ), MathHelper.floor_double(this.boundingBox.maxX), MathHelper.floor_double(this.boundingBox.maxY), MathHelper.floor_double(this.boundingBox.maxZ))) {
+			float var7 = this.worldObj.getLightBrightness(var2, var5, var6);
+			if(var7 < this.entityBrightness) {
+				var7 = this.entityBrightness;
+			}
+
+			return var7;
+		} else {
+			return this.entityBrightness;
+		}
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		float var8 = ((float)this.particleAge + var2) / (float)this.particleMaxAge;
+		this.particleScale = this.waterParticleScale * (1.0F - var8 * var8);
+		float var9 = (float)(this.particleTextureIndex % 16) / 16.0F;
+		float var10 = var9 + 0.999F / 16.0F;
+		float var11 = (float)(this.particleTextureIndex / 16) / 16.0F;
+		float var12 = var11 + 0.999F / 16.0F;
+		float var13 = 0.1F * this.particleScale;
+		float var14 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
+		float var15 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
+		float var16 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
+		float var17 = this.getEntityBrightness(var2);
+		var1.setColorOpaque_F(this.particleRed * var17, this.particleGreen * var17, this.particleBlue * var17);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 - var5 * var13 - var7 * var13), (double)var10, (double)var12);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 - var5 * var13 + var7 * var13), (double)var10, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 + var5 * var13 + var7 * var13), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 + var5 * var13 - var7 * var13), (double)var9, (double)var12);
+		var9 += 2.0F / 16.0F;
+		var10 += 2.0F / 16.0F;
+		var1.setColorOpaque_F(var17, var17, var17);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 - var5 * var13 - var7 * var13), (double)var10, (double)var12);
+		var1.addVertexWithUV((double)(var14 - var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 - var5 * var13 + var7 * var13), (double)var10, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 + var6 * var13), (double)(var15 + var4 * var13), (double)(var16 + var5 * var13 + var7 * var13), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var14 + var3 * var13 - var6 * var13), (double)(var15 - var4 * var13), (double)(var16 + var5 * var13 - var7 * var13), (double)var9, (double)var12);
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		if(this.particleAge++ >= this.particleMaxAge) {
+			this.setEntityDead();
+		}
+
+		float var1 = (float)this.particleAge / (float)this.particleMaxAge;
+		if(this.rand.nextFloat() / 4.0F > var1) {
+			this.worldObj.spawnParticle("wlame", this.posX, this.posY, this.posZ, this.motionX, this.motionY, this.motionZ);
+		}
+
+		this.motionY -= 0.03D;
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		this.motionX *= (double)0.999F;
+		this.motionY *= (double)0.999F;
+		this.motionZ *= (double)0.999F;
+		if(this.onGround) {
+			this.motionX *= (double)0.7F;
+			this.motionZ *= (double)0.7F;
+		}
+
+	}
+}
--- /dev/null
+++ net/minecraft/src/EntityWakeFX.java
@@ -1,0 +1,47 @@
+package net.minecraft.src;
+
+public class EntityWakeFX extends EntityFX {
+	public EntityWakeFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		super(var1, var2, var4, var6, 0.0D, 0.0D, 0.0D);
+		this.motionX *= 0.3D;
+		this.motionY = (double)((float)Math.random() * 0.2F + 0.1F);
+		this.motionZ *= 0.3D;
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var14 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var14 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var14 & 255) / 255.0F;
+		this.particleTextureIndex = 16 + this.rand.nextInt(2);
+		this.setSize(0.01F, 0.01F);
+		this.particleMaxAge = (int)(8.0D / (Math.random() * 0.8D + 0.2D));
+		this.particleGravity = 0.0F;
+		this.motionX = var8;
+		this.motionY = var10;
+		this.motionZ = var12;
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		this.motionY -= (double)this.particleGravity;
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		this.motionX *= 0.98D;
+		this.motionY *= 0.98D;
+		this.motionZ *= 0.98D;
+		int var1 = 60 - this.particleMaxAge;
+		float var2 = (float)var1 * 0.001F;
+		this.setSize(var2, var2);
+		var1 %= 4;
+		if(var1 == 0) {
+			this.particleTextureIndex = 16;
+		} else {
+			this.particleTextureIndex = 19 + var1;
+		}
+
+		if(this.particleMaxAge-- <= 0) {
+			this.setEntityDead();
+		}
+
+	}
+}
--- net/minecraft/src/ItemRenderer.java
+++ net/minecraft/src/ItemRenderer.java
@@ -350,6 +350,9 @@
 	private void renderWarpedTextureOverlay(float var1) {
 		Tessellator var2 = Tessellator.instance;
 		float var3 = this.mc.thePlayer.getEntityBrightness(var1);
+		this.mc.theWorld.getWorldChunkManager().func_4069_a(MathHelper.floor_double(this.mc.thePlayer.posX), MathHelper.floor_double(this.mc.thePlayer.posZ), 1, 1);
+		int var69 = ColorizerWater.getWaterColor(this.mc.theWorld.getWorldChunkManager().temperature[0], this.mc.theWorld.getWorldChunkManager().humidity[0]);
+		GL11.glColor4f((float)(var69 >> 16 & 255) / 255.0F * var3, (float)(var69 >> 8 & 255) / 255.0F * var3, (float)(var69 & 255) / 255.0F * var3, 0.5F);
 		GL11.glColor4f(var3, var3, var3, 0.5F);
 		GL11.glEnable(GL11.GL_BLEND);
 		GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
--- /dev/null
+++ net/minecraft/src/EntitySuspendFX.java
@@ -1,0 +1,34 @@
+package net.minecraft.src;
+
+public class EntitySuspendFX extends EntityFX {
+	public EntitySuspendFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		super(var1, var2, var4 - 0.125D, var6, var8, var10, var12);
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var14 >> 16 & 255) / 446.25F;
+		this.particleGreen = (float)(var14 >> 8 & 255) / 446.25F;
+		this.particleBlue = (float)(var14 & 255) / 255.0F;
+		this.particleTextureIndex = 0;
+		this.setSize(0.01F, 0.01F);
+		this.particleScale *= this.rand.nextFloat() * 0.6F + 0.2F;
+		this.motionX = var8 * 0.0D;
+		this.motionY = var10 * 0.0D;
+		this.motionZ = var12 * 0.0D;
+		this.particleMaxAge = (int)(16.0D / (Math.random() * 0.8D + 0.2D));
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		if(this.worldObj.getBlockMaterial(MathHelper.floor_double(this.posX), MathHelper.floor_double(this.posY), MathHelper.floor_double(this.posZ)) != Material.water) {
+			this.setEntityDead();
+		}
+
+		if(this.particleMaxAge-- <= 0) {
+			this.setEntityDead();
+		}
+
+	}
+}
