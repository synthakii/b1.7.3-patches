--- net/minecraft/src/ModelRenderer.java
+++ net/minecraft/src/ModelRenderer.java
@@ -13,22 +13,35 @@
 	public float rotateAngleX;
 	public float rotateAngleY;
 	public float rotateAngleZ;
+	public float field_35977_i;
+	public float field_35975_j;
+	public float field_35976_k;
+	public float field_35973_l;
+	public float field_35974_m;
+	public float field_35972_n;
 	private boolean compiled = false;
 	private int displayList = 0;
 	public boolean mirror = false;
 	public boolean showModel = true;
 	public boolean field_1402_i = false;
 
-	public ModelRenderer(int var1, int var2) {
-		this.textureOffsetX = var1;
-		this.textureOffsetY = var2;
-	}
+	public ModelRenderer(ModelBase var1, int var2, int var3) {
+		this.textureOffsetX = var2;
+		this.textureOffsetY = var3;
+		var1.field_35394_j.add(this);
+ 	}
 
 	public void addBox(float var1, float var2, float var3, int var4, int var5, int var6) {
 		this.addBox(var1, var2, var3, var4, var5, var6, 0.0F);
 	}
 
 	public void addBox(float var1, float var2, float var3, int var4, int var5, int var6, float var7) {
+		this.field_35977_i = var1;
+		this.field_35975_j = var2;
+		this.field_35976_k = var3;
+		this.field_35973_l = var1 + (float)var4;
+		this.field_35974_m = var2 + (float)var5;
+		this.field_35972_n = var3 + (float)var6;
 		this.corners = new PositionTextureVertex[8];
 		this.faces = new TexturedQuad[6];
 		float var8 = var1 + (float)var4;
--- net/minecraft/src/ModelChicken.java
+++ net/minecraft/src/ModelChicken.java
@@ -12,28 +12,28 @@
 
 	public ModelChicken() {
 		byte var1 = 16;
-		this.head = new ModelRenderer(0, 0);
+		this.head = new ModelRenderer(this, 0, 0);
 		this.head.addBox(-2.0F, -6.0F, -2.0F, 4, 6, 3, 0.0F);
 		this.head.setRotationPoint(0.0F, (float)(-1 + var1), -4.0F);
-		this.bill = new ModelRenderer(14, 0);
+		this.bill = new ModelRenderer(this, 14, 0);
 		this.bill.addBox(-2.0F, -4.0F, -4.0F, 4, 2, 2, 0.0F);
 		this.bill.setRotationPoint(0.0F, (float)(-1 + var1), -4.0F);
-		this.chin = new ModelRenderer(14, 4);
+		this.chin = new ModelRenderer(this, 14, 4);
 		this.chin.addBox(-1.0F, -2.0F, -3.0F, 2, 2, 2, 0.0F);
 		this.chin.setRotationPoint(0.0F, (float)(-1 + var1), -4.0F);
-		this.body = new ModelRenderer(0, 9);
+		this.body = new ModelRenderer(this, 0, 9);
 		this.body.addBox(-3.0F, -4.0F, -3.0F, 6, 8, 6, 0.0F);
 		this.body.setRotationPoint(0.0F, (float)(0 + var1), 0.0F);
-		this.rightLeg = new ModelRenderer(26, 0);
+		this.rightLeg = new ModelRenderer(this, 26, 0);
 		this.rightLeg.addBox(-1.0F, 0.0F, -3.0F, 3, 5, 3);
 		this.rightLeg.setRotationPoint(-2.0F, (float)(3 + var1), 1.0F);
-		this.leftLeg = new ModelRenderer(26, 0);
+		this.leftLeg = new ModelRenderer(this, 26, 0);
 		this.leftLeg.addBox(-1.0F, 0.0F, -3.0F, 3, 5, 3);
 		this.leftLeg.setRotationPoint(1.0F, (float)(3 + var1), 1.0F);
-		this.rightWing = new ModelRenderer(24, 13);
+		this.rightWing = new ModelRenderer(this, 24, 13);
 		this.rightWing.addBox(0.0F, 0.0F, -3.0F, 1, 4, 6);
 		this.rightWing.setRotationPoint(-4.0F, (float)(-3 + var1), 0.0F);
-		this.leftWing = new ModelRenderer(24, 13);
+		this.leftWing = new ModelRenderer(this, 24, 13);
 		this.leftWing.addBox(-1.0F, 0.0F, -3.0F, 1, 4, 6);
 		this.leftWing.setRotationPoint(4.0F, (float)(-3 + var1), 0.0F);
 	}
--- net/minecraft/src/ModelBoat.java
+++ net/minecraft/src/ModelBoat.java
@@ -4,11 +4,11 @@
 	public ModelRenderer[] boatSides = new ModelRenderer[5];
 
 	public ModelBoat() {
-		this.boatSides[0] = new ModelRenderer(0, 8);
-		this.boatSides[1] = new ModelRenderer(0, 0);
-		this.boatSides[2] = new ModelRenderer(0, 0);
-		this.boatSides[3] = new ModelRenderer(0, 0);
-		this.boatSides[4] = new ModelRenderer(0, 0);
+		this.boatSides[0] = new ModelRenderer(this, 0, 8);
+		this.boatSides[1] = new ModelRenderer(this, 0, 0);
+		this.boatSides[2] = new ModelRenderer(this, 0, 0);
+		this.boatSides[3] = new ModelRenderer(this, 0, 0);
+		this.boatSides[4] = new ModelRenderer(this, 0, 0);
 		byte var1 = 24;
 		byte var2 = 6;
 		byte var3 = 20;
--- net/minecraft/src/ItemFood.java
+++ net/minecraft/src/ItemFood.java
@@ -3,6 +3,7 @@
 public class ItemFood extends Item {
 	private int healAmount;
 	private boolean isWolfsFavoriteMeat;
+	private boolean field_35431_bw;
 
 	public ItemFood(int var1, int var2, boolean var3) {
 		super(var1);
@@ -11,10 +12,28 @@
 		this.maxStackSize = 1;
 	}
 
-	public ItemStack onItemRightClick(ItemStack var1, World var2, EntityPlayer var3) {
-		--var1.stackSize;
-		var3.heal(this.healAmount);
+	public ItemStack onFoodEaten(ItemStack var1, World var2, EntityPlayer var3) {
+ 		--var1.stackSize;
+		var3.healAmount += this.healAmount;
+		var2.playSoundAtEntity(var3, "random.burp", 0.5F, var2.rand.nextFloat() * 0.1F + 0.9F);
+
 		return var1;
+	}
+
+	public int getMaxItemUseDuration(ItemStack var1) {
+		return 32;
+	}
+
+	public EnumAction getItemUseAction(ItemStack var1) {
+		return EnumAction.eat;
+	}
+
+	public ItemStack onItemRightClick(ItemStack var1, World var2, EntityPlayer var3) {
+		if(var3.health < 20) {
+			var3.setItemInUse(var1, this.getMaxItemUseDuration(var1));
+		}
+
+ 		return var1;
 	}
 
 	public int getHealAmount() {
--- net/minecraft/src/RenderBlocks.java
+++ net/minecraft/src/RenderBlocks.java
@@ -44,7 +44,31 @@
 	private float field_22356_D;
 	private float field_22354_E;
 	private float field_22353_F;
+	private int field_35936_P;
+	private int field_35935_Q;
+	private int field_35938_R;
+	private int field_35937_S;
+	private int field_35932_T;
+	private int field_35931_U;
+	private int field_35934_V;
+	private int field_35933_W;
+	private int field_35940_X;
+	private int field_35939_Y;
+	private int field_35941_Z;
+	private int field_35951_aa;
+	private int field_35952_ab;
+	private int field_35949_ac;
+	private int field_35950_ad;
+	private int field_35955_ae;
+	private int field_35956_af;
+	private int field_35953_ag;
+	private int field_35954_ah;
+	private int field_35945_ai;
 	private int field_22352_G = 1;
+	private int field_35943_ak;
+	private int field_35944_al;
+	private int field_35947_am;
+	private int field_35948_an;
 	private float colorRedTopLeft;
 	private float colorRedBottomLeft;
 	private float colorRedBottomRight;
@@ -104,8 +128,9 @@
 		float var10 = 1.0F;
 		float var11 = 0.8F;
 		float var12 = 0.6F;
-		float var25 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		var5.setColorOpaque_F(var9 * var25, var9 * var25, var9 * var25);
+		int var25 = var1.func_35275_c(this.blockAccess, var2, var3, var4);
+		var5.func_35835_b(var25);
+		var5.setColorOpaque_F(var9, var9, var9);
 		int var26 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 0);
 		int var27 = (var26 & 15) << 4;
 		int var28 = var26 & 240;
@@ -122,8 +147,8 @@
 		var5.addVertexWithUV(var37, var41, var43, var29, var33);
 		var5.addVertexWithUV(var39, var41, var43, var31, var33);
 		var5.addVertexWithUV(var39, var41, var45, var31, var35);
-		float var64 = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
-		var5.setColorOpaque_F(var10 * var64, var10 * var64, var10 * var64);
+		var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4));
+		var5.setColorOpaque_F(var10, var10, var10);
 		var27 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 1);
 		var28 = (var27 & 15) << 4;
 		int var67 = var27 & 240;
@@ -190,45 +215,29 @@
 
 		float var66;
 		if(var26 != 2 && (this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3, var4 - 1, 2))) {
-			var66 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-			if(var1.minZ > 0.0D) {
-				var66 = var25;
-			}
-
-			var5.setColorOpaque_F(var11 * var66, var11 * var66, var11 * var66);
+			var5.func_35835_b(var1.minZ > 0.0D ? var25 : var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1));
+			var5.setColorOpaque_F(var11, var11, var11);
 			this.flipTexture = var65 == 2;
 			this.renderEastFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 2));
 		}
 
 		if(var26 != 3 && (this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3, var4 + 1, 3))) {
-			var66 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
-			if(var1.maxZ < 1.0D) {
-				var66 = var25;
-			}
-
-			var5.setColorOpaque_F(var11 * var66, var11 * var66, var11 * var66);
+			var5.func_35835_b(var1.maxZ < 1.0D ? var25 : var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1));
+			var5.setColorOpaque_F(var11, var11, var11);
 			this.flipTexture = var65 == 3;
 			this.renderWestFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 3));
 		}
 
 		if(var26 != 4 && (this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2 - 1, var3, var4, 4))) {
-			var66 = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-			if(var1.minX > 0.0D) {
-				var66 = var25;
-			}
-
-			var5.setColorOpaque_F(var12 * var66, var12 * var66, var12 * var66);
+			var5.func_35835_b(var1.minZ > 0.0D ? var25 : var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4));
+			var5.setColorOpaque_F(var12, var12, var12);
 			this.flipTexture = var65 == 4;
 			this.renderNorthFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 4));
 		}
 
 		if(var26 != 5 && (this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2 + 1, var3, var4, 5))) {
-			var66 = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
-			if(var1.maxX < 1.0D) {
-				var66 = var25;
-			}
-
-			var5.setColorOpaque_F(var12 * var66, var12 * var66, var12 * var66);
+			var5.func_35835_b(var1.maxZ < 1.0D ? var25 : var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4));
+			var5.setColorOpaque_F(var12, var12, var12);
 			this.flipTexture = var65 == 5;
 			this.renderSouthFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 5));
 		}
@@ -240,12 +249,8 @@
 	public boolean renderBlockTorch(Block var1, int var2, int var3, int var4) {
 		int var5 = this.blockAccess.getBlockMetadata(var2, var3, var4);
 		Tessellator var6 = Tessellator.instance;
-		float var7 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		if(Block.lightValue[var1.blockID] > 0) {
-			var7 = 1.0F;
-		}
-
-		var6.setColorOpaque_F(var7, var7, var7);
+		var6.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+		var6.setColorOpaque_F(1.0F, 1.0F, 1.0F);
 		double var8 = (double)0.4F;
 		double var10 = 0.5D - var8;
 		double var12 = (double)0.2F;
@@ -638,7 +643,8 @@
 			this.overrideBlockTexture = -1;
 		}
 
-		float var13 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
+		var8.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+		float var13 = 1.0F;
 		if(Block.lightValue[var1.blockID] > 0) {
 			var13 = 1.0F;
 		}
@@ -776,8 +782,8 @@
 			var6 = this.overrideBlockTexture;
 		}
 
-		float var7 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		var5.setColorOpaque_F(var7, var7, var7);
+		var5.setColorOpaque_F(1.0F, 1.0F, 1.0F);
+		var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
 		int var8 = (var6 & 15) << 4;
 		int var9 = var6 & 240;
 		double var10 = (double)((float)var8 / 256.0F);
@@ -965,7 +971,8 @@
 			var7 = this.overrideBlockTexture;
 		}
 
-		float var8 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
+		var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+		float var8 = 1.0F;
 		float var9 = (float)var6 / 15.0F;
 		float var10 = var9 * 0.6F + 0.4F;
 		if(var6 == 0) {
@@ -1170,8 +1177,8 @@
 			var6 &= 7;
 		}
 
-		float var8 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		var5.setColorOpaque_F(var8, var8, var8);
+		var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+		var5.setColorOpaque_F(1.0F, 1.0F, 1.0F);
 		int var9 = (var7 & 15) << 4;
 		int var10 = var7 & 240;
 		double var11 = (double)((float)var9 / 256.0F);
@@ -1250,7 +1257,8 @@
 			var6 = this.overrideBlockTexture;
 		}
 
-		float var7 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
+		var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+		float var7 = 1.0F;
 		var5.setColorOpaque_F(var7, var7, var7);
 		int var8 = (var6 & 15) << 4;
 		int var9 = var6 & 240;
@@ -1294,7 +1302,8 @@
 
 	public boolean renderBlockReed(Block var1, int var2, int var3, int var4) {
 		Tessellator var5 = Tessellator.instance;
-		float var6 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
+		var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+		float var6 = 1.0F;
 		int var7 = var1.colorMultiplier(this.blockAccess, var2, var3, var4);
 		float var8 = (float)(var7 >> 16 & 255) / 255.0F;
 		float var9 = (float)(var7 >> 8 & 255) / 255.0F;
@@ -1326,8 +1335,8 @@
 
 	public boolean renderBlockCrops(Block var1, int var2, int var3, int var4) {
 		Tessellator var5 = Tessellator.instance;
-		float var6 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		var5.setColorOpaque_F(var6, var6, var6);
+		var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+		var5.setColorOpaque_F(1.0F, 1.0F, 1.0F);
 		this.func_1245_b(var1, this.blockAccess.getBlockMetadata(var2, var3, var4), (double)var2, (double)((float)var3 - 1.0F / 16.0F), (double)var4);
 		return true;
 	}
@@ -1520,7 +1529,8 @@
 
 				var36 = MathHelper.sin(var29) * 8.0F / 256.0F;
 				var37 = MathHelper.cos(var29) * 8.0F / 256.0F;
-				var38 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
+				var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3, var4));
+				var38 = 1.0F;
 				var5.setColorOpaque_F(var15 * var38 * var7, var15 * var38 * var8, var15 * var38 * var9);
 				var5.addVertexWithUV((double)(var2 + 0), (double)((float)var3 + var24), (double)(var4 + 0), var32 - (double)var37 - (double)var36, var34 - (double)var37 + (double)var36);
 				var5.addVertexWithUV((double)(var2 + 0), (double)((float)var3 + var25), (double)(var4 + 1), var32 - (double)var37 + (double)var36, var34 + (double)var37 + (double)var36);
@@ -1529,7 +1539,8 @@
 			}
 
 			if(this.renderAllFaces || var11) {
-				float var52 = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
+				var5.func_35835_b(var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4));
+				float var52 = 1.0F;
 				var5.setColorOpaque_F(var14 * var52, var14 * var52, var14 * var52);
 				this.renderBottomFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTextureFromSide(0));
 				var13 = true;
@@ -1597,7 +1608,8 @@
 					double var45 = (double)(((float)var55 + (1.0F - var35) * 16.0F) / 256.0F);
 					double var47 = (double)(((float)var55 + (1.0F - var36) * 16.0F) / 256.0F);
 					double var49 = ((double)(var55 + 16) - 0.01D) / 256.0D;
-					float var51 = var1.getBlockBrightness(this.blockAccess, var53, var3, var31);
+					var5.func_35835_b(var1.func_35275_c(this.blockAccess, var53, var3, var31));
+					float var51 = 1.0F;
 					if(var28 < 2) {
 						var51 *= var16;
 					} else {
@@ -1657,43 +1669,44 @@
 		float var9 = 0.6F;
 		Tessellator var10 = Tessellator.instance;
 		var10.startDrawingQuads();
-		float var11 = var1.getBlockBrightness(var2, var3, var4, var5);
-		float var12 = var1.getBlockBrightness(var2, var3, var4 - 1, var5);
+		var10.func_35835_b(var1.func_35275_c(var2, var3, var4, var5));
+		float var11 = 1.0F;
+		float var12 = 1.0F;
 		if(var12 < var11) {
 			var12 = var11;
 		}
 
 		var10.setColorOpaque_F(var6 * var12, var6 * var12, var6 * var12);
 		this.renderBottomFace(var1, -0.5D, -0.5D, -0.5D, var1.getBlockTextureFromSide(0));
-		var12 = var1.getBlockBrightness(var2, var3, var4 + 1, var5);
+		var12 = 1.0F;
 		if(var12 < var11) {
 			var12 = var11;
 		}
 
 		var10.setColorOpaque_F(var7 * var12, var7 * var12, var7 * var12);
 		this.renderTopFace(var1, -0.5D, -0.5D, -0.5D, var1.getBlockTextureFromSide(1));
-		var12 = var1.getBlockBrightness(var2, var3, var4, var5 - 1);
+		var12 = 1.0F;
 		if(var12 < var11) {
 			var12 = var11;
 		}
 
 		var10.setColorOpaque_F(var8 * var12, var8 * var12, var8 * var12);
 		this.renderEastFace(var1, -0.5D, -0.5D, -0.5D, var1.getBlockTextureFromSide(2));
-		var12 = var1.getBlockBrightness(var2, var3, var4, var5 + 1);
+		var12 = 1.0F;
 		if(var12 < var11) {
 			var12 = var11;
 		}
 
 		var10.setColorOpaque_F(var8 * var12, var8 * var12, var8 * var12);
 		this.renderWestFace(var1, -0.5D, -0.5D, -0.5D, var1.getBlockTextureFromSide(3));
-		var12 = var1.getBlockBrightness(var2, var3 - 1, var4, var5);
+		var12 = 1.0F;
 		if(var12 < var11) {
 			var12 = var11;
 		}
 
 		var10.setColorOpaque_F(var9 * var12, var9 * var12, var9 * var12);
 		this.renderNorthFace(var1, -0.5D, -0.5D, -0.5D, var1.getBlockTextureFromSide(4));
-		var12 = var1.getBlockBrightness(var2, var3 + 1, var4, var5);
+		var12 = 1.0F;
 		if(var12 < var11) {
 			var12 = var11;
 		}
@@ -1733,13 +1746,21 @@
 		boolean var16 = true;
 		boolean var17 = true;
 		boolean var18 = true;
-		this.lightValueOwn = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		this.aoLightValueXNeg = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-		this.aoLightValueYNeg = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-		this.aoLightValueZNeg = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-		this.aoLightValueXPos = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
-		this.aoLightValueYPos = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
-		this.aoLightValueZPos = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
+		this.lightValueOwn = var1.func_35276_e(this.blockAccess, var2, var3, var4);
+		this.aoLightValueXNeg = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4);
+		this.aoLightValueYNeg = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4);
+		this.aoLightValueZNeg = var1.func_35276_e(this.blockAccess, var2, var3, var4 - 1);
+		this.aoLightValueXPos = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4);
+		this.aoLightValueYPos = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4);
+		this.aoLightValueZPos = var1.func_35276_e(this.blockAccess, var2, var3, var4 + 1);
+		int var19 = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4);
+		int var20 = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4);
+		int var21 = var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1);
+		int var22 = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4);
+		int var23 = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4);
+		int var24 = var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1);
+		Tessellator var25 = Tessellator.instance;
+		var25.func_35835_b(983055);
 		this.field_22338_U = Block.canBlockGrass[this.blockAccess.getBlockId(var2 + 1, var3 + 1, var4)];
 		this.field_22359_ac = Block.canBlockGrass[this.blockAccess.getBlockId(var2 + 1, var3 - 1, var4)];
 		this.field_22334_Y = Block.canBlockGrass[this.blockAccess.getBlockId(var2 + 1, var3, var4 + 1)];
@@ -1774,34 +1795,47 @@
 				var11 = var12;
 				var10 = var12;
 				var9 = var12;
+				this.field_35943_ak = this.field_35944_al = this.field_35947_am = this.field_35948_an = this.field_35935_Q;
 			} else {
 				--var3;
-				this.field_22376_n = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-				this.field_22374_p = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-				this.field_22373_q = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
-				this.field_22371_s = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
+				this.field_35935_Q = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4);
+				this.field_35937_S = var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1);
+				this.field_35932_T = var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1);
+				this.field_35934_V = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4);
+				this.field_22376_n = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4);
+				this.field_22374_p = var1.func_35276_e(this.blockAccess, var2, var3, var4 - 1);
+				this.field_22373_q = var1.func_35276_e(this.blockAccess, var2, var3, var4 + 1);
+				this.field_22371_s = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4);
 				if(!this.field_22361_ab && !this.field_22357_ad) {
 					this.field_22377_m = this.field_22376_n;
+					this.field_35936_P = this.field_35935_Q;
 				} else {
-					this.field_22377_m = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4 - 1);
+					this.field_22377_m = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4 - 1);
+					this.field_35936_P = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4 - 1);
 				}
 
 				if(!this.field_22355_ae && !this.field_22357_ad) {
 					this.field_22375_o = this.field_22376_n;
+					this.field_35938_R = this.field_35935_Q;
 				} else {
-					this.field_22375_o = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4 + 1);
+					this.field_22375_o = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4 + 1);
+					this.field_35938_R = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4 + 1);
 				}
 
 				if(!this.field_22361_ab && !this.field_22359_ac) {
 					this.field_22372_r = this.field_22371_s;
+					this.field_35931_U = this.field_35934_V;
 				} else {
-					this.field_22372_r = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4 - 1);
+					this.field_22372_r = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4 - 1);
+					this.field_35931_U = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4 - 1);
 				}
 
 				if(!this.field_22355_ae && !this.field_22359_ac) {
 					this.field_22370_t = this.field_22371_s;
+					this.field_35933_W = this.field_35934_V;
 				} else {
-					this.field_22370_t = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4 + 1);
+					this.field_22370_t = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4 + 1);
+					this.field_35933_W = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4 + 1);
 				}
 
 				++var3;
@@ -1809,6 +1843,10 @@
 				var12 = (this.field_22373_q + this.aoLightValueYNeg + this.field_22370_t + this.field_22371_s) / 4.0F;
 				var11 = (this.aoLightValueYNeg + this.field_22374_p + this.field_22371_s + this.field_22372_r) / 4.0F;
 				var10 = (this.field_22376_n + this.field_22377_m + this.aoLightValueYNeg + this.field_22374_p) / 4.0F;
+				this.field_35943_ak = this.func_35924_c(this.field_35938_R, this.field_35935_Q, this.field_35932_T, var20);
+				this.field_35948_an = this.func_35924_c(this.field_35932_T, this.field_35933_W, this.field_35934_V, var20);
+				this.field_35947_am = this.func_35924_c(this.field_35937_S, this.field_35934_V, this.field_35931_U, var20);
+				this.field_35944_al = this.func_35924_c(this.field_35935_Q, this.field_35936_P, this.field_35937_S, var20);
 			}
 
 			this.colorRedTopLeft = this.colorRedBottomLeft = this.colorRedBottomRight = this.colorRedTopRight = (var13 ? var5 : 1.0F) * 0.5F;
@@ -1836,34 +1874,47 @@
 				var11 = var12;
 				var10 = var12;
 				var9 = var12;
+				this.field_35943_ak = this.field_35944_al = this.field_35947_am = this.field_35948_an = var23;
 			} else {
 				++var3;
-				this.field_22368_v = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-				this.field_22364_z = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
-				this.field_22366_x = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-				this.field_22362_A = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
+				this.field_35939_Y = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4);
+				this.field_35949_ac = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4);
+				this.field_35951_aa = var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1);
+				this.field_35950_ad = var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1);
+				this.field_22368_v = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4);
+				this.field_22364_z = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4);
+				this.field_22366_x = var1.func_35276_e(this.blockAccess, var2, var3, var4 - 1);
+				this.field_22362_A = var1.func_35276_e(this.blockAccess, var2, var3, var4 + 1);
 				if(!this.field_22339_T && !this.field_22337_V) {
 					this.field_22369_u = this.field_22368_v;
+					this.field_35940_X = this.field_35939_Y;
 				} else {
-					this.field_22369_u = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4 - 1);
+					this.field_22369_u = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4 - 1);
+					this.field_35940_X = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4 - 1);
 				}
 
 				if(!this.field_22339_T && !this.field_22338_U) {
 					this.field_22365_y = this.field_22364_z;
+					this.field_35952_ab = this.field_35949_ac;
 				} else {
-					this.field_22365_y = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4 - 1);
+					this.field_22365_y = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4 - 1);
+					this.field_35952_ab = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4 - 1);
 				}
 
 				if(!this.field_22336_W && !this.field_22337_V) {
 					this.field_22367_w = this.field_22368_v;
+					this.field_35941_Z = this.field_35939_Y;
 				} else {
-					this.field_22367_w = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4 + 1);
+					this.field_22367_w = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4 + 1);
+					this.field_35941_Z = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4 + 1);
 				}
 
 				if(!this.field_22336_W && !this.field_22338_U) {
 					this.field_22360_B = this.field_22364_z;
+					this.field_35955_ae = this.field_35949_ac;
 				} else {
-					this.field_22360_B = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4 + 1);
+					this.field_22360_B = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4 + 1);
+					this.field_35955_ae = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4 + 1);
 				}
 
 				--var3;
@@ -1871,6 +1922,10 @@
 				var9 = (this.field_22362_A + this.aoLightValueYPos + this.field_22360_B + this.field_22364_z) / 4.0F;
 				var10 = (this.aoLightValueYPos + this.field_22366_x + this.field_22364_z + this.field_22365_y) / 4.0F;
 				var11 = (this.field_22368_v + this.field_22369_u + this.aoLightValueYPos + this.field_22366_x) / 4.0F;
+				this.field_35948_an = this.func_35924_c(this.field_35941_Z, this.field_35939_Y, this.field_35950_ad, var23);
+				this.field_35943_ak = this.func_35924_c(this.field_35950_ad, this.field_35955_ae, this.field_35949_ac, var23);
+				this.field_35944_al = this.func_35924_c(this.field_35951_aa, this.field_35949_ac, this.field_35952_ab, var23);
+				this.field_35947_am = this.func_35924_c(this.field_35939_Y, this.field_35940_X, this.field_35951_aa, var23);
 			}
 
 			this.colorRedTopLeft = this.colorRedBottomLeft = this.colorRedBottomRight = this.colorRedTopRight = var14 ? var5 : 1.0F;
@@ -1892,41 +1947,54 @@
 			var8 = true;
 		}
 
-		int var19;
+		int var26;
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3, var4 - 1, 2)) {
 			if(this.field_22352_G <= 0) {
 				var12 = this.aoLightValueZNeg;
 				var11 = var12;
 				var10 = var12;
 				var9 = var12;
+				this.field_35943_ak = this.field_35944_al = this.field_35947_am = this.field_35948_an = var21;
 			} else {
 				--var4;
-				this.field_22358_C = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-				this.field_22374_p = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-				this.field_22366_x = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
-				this.field_22356_D = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
+				this.field_22358_C = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4);
+				this.field_22374_p = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4);
+				this.field_22366_x = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4);
+				this.field_22356_D = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4);
+				this.field_35956_af = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4);
+				this.field_35937_S = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4);
+				this.field_35951_aa = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4);
+				this.field_35953_ag = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4);
 				if(!this.field_22335_X && !this.field_22361_ab) {
 					this.field_22377_m = this.field_22358_C;
+					this.field_35936_P = this.field_35956_af;
 				} else {
-					this.field_22377_m = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3 - 1, var4);
+					this.field_22377_m = var1.func_35276_e(this.blockAccess, var2 - 1, var3 - 1, var4);
+					this.field_35936_P = var1.func_35275_c(this.blockAccess, var2 - 1, var3 - 1, var4);
 				}
 
 				if(!this.field_22335_X && !this.field_22339_T) {
 					this.field_22369_u = this.field_22358_C;
+					this.field_35940_X = this.field_35956_af;
 				} else {
-					this.field_22369_u = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3 + 1, var4);
+					this.field_22369_u = var1.func_35276_e(this.blockAccess, var2 - 1, var3 + 1, var4);
+					this.field_35940_X = var1.func_35275_c(this.blockAccess, var2 - 1, var3 + 1, var4);
 				}
 
 				if(!this.field_22363_aa && !this.field_22361_ab) {
 					this.field_22372_r = this.field_22356_D;
+					this.field_35931_U = this.field_35953_ag;
 				} else {
-					this.field_22372_r = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3 - 1, var4);
+					this.field_22372_r = var1.func_35276_e(this.blockAccess, var2 + 1, var3 - 1, var4);
+					this.field_35931_U = var1.func_35275_c(this.blockAccess, var2 + 1, var3 - 1, var4);
 				}
 
 				if(!this.field_22363_aa && !this.field_22339_T) {
 					this.field_22365_y = this.field_22356_D;
+					this.field_35952_ab = this.field_35953_ag;
 				} else {
-					this.field_22365_y = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3 + 1, var4);
+					this.field_22365_y = var1.func_35276_e(this.blockAccess, var2 + 1, var3 + 1, var4);
+					this.field_35952_ab = var1.func_35275_c(this.blockAccess, var2 + 1, var3 + 1, var4);
 				}
 
 				++var4;
@@ -1934,6 +2002,10 @@
 				var10 = (this.aoLightValueZNeg + this.field_22366_x + this.field_22356_D + this.field_22365_y) / 4.0F;
 				var11 = (this.field_22374_p + this.aoLightValueZNeg + this.field_22372_r + this.field_22356_D) / 4.0F;
 				var12 = (this.field_22377_m + this.field_22358_C + this.field_22374_p + this.aoLightValueZNeg) / 4.0F;
+				this.field_35943_ak = this.func_35924_c(this.field_35956_af, this.field_35940_X, this.field_35951_aa, var21);
+				this.field_35944_al = this.func_35924_c(this.field_35951_aa, this.field_35953_ag, this.field_35952_ab, var21);
+				this.field_35947_am = this.func_35924_c(this.field_35937_S, this.field_35931_U, this.field_35953_ag, var21);
+				this.field_35948_an = this.func_35924_c(this.field_35936_P, this.field_35956_af, this.field_35937_S, var21);
 			}
 
 			this.colorRedTopLeft = this.colorRedBottomLeft = this.colorRedBottomRight = this.colorRedTopRight = (var15 ? var5 : 1.0F) * 0.8F;
@@ -1951,9 +2023,9 @@
 			this.colorRedTopRight *= var12;
 			this.colorGreenTopRight *= var12;
 			this.colorBlueTopRight *= var12;
-			var19 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 2);
-			this.renderEastFace(var1, (double)var2, (double)var3, (double)var4, var19);
-			if(fancyGrass && var19 == 3 && this.overrideBlockTexture < 0) {
+			var26 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 2);
+			this.renderEastFace(var1, (double)var2, (double)var3, (double)var4, var26);
+			if(fancyGrass && var26 == 3 && this.overrideBlockTexture < 0) {
 				this.colorRedTopLeft *= var5;
 				this.colorRedBottomLeft *= var5;
 				this.colorRedBottomRight *= var5;
@@ -1978,34 +2050,47 @@
 				var11 = var12;
 				var10 = var12;
 				var9 = var12;
+				this.field_35943_ak = this.field_35944_al = this.field_35947_am = this.field_35948_an = var24;
 			} else {
 				++var4;
-				this.field_22354_E = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-				this.field_22353_F = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
-				this.field_22373_q = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-				this.field_22362_A = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
+				this.field_22354_E = var1.func_35276_e(this.blockAccess, var2 - 1, var3, var4);
+				this.field_22353_F = var1.func_35276_e(this.blockAccess, var2 + 1, var3, var4);
+				this.field_22373_q = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4);
+				this.field_22362_A = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4);
+				this.field_35954_ah = var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4);
+				this.field_35945_ai = var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4);
+				this.field_35932_T = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4);
+				this.field_35950_ad = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4);
 				if(!this.field_22333_Z && !this.field_22355_ae) {
 					this.field_22375_o = this.field_22354_E;
+					this.field_35938_R = this.field_35954_ah;
 				} else {
-					this.field_22375_o = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3 - 1, var4);
+					this.field_22375_o = var1.func_35276_e(this.blockAccess, var2 - 1, var3 - 1, var4);
+					this.field_35938_R = var1.func_35275_c(this.blockAccess, var2 - 1, var3 - 1, var4);
 				}
 
 				if(!this.field_22333_Z && !this.field_22336_W) {
 					this.field_22367_w = this.field_22354_E;
+					this.field_35941_Z = this.field_35954_ah;
 				} else {
-					this.field_22367_w = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3 + 1, var4);
+					this.field_22367_w = var1.func_35276_e(this.blockAccess, var2 - 1, var3 + 1, var4);
+					this.field_35941_Z = var1.func_35275_c(this.blockAccess, var2 - 1, var3 + 1, var4);
 				}
 
 				if(!this.field_22334_Y && !this.field_22355_ae) {
 					this.field_22370_t = this.field_22353_F;
+					this.field_35933_W = this.field_35945_ai;
 				} else {
-					this.field_22370_t = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3 - 1, var4);
+					this.field_22370_t = var1.func_35276_e(this.blockAccess, var2 + 1, var3 - 1, var4);
+					this.field_35933_W = var1.func_35275_c(this.blockAccess, var2 + 1, var3 - 1, var4);
 				}
 
 				if(!this.field_22334_Y && !this.field_22336_W) {
 					this.field_22360_B = this.field_22353_F;
+					this.field_35955_ae = this.field_35945_ai;
 				} else {
-					this.field_22360_B = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3 + 1, var4);
+					this.field_22360_B = var1.func_35276_e(this.blockAccess, var2 + 1, var3 + 1, var4);
+					this.field_35955_ae = var1.func_35275_c(this.blockAccess, var2 + 1, var3 + 1, var4);
 				}
 
 				--var4;
@@ -2013,6 +2098,10 @@
 				var12 = (this.aoLightValueZPos + this.field_22362_A + this.field_22353_F + this.field_22360_B) / 4.0F;
 				var11 = (this.field_22373_q + this.aoLightValueZPos + this.field_22370_t + this.field_22353_F) / 4.0F;
 				var10 = (this.field_22375_o + this.field_22354_E + this.field_22373_q + this.aoLightValueZPos) / 4.0F;
+				this.field_35943_ak = this.func_35924_c(this.field_35954_ah, this.field_35941_Z, this.field_35950_ad, var24);
+				this.field_35948_an = this.func_35924_c(this.field_35950_ad, this.field_35945_ai, this.field_35955_ae, var24);
+				this.field_35947_am = this.func_35924_c(this.field_35932_T, this.field_35933_W, this.field_35945_ai, var24);
+				this.field_35944_al = this.func_35924_c(this.field_35938_R, this.field_35954_ah, this.field_35932_T, var24);
 			}
 
 			this.colorRedTopLeft = this.colorRedBottomLeft = this.colorRedBottomRight = this.colorRedTopRight = (var16 ? var5 : 1.0F) * 0.8F;
@@ -2030,9 +2119,9 @@
 			this.colorRedTopRight *= var12;
 			this.colorGreenTopRight *= var12;
 			this.colorBlueTopRight *= var12;
-			var19 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 3);
+			var26 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 3);
 			this.renderWestFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 3));
-			if(fancyGrass && var19 == 3 && this.overrideBlockTexture < 0) {
+			if(fancyGrass && var26 == 3 && this.overrideBlockTexture < 0) {
 				this.colorRedTopLeft *= var5;
 				this.colorRedBottomLeft *= var5;
 				this.colorRedBottomRight *= var5;
@@ -2057,34 +2146,47 @@
 				var11 = var12;
 				var10 = var12;
 				var9 = var12;
+				this.field_35943_ak = this.field_35944_al = this.field_35947_am = this.field_35948_an = var19;
 			} else {
 				--var2;
-				this.field_22376_n = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-				this.field_22358_C = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-				this.field_22354_E = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
-				this.field_22368_v = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
+				this.field_22376_n = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4);
+				this.field_22358_C = var1.func_35276_e(this.blockAccess, var2, var3, var4 - 1);
+				this.field_22354_E = var1.func_35276_e(this.blockAccess, var2, var3, var4 + 1);
+				this.field_22368_v = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4);
+				this.field_35935_Q = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4);
+				this.field_35956_af = var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1);
+				this.field_35954_ah = var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1);
+				this.field_35939_Y = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4);
 				if(!this.field_22335_X && !this.field_22357_ad) {
 					this.field_22377_m = this.field_22358_C;
+					this.field_35936_P = this.field_35956_af;
 				} else {
-					this.field_22377_m = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4 - 1);
+					this.field_22377_m = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4 - 1);
+					this.field_35936_P = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4 - 1);
 				}
 
 				if(!this.field_22333_Z && !this.field_22357_ad) {
 					this.field_22375_o = this.field_22354_E;
+					this.field_35938_R = this.field_35954_ah;
 				} else {
-					this.field_22375_o = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4 + 1);
+					this.field_22375_o = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4 + 1);
+					this.field_35938_R = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4 + 1);
 				}
 
 				if(!this.field_22335_X && !this.field_22337_V) {
 					this.field_22369_u = this.field_22358_C;
+					this.field_35940_X = this.field_35956_af;
 				} else {
-					this.field_22369_u = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4 - 1);
+					this.field_22369_u = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4 - 1);
+					this.field_35940_X = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4 - 1);
 				}
 
 				if(!this.field_22333_Z && !this.field_22337_V) {
 					this.field_22367_w = this.field_22354_E;
+					this.field_35941_Z = this.field_35954_ah;
 				} else {
-					this.field_22367_w = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4 + 1);
+					this.field_22367_w = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4 + 1);
+					this.field_35941_Z = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4 + 1);
 				}
 
 				++var2;
@@ -2092,6 +2194,10 @@
 				var9 = (this.aoLightValueXNeg + this.field_22354_E + this.field_22368_v + this.field_22367_w) / 4.0F;
 				var10 = (this.field_22358_C + this.aoLightValueXNeg + this.field_22369_u + this.field_22368_v) / 4.0F;
 				var11 = (this.field_22377_m + this.field_22376_n + this.field_22358_C + this.aoLightValueXNeg) / 4.0F;
+				this.field_35948_an = this.func_35924_c(this.field_35935_Q, this.field_35938_R, this.field_35954_ah, var19);
+				this.field_35943_ak = this.func_35924_c(this.field_35954_ah, this.field_35939_Y, this.field_35941_Z, var19);
+				this.field_35944_al = this.func_35924_c(this.field_35956_af, this.field_35940_X, this.field_35939_Y, var19);
+				this.field_35947_am = this.func_35924_c(this.field_35936_P, this.field_35935_Q, this.field_35956_af, var19);
 			}
 
 			this.colorRedTopLeft = this.colorRedBottomLeft = this.colorRedBottomRight = this.colorRedTopRight = (var17 ? var5 : 1.0F) * 0.6F;
@@ -2109,9 +2215,9 @@
 			this.colorRedTopRight *= var12;
 			this.colorGreenTopRight *= var12;
 			this.colorBlueTopRight *= var12;
-			var19 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 4);
-			this.renderNorthFace(var1, (double)var2, (double)var3, (double)var4, var19);
-			if(fancyGrass && var19 == 3 && this.overrideBlockTexture < 0) {
+			var26 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 4);
+			this.renderNorthFace(var1, (double)var2, (double)var3, (double)var4, var26);
+			if(fancyGrass && var26 == 3 && this.overrideBlockTexture < 0) {
 				this.colorRedTopLeft *= var5;
 				this.colorRedBottomLeft *= var5;
 				this.colorRedBottomRight *= var5;
@@ -2136,34 +2242,47 @@
 				var11 = var12;
 				var10 = var12;
 				var9 = var12;
+				this.field_35943_ak = this.field_35944_al = this.field_35947_am = this.field_35948_an = var22;
 			} else {
 				++var2;
-				this.field_22371_s = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-				this.field_22356_D = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-				this.field_22353_F = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
-				this.field_22364_z = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
+				this.field_22371_s = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4);
+				this.field_22356_D = var1.func_35276_e(this.blockAccess, var2, var3, var4 - 1);
+				this.field_22353_F = var1.func_35276_e(this.blockAccess, var2, var3, var4 + 1);
+				this.field_22364_z = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4);
+				this.field_35934_V = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4);
+				this.field_35953_ag = var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1);
+				this.field_35945_ai = var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1);
+				this.field_35949_ac = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4);
 				if(!this.field_22359_ac && !this.field_22363_aa) {
 					this.field_22372_r = this.field_22356_D;
+					this.field_35931_U = this.field_35953_ag;
 				} else {
-					this.field_22372_r = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4 - 1);
+					this.field_22372_r = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4 - 1);
+					this.field_35931_U = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4 - 1);
 				}
 
 				if(!this.field_22359_ac && !this.field_22334_Y) {
 					this.field_22370_t = this.field_22353_F;
+					this.field_35933_W = this.field_35945_ai;
 				} else {
-					this.field_22370_t = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4 + 1);
+					this.field_22370_t = var1.func_35276_e(this.blockAccess, var2, var3 - 1, var4 + 1);
+					this.field_35933_W = var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4 + 1);
 				}
 
 				if(!this.field_22338_U && !this.field_22363_aa) {
 					this.field_22365_y = this.field_22356_D;
+					this.field_35952_ab = this.field_35953_ag;
 				} else {
-					this.field_22365_y = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4 - 1);
+					this.field_22365_y = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4 - 1);
+					this.field_35952_ab = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4 - 1);
 				}
 
 				if(!this.field_22338_U && !this.field_22334_Y) {
 					this.field_22360_B = this.field_22353_F;
+					this.field_35955_ae = this.field_35945_ai;
 				} else {
-					this.field_22360_B = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4 + 1);
+					this.field_22360_B = var1.func_35276_e(this.blockAccess, var2, var3 + 1, var4 + 1);
+					this.field_35955_ae = var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4 + 1);
 				}
 
 				--var2;
@@ -2171,6 +2290,10 @@
 				var12 = (this.aoLightValueXPos + this.field_22353_F + this.field_22364_z + this.field_22360_B) / 4.0F;
 				var11 = (this.field_22356_D + this.aoLightValueXPos + this.field_22365_y + this.field_22364_z) / 4.0F;
 				var10 = (this.field_22372_r + this.field_22371_s + this.field_22356_D + this.aoLightValueXPos) / 4.0F;
+				this.field_35943_ak = this.func_35924_c(this.field_35934_V, this.field_35933_W, this.field_35945_ai, var22);
+				this.field_35948_an = this.func_35924_c(this.field_35945_ai, this.field_35949_ac, this.field_35955_ae, var22);
+				this.field_35947_am = this.func_35924_c(this.field_35953_ag, this.field_35952_ab, this.field_35949_ac, var22);
+				this.field_35944_al = this.func_35924_c(this.field_35931_U, this.field_35934_V, this.field_35953_ag, var22);
 			}
 
 			this.colorRedTopLeft = this.colorRedBottomLeft = this.colorRedBottomRight = this.colorRedTopRight = (var18 ? var5 : 1.0F) * 0.6F;
@@ -2188,9 +2311,9 @@
 			this.colorRedTopRight *= var12;
 			this.colorGreenTopRight *= var12;
 			this.colorBlueTopRight *= var12;
-			var19 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 5);
-			this.renderSouthFace(var1, (double)var2, (double)var3, (double)var4, var19);
-			if(fancyGrass && var19 == 3 && this.overrideBlockTexture < 0) {
+			var26 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 5);
+			this.renderSouthFace(var1, (double)var2, (double)var3, (double)var4, var26);
+			if(fancyGrass && var26 == 3 && this.overrideBlockTexture < 0) {
 				this.colorRedTopLeft *= var5;
 				this.colorRedBottomLeft *= var5;
 				this.colorRedBottomRight *= var5;
@@ -2213,6 +2336,27 @@
 		return var8;
 	}
 
+	private static int func_35924_c(int a, int b, int c, int d) {
+		if ((a == 0) || (b == 0) || (c == 0) || (d == 0)) {
+			final int min = minNonZero(minNonZero(a, b), minNonZero(c, d));
+			a = Math.max(a, min);
+			b = Math.max(b, min);
+			c = Math.max(c, min);
+			d = Math.max(d, min);
+		}
+
+		return ((a + b + c + d) >> 2) & 0xFF00FF;
+	}
+	private static int minNonZero(int a, int b) {
+		if (a == 0) {
+			return b;
+		} else if (b == 0) {
+			return a;
+		}
+
+		return Math.min(a, b);
+	}
+
 	public boolean renderStandardBlockWithColorMultiplier(Block var1, int var2, int var3, int var4, float var5, float var6, float var7) {
 		this.enableAO = false;
 		Tessellator var8 = Tessellator.instance;
@@ -2245,38 +2389,29 @@
 			var25 = var13 * var7;
 		}
 
-		float var26 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		float var27;
+		int var26 = var1.func_35275_c(this.blockAccess, var2, var3, var4);
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3 - 1, var4, 0)) {
-			var27 = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-			var8.setColorOpaque_F(var17 * var27, var20 * var27, var23 * var27);
+			var8.func_35835_b(var1.minY > 0.0D ? var26 : var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4));
+			var8.setColorOpaque_F(var17, var20, var23);
 			this.renderBottomFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 0));
 			var9 = true;
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3 + 1, var4, 1)) {
-			var27 = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
-			if(var1.maxY != 1.0D && !var1.blockMaterial.getIsLiquid()) {
-				var27 = var26;
-			}
-
-			var8.setColorOpaque_F(var14 * var27, var15 * var27, var16 * var27);
+			var8.func_35835_b(var1.maxY < 1.0D ? var26 : var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4));
+			var8.setColorOpaque_F(var14, var15, var16);
 			this.renderTopFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 1));
 			var9 = true;
 		}
 
 		int var28;
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3, var4 - 1, 2)) {
-			var27 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-			if(var1.minZ > 0.0D) {
-				var27 = var26;
-			}
-
-			var8.setColorOpaque_F(var18 * var27, var21 * var27, var24 * var27);
+			var8.func_35835_b(var1.minZ > 0.0D ? var26 : var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1));
+			var8.setColorOpaque_F(var18, var21, var24);
 			var28 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 2);
 			this.renderEastFace(var1, (double)var2, (double)var3, (double)var4, var28);
 			if(fancyGrass && var28 == 3 && this.overrideBlockTexture < 0) {
-				var8.setColorOpaque_F(var18 * var27 * var5, var21 * var27 * var6, var24 * var27 * var7);
+				var8.setColorOpaque_F(var18 * var5, var21 * var6, var24 * var7);
 				this.renderEastFace(var1, (double)var2, (double)var3, (double)var4, 38);
 			}
 
@@ -2284,16 +2419,12 @@
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3, var4 + 1, 3)) {
-			var27 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
-			if(var1.maxZ < 1.0D) {
-				var27 = var26;
-			}
-
-			var8.setColorOpaque_F(var18 * var27, var21 * var27, var24 * var27);
+			var8.func_35835_b(var1.maxZ < 1.0D ? var26 : var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1));
+			var8.setColorOpaque_F(var18, var21, var24);
 			var28 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 3);
 			this.renderWestFace(var1, (double)var2, (double)var3, (double)var4, var28);
 			if(fancyGrass && var28 == 3 && this.overrideBlockTexture < 0) {
-				var8.setColorOpaque_F(var18 * var27 * var5, var21 * var27 * var6, var24 * var27 * var7);
+				var8.setColorOpaque_F(var18 * var5, var21 * var6, var24 * var7);
 				this.renderWestFace(var1, (double)var2, (double)var3, (double)var4, 38);
 			}
 
@@ -2301,16 +2432,12 @@
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2 - 1, var3, var4, 4)) {
-			var27 = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-			if(var1.minX > 0.0D) {
-				var27 = var26;
-			}
-
-			var8.setColorOpaque_F(var19 * var27, var22 * var27, var25 * var27);
+			var8.func_35835_b(var1.minX > 0.0D ? var26 : var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4));
+			var8.setColorOpaque_F(var19, var22, var25);
 			var28 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 4);
 			this.renderNorthFace(var1, (double)var2, (double)var3, (double)var4, var28);
 			if(fancyGrass && var28 == 3 && this.overrideBlockTexture < 0) {
-				var8.setColorOpaque_F(var19 * var27 * var5, var22 * var27 * var6, var25 * var27 * var7);
+				var8.setColorOpaque_F(var19 * var5, var22 * var6, var25 * var7);
 				this.renderNorthFace(var1, (double)var2, (double)var3, (double)var4, 38);
 			}
 
@@ -2318,16 +2445,12 @@
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2 + 1, var3, var4, 5)) {
-			var27 = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
-			if(var1.maxX < 1.0D) {
-				var27 = var26;
-			}
-
-			var8.setColorOpaque_F(var19 * var27, var22 * var27, var25 * var27);
+			var8.func_35835_b(var1.maxX < 1.0D ? var26 : var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4));
+			var8.setColorOpaque_F(var19, var22, var25);
 			var28 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 5);
 			this.renderSouthFace(var1, (double)var2, (double)var3, (double)var4, var28);
 			if(fancyGrass && var28 == 3 && this.overrideBlockTexture < 0) {
-				var8.setColorOpaque_F(var19 * var27 * var5, var22 * var27 * var6, var25 * var27 * var7);
+				var8.setColorOpaque_F(var19 * var5, var22 * var6, var25 * var7);
 				this.renderSouthFace(var1, (double)var2, (double)var3, (double)var4, 38);
 			}
 
@@ -2374,33 +2497,24 @@
 		float var24 = var12 * var7;
 		float var25 = var13 * var7;
 		float var26 = 1.0F / 16.0F;
-		float var27 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		float var28;
+		int var28 = var1.func_35275_c(this.blockAccess, var2, var3, var4);
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3 - 1, var4, 0)) {
-			var28 = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-			var8.setColorOpaque_F(var14 * var28, var18 * var28, var22 * var28);
+			var8.func_35835_b(var1.minY > 0.0D ? var28 : var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4));
+			var8.setColorOpaque_F(var14, var18, var22);
 			this.renderBottomFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 0));
 			var9 = true;
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3 + 1, var4, 1)) {
-			var28 = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
-			if(var1.maxY != 1.0D && !var1.blockMaterial.getIsLiquid()) {
-				var28 = var27;
-			}
-
-			var8.setColorOpaque_F(var15 * var28, var19 * var28, var23 * var28);
+			var8.func_35835_b(var1.maxY < 1.0D ? var28 : var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4));
+			var8.setColorOpaque_F(var15, var19, var23);
 			this.renderTopFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 1));
 			var9 = true;
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3, var4 - 1, 2)) {
-			var28 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-			if(var1.minZ > 0.0D) {
-				var28 = var27;
-			}
-
-			var8.setColorOpaque_F(var16 * var28, var20 * var28, var24 * var28);
+			var8.func_35835_b(var1.minZ > 0.0D ? var28 : var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1));
+			var8.setColorOpaque_F(var16, var20, var24);
 			var8.setTranslationF(0.0F, 0.0F, var26);
 			this.renderEastFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 2));
 			var8.setTranslationF(0.0F, 0.0F, -var26);
@@ -2408,12 +2522,8 @@
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2, var3, var4 + 1, 3)) {
-			var28 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
-			if(var1.maxZ < 1.0D) {
-				var28 = var27;
-			}
-
-			var8.setColorOpaque_F(var16 * var28, var20 * var28, var24 * var28);
+			var8.func_35835_b(var1.maxZ < 1.0D ? var28 : var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1));
+			var8.setColorOpaque_F(var16, var20, var24);
 			var8.setTranslationF(0.0F, 0.0F, -var26);
 			this.renderWestFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 3));
 			var8.setTranslationF(0.0F, 0.0F, var26);
@@ -2421,12 +2531,8 @@
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2 - 1, var3, var4, 4)) {
-			var28 = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-			if(var1.minX > 0.0D) {
-				var28 = var27;
-			}
-
-			var8.setColorOpaque_F(var17 * var28, var21 * var28, var25 * var28);
+			var8.func_35835_b(var1.minX > 0.0D ? var28 : var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4));
+			var8.setColorOpaque_F(var17, var21, var25);
 			var8.setTranslationF(var26, 0.0F, 0.0F);
 			this.renderNorthFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 4));
 			var8.setTranslationF(-var26, 0.0F, 0.0F);
@@ -2434,12 +2540,8 @@
 		}
 
 		if(this.renderAllFaces || var1.shouldSideBeRendered(this.blockAccess, var2 + 1, var3, var4, 5)) {
-			var28 = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
-			if(var1.maxX < 1.0D) {
-				var28 = var27;
-			}
-
-			var8.setColorOpaque_F(var17 * var28, var21 * var28, var25 * var28);
+			var8.func_35835_b(var1.maxX < 1.0D ? var28 : var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4));
+			var8.setColorOpaque_F(var17, var21, var25);
 			var8.setTranslationF(-var26, 0.0F, 0.0F);
 			this.renderSouthFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 5));
 			var8.setTranslationF(var26, 0.0F, 0.0F);
@@ -2553,41 +2655,17 @@
 		float var9 = 1.0F;
 		float var10 = 0.8F;
 		float var11 = 0.6F;
-		float var12 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4);
-		float var13 = var1.getBlockBrightness(this.blockAccess, var2, var3 - 1, var4);
-		if(var6.minY > 0.0D) {
-			var13 = var12;
-		}
-
-		if(Block.lightValue[var1.blockID] > 0) {
-			var13 = 1.0F;
-		}
-
-		var5.setColorOpaque_F(var8 * var13, var8 * var13, var8 * var13);
+		int var12 = var1.func_35275_c(this.blockAccess, var2, var3, var4);
+		var5.func_35835_b(var1.minY > 0.0D ? var12 : var1.func_35275_c(this.blockAccess, var2, var3 - 1, var4));
+		var5.setColorOpaque_F(var8, var8, var8);
 		this.renderBottomFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 0));
 		var7 = true;
-		var13 = var1.getBlockBrightness(this.blockAccess, var2, var3 + 1, var4);
-		if(var6.maxY < 1.0D) {
-			var13 = var12;
-		}
-
-		if(Block.lightValue[var1.blockID] > 0) {
-			var13 = 1.0F;
-		}
-
-		var5.setColorOpaque_F(var9 * var13, var9 * var13, var9 * var13);
+		var5.func_35835_b(var1.maxY < 1.0D ? var12 : var1.func_35275_c(this.blockAccess, var2, var3 + 1, var4));
+		var5.setColorOpaque_F(var9, var9, var9);
 		this.renderTopFace(var1, (double)var2, (double)var3, (double)var4, var1.getBlockTexture(this.blockAccess, var2, var3, var4, 1));
 		var7 = true;
-		var13 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 - 1);
-		if(var6.minZ > 0.0D) {
-			var13 = var12;
-		}
-
-		if(Block.lightValue[var1.blockID] > 0) {
-			var13 = 1.0F;
-		}
-
-		var5.setColorOpaque_F(var10 * var13, var10 * var13, var10 * var13);
+		var5.func_35835_b(var1.minZ > 0.0D ? var12 : var1.func_35275_c(this.blockAccess, var2, var3, var4 - 1));
+		var5.setColorOpaque_F(var10, var10, var10);
 		int var14 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 2);
 		if(var14 < 0) {
 			this.flipTexture = true;
@@ -2597,16 +2675,8 @@
 		this.renderEastFace(var1, (double)var2, (double)var3, (double)var4, var14);
 		var7 = true;
 		this.flipTexture = false;
-		var13 = var1.getBlockBrightness(this.blockAccess, var2, var3, var4 + 1);
-		if(var6.maxZ < 1.0D) {
-			var13 = var12;
-		}
-
-		if(Block.lightValue[var1.blockID] > 0) {
-			var13 = 1.0F;
-		}
-
-		var5.setColorOpaque_F(var10 * var13, var10 * var13, var10 * var13);
+		var5.func_35835_b(var1.maxZ < 1.0D ? var12 : var1.func_35275_c(this.blockAccess, var2, var3, var4 + 1));
+		var5.setColorOpaque_F(var10, var10, var10);
 		var14 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 3);
 		if(var14 < 0) {
 			this.flipTexture = true;
@@ -2616,16 +2686,8 @@
 		this.renderWestFace(var1, (double)var2, (double)var3, (double)var4, var14);
 		var7 = true;
 		this.flipTexture = false;
-		var13 = var1.getBlockBrightness(this.blockAccess, var2 - 1, var3, var4);
-		if(var6.minX > 0.0D) {
-			var13 = var12;
-		}
-
-		if(Block.lightValue[var1.blockID] > 0) {
-			var13 = 1.0F;
-		}
-
-		var5.setColorOpaque_F(var11 * var13, var11 * var13, var11 * var13);
+		var5.func_35835_b(var1.minX > 0.0D ? var12 : var1.func_35275_c(this.blockAccess, var2 - 1, var3, var4));
+		var5.setColorOpaque_F(var11, var11, var11);
 		var14 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 4);
 		if(var14 < 0) {
 			this.flipTexture = true;
@@ -2635,16 +2697,8 @@
 		this.renderNorthFace(var1, (double)var2, (double)var3, (double)var4, var14);
 		var7 = true;
 		this.flipTexture = false;
-		var13 = var1.getBlockBrightness(this.blockAccess, var2 + 1, var3, var4);
-		if(var6.maxX < 1.0D) {
-			var13 = var12;
-		}
-
-		if(Block.lightValue[var1.blockID] > 0) {
-			var13 = 1.0F;
-		}
-
-		var5.setColorOpaque_F(var11 * var13, var11 * var13, var11 * var13);
+		var5.func_35835_b(var1.maxX < 1.0D ? var12 : var1.func_35275_c(this.blockAccess, var2 + 1, var3, var4));
+		var5.setColorOpaque_F(var11, var11, var11);
 		var14 = var1.getBlockTexture(this.blockAccess, var2, var3, var4, 5);
 		if(var14 < 0) {
 			this.flipTexture = true;
@@ -2722,14 +2776,18 @@
 		double var34 = var6 + var1.minZ;
 		double var36 = var6 + var1.maxZ;
 		if(this.enableAO) {
+			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
+			var9.func_35835_b(this.field_35948_an);
+			var9.addVertexWithUV(var30, var32, var36, var14, var18);
 			var9.setColorOpaque_F(this.colorRedTopLeft, this.colorGreenTopLeft, this.colorBlueTopLeft);
+			var9.func_35835_b(this.field_35943_ak);
 			var9.addVertexWithUV(var28, var32, var36, var22, var26);
 			var9.setColorOpaque_F(this.colorRedBottomLeft, this.colorGreenBottomLeft, this.colorBlueBottomLeft);
+			var9.func_35835_b(this.field_35944_al);
 			var9.addVertexWithUV(var28, var32, var34, var12, var16);
 			var9.setColorOpaque_F(this.colorRedBottomRight, this.colorGreenBottomRight, this.colorBlueBottomRight);
+			var9.func_35835_b(this.field_35947_am);
 			var9.addVertexWithUV(var30, var32, var34, var20, var24);
-			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
-			var9.addVertexWithUV(var30, var32, var36, var14, var18);
 		} else {
 			var9.addVertexWithUV(var28, var32, var36, var22, var26);
 			var9.addVertexWithUV(var28, var32, var34, var12, var16);
@@ -2803,15 +2861,20 @@
 		double var32 = var4 + var1.maxY;
 		double var34 = var6 + var1.minZ;
 		double var36 = var6 + var1.maxZ;
+		// The order of this changes which direction the AO faces
 		if(this.enableAO) {
+			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
+			var9.func_35835_b(this.field_35948_an);
+			var9.addVertexWithUV(var28, var32, var36, var22, var26);
 			var9.setColorOpaque_F(this.colorRedTopLeft, this.colorGreenTopLeft, this.colorBlueTopLeft);
+			var9.func_35835_b(this.field_35943_ak);
 			var9.addVertexWithUV(var30, var32, var36, var14, var18);
 			var9.setColorOpaque_F(this.colorRedBottomLeft, this.colorGreenBottomLeft, this.colorBlueBottomLeft);
+			var9.func_35835_b(this.field_35944_al);
 			var9.addVertexWithUV(var30, var32, var34, var20, var24);
 			var9.setColorOpaque_F(this.colorRedBottomRight, this.colorGreenBottomRight, this.colorBlueBottomRight);
+			var9.func_35835_b(this.field_35947_am);
 			var9.addVertexWithUV(var28, var32, var34, var12, var16);
-			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
-			var9.addVertexWithUV(var28, var32, var36, var22, var26);
 		} else {
 			var9.addVertexWithUV(var30, var32, var36, var14, var18);
 			var9.addVertexWithUV(var30, var32, var34, var20, var24);
@@ -2893,14 +2956,18 @@
 		double var34 = var4 + var1.maxY;
 		double var36 = var6 + var1.minZ;
 		if(this.enableAO) {
+			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
+			var9.func_35835_b(this.field_35948_an);
+			var9.addVertexWithUV(var28, var32, var36, var14, var18);
 			var9.setColorOpaque_F(this.colorRedTopLeft, this.colorGreenTopLeft, this.colorBlueTopLeft);
+			var9.func_35835_b(this.field_35943_ak);
 			var9.addVertexWithUV(var28, var34, var36, var20, var24);
 			var9.setColorOpaque_F(this.colorRedBottomLeft, this.colorGreenBottomLeft, this.colorBlueBottomLeft);
+			var9.func_35835_b(this.field_35944_al);
 			var9.addVertexWithUV(var30, var34, var36, var12, var16);
 			var9.setColorOpaque_F(this.colorRedBottomRight, this.colorGreenBottomRight, this.colorBlueBottomRight);
+			var9.func_35835_b(this.field_35947_am);
 			var9.addVertexWithUV(var30, var32, var36, var22, var26);
-			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
-			var9.addVertexWithUV(var28, var32, var36, var14, var18);
 		} else {
 			var9.addVertexWithUV(var28, var34, var36, var20, var24);
 			var9.addVertexWithUV(var30, var34, var36, var12, var16);
@@ -2982,14 +3049,18 @@
 		double var34 = var4 + var1.maxY;
 		double var36 = var6 + var1.maxZ;
 		if(this.enableAO) {
+			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
+			var9.func_35835_b(this.field_35948_an);
+			var9.addVertexWithUV(var30, var34, var36, var20, var24);
 			var9.setColorOpaque_F(this.colorRedTopLeft, this.colorGreenTopLeft, this.colorBlueTopLeft);
+			var9.func_35835_b(this.field_35943_ak);
 			var9.addVertexWithUV(var28, var34, var36, var12, var16);
 			var9.setColorOpaque_F(this.colorRedBottomLeft, this.colorGreenBottomLeft, this.colorBlueBottomLeft);
+			var9.func_35835_b(this.field_35944_al);
 			var9.addVertexWithUV(var28, var32, var36, var22, var26);
 			var9.setColorOpaque_F(this.colorRedBottomRight, this.colorGreenBottomRight, this.colorBlueBottomRight);
+			var9.func_35835_b(this.field_35947_am);
 			var9.addVertexWithUV(var30, var32, var36, var14, var18);
-			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
-			var9.addVertexWithUV(var30, var34, var36, var20, var24);
 		} else {
 			var9.addVertexWithUV(var28, var34, var36, var12, var16);
 			var9.addVertexWithUV(var28, var32, var36, var22, var26);
@@ -3071,14 +3142,18 @@
 		double var34 = var6 + var1.minZ;
 		double var36 = var6 + var1.maxZ;
 		if(this.enableAO) {
+			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
+			var9.func_35835_b(this.field_35948_an);
+			var9.addVertexWithUV(var28, var30, var36, var14, var18);
 			var9.setColorOpaque_F(this.colorRedTopLeft, this.colorGreenTopLeft, this.colorBlueTopLeft);
+			var9.func_35835_b(this.field_35943_ak);
 			var9.addVertexWithUV(var28, var32, var36, var20, var24);
 			var9.setColorOpaque_F(this.colorRedBottomLeft, this.colorGreenBottomLeft, this.colorBlueBottomLeft);
+			var9.func_35835_b(this.field_35944_al);
 			var9.addVertexWithUV(var28, var32, var34, var12, var16);
 			var9.setColorOpaque_F(this.colorRedBottomRight, this.colorGreenBottomRight, this.colorBlueBottomRight);
+			var9.func_35835_b(this.field_35947_am);
 			var9.addVertexWithUV(var28, var30, var34, var22, var26);
-			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
-			var9.addVertexWithUV(var28, var30, var36, var14, var18);
 		} else {
 			var9.addVertexWithUV(var28, var32, var36, var20, var24);
 			var9.addVertexWithUV(var28, var32, var34, var12, var16);
@@ -3160,14 +3235,18 @@
 		double var34 = var6 + var1.minZ;
 		double var36 = var6 + var1.maxZ;
 		if(this.enableAO) {
+			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
+			var9.func_35835_b(this.field_35948_an);
+			var9.addVertexWithUV(var28, var32, var36, var12, var16);
 			var9.setColorOpaque_F(this.colorRedTopLeft, this.colorGreenTopLeft, this.colorBlueTopLeft);
+			var9.func_35835_b(this.field_35943_ak);
 			var9.addVertexWithUV(var28, var30, var36, var22, var26);
 			var9.setColorOpaque_F(this.colorRedBottomLeft, this.colorGreenBottomLeft, this.colorBlueBottomLeft);
+			var9.func_35835_b(this.field_35944_al);
 			var9.addVertexWithUV(var28, var30, var34, var14, var18);
 			var9.setColorOpaque_F(this.colorRedBottomRight, this.colorGreenBottomRight, this.colorBlueBottomRight);
+			var9.func_35835_b(this.field_35947_am);
 			var9.addVertexWithUV(var28, var32, var34, var20, var24);
-			var9.setColorOpaque_F(this.colorRedTopRight, this.colorGreenTopRight, this.colorBlueTopRight);
-			var9.addVertexWithUV(var28, var32, var36, var12, var16);
 		} else {
 			var9.addVertexWithUV(var28, var30, var36, var22, var26);
 			var9.addVertexWithUV(var28, var30, var34, var14, var18);
@@ -3179,18 +3258,21 @@
 
 	public void renderBlockOnInventory(Block var1, int var2, float var3) {
 		Tessellator var4 = Tessellator.instance;
+		boolean var69 = var1.blockID == Block.grass.blockID;
 		int var5;
 		float var6;
 		float var7;
+		float var8;
 		if(this.field_31088_b) {
 			var5 = var1.getRenderColor(var2);
 			var6 = (float)(var5 >> 16 & 255) / 255.0F;
 			var7 = (float)(var5 >> 8 & 255) / 255.0F;
-			float var8 = (float)(var5 & 255) / 255.0F;
+			var8 = (float)(var5 & 255) / 255.0F;
 			GL11.glColor4f(var6 * var3, var7 * var3, var8 * var3, 1.0F);
 		}
 
 		var5 = var1.getRenderType();
+		int var9;
 		if(var5 != 0 && var5 != 16) {
 			if(var5 == 1) {
 				var4.startDrawingQuads();
@@ -3245,7 +3327,6 @@
 				this.renderTorchAtAngle(var1, -0.5D, -0.5D, -0.5D, 0.0D, 0.0D);
 				var4.draw();
 			} else {
-				int var9;
 				if(var5 == 10) {
 					for(var9 = 0; var9 < 2; ++var9) {
 						if(var9 == 0) {
@@ -3339,32 +3420,93 @@
 				var2 = 1;
 			}
 
-			var1.setBlockBoundsForItemRender();
-			GL11.glTranslatef(-0.5F, -0.5F, -0.5F);
-			var4.startDrawingQuads();
-			var4.setNormal(0.0F, -1.0F, 0.0F);
-			this.renderBottomFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(0, var2));
-			var4.draw();
-			var4.startDrawingQuads();
-			var4.setNormal(0.0F, 1.0F, 0.0F);
-			this.renderTopFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(1, var2));
-			var4.draw();
-			var4.startDrawingQuads();
-			var4.setNormal(0.0F, 0.0F, -1.0F);
-			this.renderEastFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(2, var2));
-			var4.draw();
-			var4.startDrawingQuads();
-			var4.setNormal(0.0F, 0.0F, 1.0F);
-			this.renderWestFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(3, var2));
-			var4.draw();
-			var4.startDrawingQuads();
-			var4.setNormal(-1.0F, 0.0F, 0.0F);
-			this.renderNorthFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(4, var2));
-			var4.draw();
-			var4.startDrawingQuads();
-			var4.setNormal(1.0F, 0.0F, 0.0F);
-			this.renderSouthFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(5, var2));
-			var4.draw();
+			if(var69 && this.field_31088_b) {
+				var7 = (float)(ColorizerGrass.getGrassColor(0.96D, 0.44D) >> 16 & 255) / 255.0F;
+				var8 = (float)(ColorizerGrass.getGrassColor(0.96D, 0.44D) >> 8 & 255) / 255.0F;
+				float var10 = (float)(ColorizerGrass.getGrassColor(0.96D, 0.44D) & 255) / 255.0F;
+				var1.setBlockBoundsForItemRender();
+				GL11.glTranslatef(-0.5F, -0.5F, -0.5F);
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, -1.0F, 0.0F);
+				this.renderBottomFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(0, var2));
+				var4.draw();
+				GL11.glColor3f(var7, var8, var10);
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, 1.0F, 0.0F);
+				this.renderTopFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(1, var2));
+				var4.draw();
+				GL11.glColor3f(1.0F, 1.0F, 1.0F);
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, 0.0F, -1.0F);
+				this.renderEastFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(2, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, 0.0F, 1.0F);
+				this.renderWestFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(3, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(-1.0F, 0.0F, 0.0F);
+				this.renderNorthFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(4, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(1.0F, 0.0F, 0.0F);
+				this.renderSouthFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(5, var2));
+				var4.draw();
+				if(fancyGrass) {
+					GL11.glColor3f(var7, var8, var10);
+					var4.startDrawingQuads();
+					var4.setNormal(0.0F, 0.0F, -1.0F);
+					this.renderEastFace(var1, 0.0D, 0.0D, 0.0D, 38);
+					var4.draw();
+					GL11.glColor3f(1.0F, 1.0F, 1.0F);
+					GL11.glColor3f(var7, var8, var10);
+					var4.startDrawingQuads();
+					var4.setNormal(0.0F, 0.0F, 1.0F);
+					this.renderWestFace(var1, 0.0D, 0.0D, 0.0D, 38);
+					var4.draw();
+					GL11.glColor3f(1.0F, 1.0F, 1.0F);
+					GL11.glColor3f(var7, var8, var10);
+					var4.startDrawingQuads();
+					var4.setNormal(-1.0F, 0.0F, 0.0F);
+					this.renderNorthFace(var1, 0.0D, 0.0D, 0.0D, 38);
+					var4.draw();
+					GL11.glColor3f(1.0F, 1.0F, 1.0F);
+					GL11.glColor3f(var7, var8, var10);
+					var4.startDrawingQuads();
+					var4.setNormal(1.0F, 0.0F, 0.0F);
+					this.renderSouthFace(var1, 0.0D, 0.0D, 0.0D, 38);
+					var4.draw();
+				}
+			} else {
+				var1.setBlockBoundsForItemRender();
+				GL11.glTranslatef(-0.5F, -0.5F, -0.5F);
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, -1.0F, 0.0F);
+				this.renderBottomFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(0, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, 1.0F, 0.0F);
+				this.renderTopFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(1, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, 0.0F, -1.0F);
+				this.renderEastFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(2, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(0.0F, 0.0F, 1.0F);
+				this.renderWestFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(3, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(-1.0F, 0.0F, 0.0F);
+				this.renderNorthFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(4, var2));
+				var4.draw();
+				var4.startDrawingQuads();
+				var4.setNormal(1.0F, 0.0F, 0.0F);
+				this.renderSouthFace(var1, 0.0D, 0.0D, 0.0D, var1.getBlockTextureFromSideAndMetadata(5, var2));
+				var4.draw();
+				
+			}
+
 			GL11.glTranslatef(0.5F, 0.5F, 0.5F);
 		}
 
--- net/minecraft/src/BlockFlowing.java
+++ net/minecraft/src/BlockFlowing.java
@@ -49,9 +49,9 @@
 			}
 
 			if(this.numAdjacentSources >= 2 && this.blockMaterial == Material.water) {
-				if(var1.getBlockMaterial(var2, var3 - 1, var4).isSolid()) {
+				if(this.blockBlocksFlow(var1, var2, var3 - 1, var4)) {
 					var10 = 0;
-				} else if(var1.getBlockMaterial(var2, var3 - 1, var4) == this.blockMaterial && var1.getBlockMetadata(var2, var3, var4) == 0) {
+				} else if(var1.getBlockMaterial(var2, var3 - 1, var4) == this.blockMaterial && var1.getBlockMetadata(var2, var3 - 1, var4) == 0) {
 					var10 = 0;
 				}
 			}
@@ -78,6 +78,12 @@
 		}
 
 		if(this.liquidCanDisplaceBlock(var1, var2, var3 - 1, var4)) {
+			if(this.blockMaterial == Material.lava && var1.getBlockMaterial(var2, var3 - 1, var4) == Material.water) {
+				var1.setBlockWithNotify(var2, var3 - 1, var4, Block.stone.blockID);
+				this.triggerLavaMixEffects(var1, var2, var3 - 1, var4);
+				return;
+			}
+
 			if(var6 >= 8) {
 				var1.setBlockAndMetadataWithNotify(var2, var3 - 1, var4, this.blockID, var6);
 			} else {
--- net/minecraft/src/World.java
+++ net/minecraft/src/World.java
@@ -613,6 +613,31 @@
 		}
 	}
 
+	public int getSkyBlockTypeBrightness(EnumSkyBlock var1, int var2, int var3, int var4) {
+		if(this.worldProvider.hasNoSky && var1 == EnumSkyBlock.Sky) {
+			return 0;
+		} else {
+			if(var3 < 0) {
+				var3 = 0;
+			}
+
+			if(var3 >= 128 && var1 == EnumSkyBlock.Sky) {
+				return 15;
+			} else if(var3 >= 0 && var3 < 128 && var2 >= -30000000 && var4 >= -30000000 && var2 < 30000000 && var4 < 30000000) {
+				int var5 = var2 >> 4;
+				int var6 = var4 >> 4;
+				if(!this.chunkExists(var5, var6)) {
+					return 0;
+				} else {
+					Chunk var7 = this.getChunkFromChunkCoords(var5, var6);
+					return var7.getSavedLightValue(var1, var2 & 15, var3, var4 & 15);
+				}
+			} else {
+				return var1.field_1722_c;
+			}
+		}
+	}
+
 	public void neighborLightPropagationChanged(EnumSkyBlock var1, int var2, int var3, int var4, int var5) {
 		if(!this.worldProvider.hasNoSky || var1 != EnumSkyBlock.Sky) {
 			if(this.blockExists(var2, var3, var4)) {
@@ -635,6 +660,53 @@
 		}
 	}
 
+	public int func_35457_a(EnumSkyBlock var1, int var2, int var3, int var4) {
+		if(var3 < 0) {
+			var3 = 0;
+		}
+
+		if(var3 >= 128 && var1 == EnumSkyBlock.Sky) {
+			return 15;
+		} else if(var3 >= 0 && var3 < 128 && var2 >= -30000000 && var4 >= -30000000 && var2 < 30000000 && var4 < 30000000) {
+			int var5 = var2 >> 4;
+			int var6 = var4 >> 4;
+			if(!this.chunkExists(var5, var6)) {
+				return 0;
+			} else {
+				int var7 = this.getBlockId(var2, var3, var4);
+				if(var7 != Block.stairSingle.blockID && var7 != Block.tilledField.blockID && var7 != Block.stairCompactCobblestone.blockID && var7 != Block.stairCompactPlanks.blockID) {
+					Chunk var13 = this.getChunkFromChunkCoords(var5, var6);
+					return var13.getSavedLightValue(var1, var2 & 15, var3, var4 & 15);
+				} else {
+					int var8 = this.getSavedLightValue(var1, var2, var3 + 1, var4);
+					int var9 = this.getSavedLightValue(var1, var2 + 1, var3, var4);
+					int var10 = this.getSavedLightValue(var1, var2 - 1, var3, var4);
+					int var11 = this.getSavedLightValue(var1, var2, var3, var4 + 1);
+					int var12 = this.getSavedLightValue(var1, var2, var3, var4 - 1);
+					if(var9 > var8) {
+						var8 = var9;
+					}
+
+					if(var10 > var8) {
+						var8 = var10;
+					}
+
+					if(var11 > var8) {
+						var8 = var11;
+					}
+
+					if(var12 > var8) {
+						var8 = var12;
+					}
+
+					return var8;
+				}
+			}
+		} else {
+			return var1.field_1722_c;
+		}
+	}
+
 	public int getSavedLightValue(EnumSkyBlock var1, int var2, int var3, int var4) {
 		if(var3 < 0) {
 			var3 = 0;
@@ -676,6 +748,16 @@
 		}
 	}
 
+	public int func_35451_b(int var1, int var2, int var3, int var4) {
+		int var5 = this.func_35457_a(EnumSkyBlock.Sky, var1, var2, var3);
+		int var6 = this.func_35457_a(EnumSkyBlock.Block, var1, var2, var3);
+		if(var6 < var4) {
+			var6 = var4;
+		}
+
+		return var5 << 20 | var6 << 4;
+	}
+
 	public float getBrightness(int var1, int var2, int var3, int var4) {
 		int var5 = this.getBlockLightValue(var1, var2, var3);
 		if(var5 < var4) {
@@ -685,6 +767,23 @@
 		return this.worldProvider.lightBrightnessTable[var5];
 	}
 
+	public float getSunBrightness(float a) {
+		float timeOfDay = this.getCelestialAngle(a);
+		float skyBrightness = 1.0F - (MathHelper.cos(timeOfDay * (float)Math.PI * 2.0F) * 2.0F + 0.2F);
+		if(skyBrightness < 0.0F) {
+			skyBrightness = 0.0F;
+		}
+
+		if(skyBrightness > 1.0F) {
+			skyBrightness = 1.0F;
+		}
+
+		skyBrightness = 1.0F - skyBrightness;
+		skyBrightness = (float)((double)skyBrightness * (1.0D - (double)(this.func_27162_g(a) * 5.0F) / 16.0D));
+		skyBrightness = (float)((double)skyBrightness * (1.0D - (double)(this.func_27166_f(a) * 5.0F) / 16.0D));
+		return skyBrightness * 0.8F + 0.2F;
+	}
+
 	public float getLightBrightness(int var1, int var2, int var3) {
 		return this.worldProvider.lightBrightnessTable[this.getBlockLightValue(var1, var2, var3)];
 	}
@@ -1006,6 +1105,23 @@
 		return (int)(var3 * 11.0F);
 	}
 
+	public float func_35464_b(float var1) {
+		float var2 = this.getCelestialAngle(var1);
+		float var3 = 1.0F - (MathHelper.cos(var2 * (float)Math.PI * 2.0F) * 2.0F + 0.2F);
+		if(var3 < 0.0F) {
+			var3 = 0.0F;
+		}
+
+		if(var3 > 1.0F) {
+			var3 = 1.0F;
+		}
+
+		var3 = 1.0F - var3;
+		var3 = (float)((double)var3 * (1.0D - (double)(this.func_27162_g(var1) * 5.0F) / 16.0D));
+		var3 = (float)((double)var3 * (1.0D - (double)(this.func_27166_f(var1) * 5.0F) / 16.0D));
+		return var3 * 0.8F + 0.2F;
+	}
+
 	public Vec3D func_4079_a(Entity var1, float var2) {
 		float var3 = this.getCelestialAngle(var2);
 		float var4 = MathHelper.cos(var3 * (float)Math.PI * 2.0F) * 2.0F + 0.5F;
@@ -1066,6 +1182,15 @@
 		return this.worldProvider.calculateCelestialAngle(this.worldInfo.getWorldTime(), var1);
 	}
 
+	public int func_40475_d(float var1) {
+		return this.worldProvider.func_40470_b(this.worldInfo.getWorldTime(), var1);
+	}
+
+	public float getCelestialAngleRadians(float var1) {
+		float var2 = this.getCelestialAngle(var1);
+		return var2 * (float)Math.PI * 2.0F;
+	}
+
 	public Vec3D func_628_d(float var1) {
 		float var2 = this.getCelestialAngle(var1);
 		float var3 = MathHelper.cos(var2 * (float)Math.PI * 2.0F) * 2.0F + 0.5F;
@@ -1997,6 +2122,10 @@
 			int var8 = var2 + this.rand.nextInt(var4) - this.rand.nextInt(var4);
 			int var9 = var3 + this.rand.nextInt(var4) - this.rand.nextInt(var4);
 			int var10 = this.getBlockId(var7, var8, var9);
+			if(this.rand.nextInt(8) > var8 && var10 == 0) {
+				this.spawnParticle("depthsuspend", (double)((float)var7 + this.rand.nextFloat()), (double)((float)var8 + this.rand.nextFloat()), (double)((float)var9 + this.rand.nextFloat()), 0.0D, 0.0D, 0.0D);
+			}
+
 			if(var10 > 0) {
 				Block.blocksList[var10].randomDisplayTick(this, var7, var8, var9, var5);
 			}
@@ -2164,6 +2293,10 @@
 	}
 
 	public EntityPlayer getClosestPlayer(double var1, double var3, double var5, double var7) {
+		if(this.isTitle()) {
+			return null;
+		}
+
 		double var9 = -1.0D;
 		EntityPlayer var11 = null;
 
@@ -2451,4 +2584,8 @@
 		}
 
 	}
+
+	public boolean isTitle() {
+		return false;
+ 	}
 }
--- net/minecraft/src/TerrainTextureManager.java
+++ net/minecraft/src/TerrainTextureManager.java
@@ -6,15 +6,33 @@
 import javax.imageio.ImageIO;
 
 public class TerrainTextureManager {
+	private static final int IMG_WIDTH = 32;
+	private static final int IMG_HEIGHT = 160;
 	private float[] field_1181_a = new float[768];
 	private int[] field_1180_b = new int[5120];
-	private int[] field_1186_c = new int[5120];
-	private int[] field_1185_d = new int[5120];
-	private int[] field_1184_e = new int[5120];
+	private byte[] field_1186_c = new byte[5120];
+	private byte[] field_1185_d = new byte[5120];
+	private byte[] waterR = new byte[5120];
+	private byte[] waterG = new byte[5120];
+	private byte[] waterB = new byte[5120];
 	private int[] field_1183_f = new int[34];
-	private int[] field_1182_g = new int[768];
+	private float[][] field_35811_L;
+
+	private static int[] getTextureContents(String var0) throws IOException {
+		BufferedImage var1 = ImageIO.read(TerrainTextureManager.class.getResource(var0));
+		int var2 = var1.getWidth();
+		int var3 = var1.getHeight();
+		int[] var4 = new int[var2 * var3];
+		var1.getRGB(0, 0, var2, var3, var4, 0, var2);
+		return var4;
+	}
 
 	public TerrainTextureManager() {
+		int var5;
+		int var7;
+		int var12;
+		int var13;
+		int var14;
 		try {
 			BufferedImage var1 = ImageIO.read(TerrainTextureManager.class.getResource("/terrain.png"));
 			int[] var2 = new int[65536];
@@ -22,45 +40,150 @@
 
 			for(int var3 = 0; var3 < 256; ++var3) {
 				int var4 = 0;
-				int var5 = 0;
+				var5 = 0;
 				int var6 = 0;
-				int var7 = var3 % 16 * 16;
+				var7 = var3 % 16 * 16;
 				int var8 = var3 / 16 * 16;
-				int var9 = 0;
-
-				for(int var10 = 0; var10 < 16; ++var10) {
-					for(int var11 = 0; var11 < 16; ++var11) {
-						int var12 = var2[var11 + var7 + (var10 + var8) * 256];
-						int var13 = var12 >> 24 & 255;
-						if(var13 > 128) {
-							var4 += var12 >> 16 & 255;
-							var5 += var12 >> 8 & 255;
-							var6 += var12 & 255;
-							++var9;
-						}
-					}
-
-					if(var9 == 0) {
-						++var9;
-					}
-
-					this.field_1181_a[var3 * 3 + 0] = (float)(var4 / var9);
-					this.field_1181_a[var3 * 3 + 1] = (float)(var5 / var9);
-					this.field_1181_a[var3 * 3 + 2] = (float)(var6 / var9);
-				}
-			}
-		} catch (IOException var14) {
-			var14.printStackTrace();
-		}
-
-		for(int var15 = 0; var15 < 256; ++var15) {
-			if(Block.blocksList[var15] != null) {
-				this.field_1182_g[var15 * 3 + 0] = Block.blocksList[var15].getBlockTextureFromSide(1);
-				this.field_1182_g[var15 * 3 + 1] = Block.blocksList[var15].getBlockTextureFromSide(2);
-				this.field_1182_g[var15 * 3 + 2] = Block.blocksList[var15].getBlockTextureFromSide(3);
-			}
-		}
-
+				int var9 = var3 != 206 && var3 != 238 ? 16 : 32;
+				int var10 = 0;
+
+				for(int var11 = 0; var11 < var9; ++var11) {
+					for(var12 = 0; var12 < var9; ++var12) {
+						var13 = var2[var12 + var7 + (var11 + var8) * 256];
+						var14 = var13 >> 24 & 255;
+						if(var14 >= 128) {
+							var4 += var13 >> 16 & 255;
+							var5 += var13 >> 8 & 255;
+							var6 += var13 & 255;
+							++var10;
+						}
+					}
+				}
+
+				if(var10 == 0) {
+					++var10;
+				}
+
+				this.field_1181_a[var3 * 3 + 0] = (float)var4 / (float)var10;
+				this.field_1181_a[var3 * 3 + 1] = (float)var5 / (float)var10;
+				this.field_1181_a[var3 * 3 + 2] = (float)var6 / (float)var10;
+			}
+		} catch (IOException var21) {
+			var21.printStackTrace();
+		}
+
+		try {
+			float[][] var22 = new float[16][3];
+			float[][] var23 = new float[16][3];
+			this.field_35811_L = new float[17][];
+			int[] var24 = null;
+			int[] var25 = null;
+
+			try {
+				var24 = getTextureContents("/environment/light_normal.png");
+			} catch (IOException var19) {
+				var19.printStackTrace();
+			}
+
+			try {
+				var25 = getTextureContents("/environment/light_hell.png");
+			} catch (IOException var18) {
+				var18.printStackTrace();
+			}
+
+			for(var5 = 0; var5 < 17; ++var5) {
+				int[] var26;
+				if(var5 == 16) {
+					var26 = var25;
+				} else {
+					var26 = var24;
+				}
+
+				if(var26 != null) {
+					var7 = var26.length >> 5;
+					if(var7 >= 16) {
+						float[] var27 = new float[768];
+						float var28 = 1.1666666F * (1.0F - (float)var5 / 11.0F) * 0.8F;
+						if(var28 < 0.0F) {
+							var28 = 0.0F;
+						} else if(var28 > 1.0F) {
+							var28 = 1.0F;
+						}
+
+						float var29 = var28 * (float)(var7 - 1);
+						float var30 = 0.5F * (float)(var7 - 1);
+						getLightMapColumn(var26, var29, 0, var7, var22);
+						getLightMapColumn(var26, var30, var7 << 4, var7, var23);
+
+						for(var12 = 0; var12 < 16; ++var12) {
+							for(var13 = 0; var13 < 16; ++var13) {
+								var14 = (var12 << 4 | var13) * 3;
+								float var15 = var22[var12][0] + var23[var13][0];
+								float var16 = var22[var12][1] + var23[var13][1];
+								float var17 = var22[var12][2] + var23[var13][2];
+								if(var15 < 0.0F) {
+									var15 = 0.0F;
+								} else if(var15 > 1.0F) {
+									var15 = 1.0F;
+								}
+
+								if(var16 < 0.0F) {
+									var16 = 0.0F;
+								} else if(var16 > 1.0F) {
+									var16 = 1.0F;
+								}
+
+								if(var17 < 0.0F) {
+									var17 = 0.0F;
+								} else if(var17 > 1.0F) {
+									var17 = 1.0F;
+								}
+
+								var27[var14] = var15;
+								var27[var14 + 1] = var16;
+								var27[var14 + 2] = var17;
+							}
+						}
+
+						this.field_35811_L[var5] = var27;
+					}
+				}
+			}
+		} catch (Throwable var20) {
+			this.field_35811_L = (float[][])null;
+			System.gc();
+			var20.printStackTrace();
+			System.gc();
+		}
+
+	}
+
+	private static void getLightMapColumn(int[] var0, float var1, int var2, int var3, float[][] var4) {
+		int var5 = (int)Math.floor((double)var1);
+		int var6 = (int)Math.ceil((double)var1);
+		if(var5 == var6) {
+			for(int var13 = 0; var13 < 16; ++var13) {
+				int var14 = var0[var2 + var13 * var3 + var5];
+				float[] var15 = var4[var13];
+				var15[0] = (float)(var14 >> 16 & 255) / 255.0F;
+				var15[1] = (float)(var14 >> 8 & 255) / 255.0F;
+				var15[2] = (float)(var14 & 255) / 255.0F;
+			}
+
+		} else {
+			float var7 = 1.0F - (var1 - (float)var5);
+			float var8 = 1.0F - ((float)var6 - var1);
+
+			for(int var9 = 0; var9 < 16; ++var9) {
+				int var10 = var0[var2 + var9 * var3 + var5];
+				int var11 = var0[var2 + var9 * var3 + var6];
+				float[] var12 = var4[var9];
+				var12[0] = (float)(var10 >> 16 & 255) / 255.0F * var7 + (float)(var11 >> 16 & 255) / 255.0F * var8;
+				var12[1] = (float)(var10 >> 8 & 255) / 255.0F * var7 + (float)(var11 >> 8 & 255) / 255.0F * var8;
+				var12[2] = (float)(var10 & 255) / 255.0F * var7 + (float)(var11 & 255) / 255.0F * var8;
+			}
+
+		}
 	}
 
 	public void func_799_a(IsoImageBuffer var1) {
@@ -79,97 +202,241 @@
 				var1.field_1352_e = true;
 			} else {
 				var1.field_1351_f = false;
-				Arrays.fill(this.field_1186_c, 0);
-				Arrays.fill(this.field_1185_d, 0);
+				Arrays.fill(this.field_1186_c, (byte)0);
+				Arrays.fill(this.field_1185_d, (byte)0);
 				Arrays.fill(this.field_1183_f, 160);
-
-				for(int var8 = var6 - 1; var8 >= var4; --var8) {
-					for(int var9 = var5 - 1; var9 >= var3; --var9) {
-						int var10 = var9 - var3;
-						int var11 = var8 - var4;
-						int var12 = var10 + var11;
-						boolean var13 = true;
-
-						for(int var14 = 0; var14 < 128; ++var14) {
-							int var15 = var11 - var10 - var14 + 160 - 16;
-							if(var15 < this.field_1183_f[var12] || var15 < this.field_1183_f[var12 + 1]) {
-								Block var16 = Block.blocksList[var2.getBlockId(var9, var14, var8)];
-								if(var16 == null) {
-									var13 = false;
-								} else if(var16.blockMaterial == Material.water) {
-									int var24 = var2.getBlockId(var9, var14 + 1, var8);
-									if(var24 == 0 || Block.blocksList[var24].blockMaterial != Material.water) {
-										float var25 = (float)var14 / 127.0F * 0.6F + 0.4F;
-										float var26 = var2.getLightBrightness(var9, var14 + 1, var8) * var25;
-										if(var15 >= 0 && var15 < 160) {
-											int var27 = var12 + var15 * 32;
-											if(var12 >= 0 && var12 <= 32 && this.field_1185_d[var27] <= var14) {
-												this.field_1185_d[var27] = var14;
-												this.field_1184_e[var27] = (int)(var26 * 127.0F);
-											}
-
-											if(var12 >= -1 && var12 <= 31 && this.field_1185_d[var27 + 1] <= var14) {
-												this.field_1185_d[var27 + 1] = var14;
-												this.field_1184_e[var27 + 1] = (int)(var26 * 127.0F);
-											}
-
-											var13 = false;
-										}
-									}
+				boolean var8 = this.field_35811_L == null;
+				float[] var9;
+				int var10;
+				if(var8) {
+					var9 = null;
+				} else if(var2.worldProvider instanceof WorldProviderHell) {
+					var9 = this.field_35811_L[16];
+				} else {
+					var10 = var2.skylightSubtracted;
+					if(var10 > 15) {
+						var9 = this.field_35811_L[15];
+					} else if(var10 < 0) {
+						var9 = this.field_35811_L[0];
+					} else {
+						var9 = this.field_35811_L[var10];
+					}
+				}
+
+				for(var10 = var6 - 1; var10 >= var4; --var10) {
+					for(int var11 = var5 - 1; var11 >= var3; --var11) {
+						int var12 = var11 - var3;
+						int var13 = var10 - var4;
+						int var14 = var12 + var13;
+						boolean var15 = true;
+
+						for(int var16 = 0; var16 < 128; ++var16) {
+							int var17 = var13 - var12 - var16 + 160 - 16;
+							if(var17 < this.field_1183_f[var14] || var17 < this.field_1183_f[var14 + 1]) {
+								Block var18 = Block.blocksList[var2.getBlockId(var11, var16, var10)];
+								if(var18 == null) {
+									var15 = false;
 								} else {
-									if(var13) {
-										if(var15 < this.field_1183_f[var12]) {
-											this.field_1183_f[var12] = var15;
-										}
-
-										if(var15 < this.field_1183_f[var12 + 1]) {
-											this.field_1183_f[var12 + 1] = var15;
-										}
-									}
-
-									float var17 = (float)var14 / 127.0F * 0.6F + 0.4F;
-									int var18;
 									int var19;
-									float var20;
+									float var21;
 									float var22;
-									if(var15 >= 0 && var15 < 160) {
-										var18 = var12 + var15 * 32;
-										var19 = this.field_1182_g[var16.blockID * 3 + 0];
-										var20 = (var2.getLightBrightness(var9, var14 + 1, var8) * 0.8F + 0.2F) * var17;
-										if(var12 >= 0 && this.field_1186_c[var18] <= var14) {
-											this.field_1186_c[var18] = var14;
-											this.field_1180_b[var18] = -16777216 | (int)(this.field_1181_a[var19 * 3 + 0] * var20) << 16 | (int)(this.field_1181_a[var19 * 3 + 1] * var20) << 8 | (int)(this.field_1181_a[var19 * 3 + 2] * var20);
-										}
-
-										if(var12 < 31) {
-											var22 = var20 * 0.9F;
-											if(this.field_1186_c[var18 + 1] <= var14) {
-												this.field_1186_c[var18 + 1] = var14;
-												this.field_1180_b[var18 + 1] = -16777216 | (int)(this.field_1181_a[var19 * 3 + 0] * var22) << 16 | (int)(this.field_1181_a[var19 * 3 + 1] * var22) << 8 | (int)(this.field_1181_a[var19 * 3 + 2] * var22);
-											}
-										}
-									}
-
-									if(var15 >= -1 && var15 < 159) {
-										var18 = var12 + (var15 + 1) * 32;
-										var19 = this.field_1182_g[var16.blockID * 3 + 1];
-										var20 = var2.getLightBrightness(var9 - 1, var14, var8) * 0.8F + 0.2F;
-										int var21 = this.field_1182_g[var16.blockID * 3 + 2];
-										var22 = var2.getLightBrightness(var9, var14, var8 + 1) * 0.8F + 0.2F;
-										float var23;
-										if(var12 >= 0) {
-											var23 = var20 * var17 * 0.6F;
-											if(this.field_1186_c[var18] <= var14 - 1) {
-												this.field_1186_c[var18] = var14 - 1;
-												this.field_1180_b[var18] = -16777216 | (int)(this.field_1181_a[var19 * 3 + 0] * var23) << 16 | (int)(this.field_1181_a[var19 * 3 + 1] * var23) << 8 | (int)(this.field_1181_a[var19 * 3 + 2] * var23);
-											}
-										}
-
-										if(var12 < 31) {
-											var23 = var22 * 0.9F * var17 * 0.4F;
-											if(this.field_1186_c[var18 + 1] <= var14 - 1) {
-												this.field_1186_c[var18 + 1] = var14 - 1;
-												this.field_1180_b[var18 + 1] = -16777216 | (int)(this.field_1181_a[var21 * 3 + 0] * var23) << 16 | (int)(this.field_1181_a[var21 * 3 + 1] * var23) << 8 | (int)(this.field_1181_a[var21 * 3 + 2] * var23);
+									float var23;
+									int var24;
+									float var26;
+									if(var18.blockMaterial == Material.water) {
+										var19 = var2.getBlockId(var11, var16 + 1, var10);
+										if((var19 == 0 || Block.blocksList[var19].blockMaterial != Material.water) && var17 >= 0 && var17 < 160) {
+											int var38 = var18.colorMultiplier(var2, var11, var16, var10);
+											var21 = (float)(var38 >> 16 & 255) / 255.0F;
+											var22 = (float)(var38 >> 8 & 255) / 255.0F;
+											var23 = (float)(var38 & 255) / 255.0F;
+											var24 = var18.getBlockTexture(var2, var11, var16, var10, 1);
+											if(var24 < 0) {
+												var24 = -var24;
+											}
+
+											var24 &= 255;
+											var21 *= this.field_1181_a[var24 * 3 + 0];
+											var22 *= this.field_1181_a[var24 * 3 + 1];
+											var23 *= this.field_1181_a[var24 * 3 + 2];
+											float var40 = (float)var16 / 127.0F * 0.6F + 0.4F;
+											int var39;
+											if(var8) {
+												var26 = var2.getLightBrightness(var11, var16 + 1, var10) * var40;
+												var21 *= var26;
+												var22 *= var26;
+												var23 *= var26;
+											} else {
+												var39 = var2.func_35451_b(var11, var16 + 1, var10, 0);
+												int var42 = var39 >>> 4 & 15;
+												int var44 = var39 >>> 20 & 15;
+												int var45 = (var44 << 4 | var42) * 3;
+												var21 *= var9[var45 + 0] * var40;
+												var22 *= var9[var45 + 1] * var40;
+												var23 *= var9[var45 + 2] * var40;
+											}
+
+											var21 = var21 / 255.0F * 127.0F;
+											var22 = var22 / 255.0F * 127.0F;
+											var23 = var23 / 255.0F * 127.0F;
+											var39 = var14 + var17 * 32;
+											if(var14 >= 0 && var14 <= 32 && (this.field_1185_d[var39] & 255) <= var16) {
+												this.field_1185_d[var39] = (byte)var16;
+												this.waterR[var39] = (byte)((int)var21);
+												this.waterG[var39] = (byte)((int)var22);
+												this.waterB[var39] = (byte)((int)var23);
+											}
+
+											if(var14 >= -1 && var14 <= 31 && (this.field_1185_d[var39 + 1] & 255) <= var16) {
+												this.field_1185_d[var39 + 1] = (byte)var16;
+												this.waterR[var39 + 1] = (byte)((int)var21);
+												this.waterG[var39 + 1] = (byte)((int)var22);
+												this.waterB[var39 + 1] = (byte)((int)var23);
+											}
+
+											var15 = false;
+										}
+									} else {
+										if(var15) {
+											if(var17 < this.field_1183_f[var14]) {
+												this.field_1183_f[var14] = var17;
+											}
+
+											if(var17 < this.field_1183_f[var14 + 1]) {
+												this.field_1183_f[var14 + 1] = var17;
+											}
+										}
+
+										var19 = var18.colorMultiplier(var2, var11, var16, var10);
+										float var20 = (float)(var19 >> 16 & 255) / 255.0F;
+										var21 = (float)(var19 >> 8 & 255) / 255.0F;
+										var22 = (float)(var19 & 255) / 255.0F;
+										var23 = (float)var16 / 127.0F * 0.6F + 0.4F;
+										int var25;
+										float var28;
+										int var30;
+										int var33;
+										if(var17 >= 0 && var17 < 160) {
+											var24 = var14 + var17 * 32;
+											var25 = var18.getBlockTexture(var2, var11, var16, var10, 1);
+											if(var25 < 0) {
+												var25 = -var25;
+											}
+
+											var25 &= 255;
+											float var27 = this.field_1181_a[var25 * 3 + 0];
+											var28 = this.field_1181_a[var25 * 3 + 1];
+											float var29 = this.field_1181_a[var25 * 3 + 2];
+											if(var8) {
+												var26 = (var2.getLightBrightness(var11, var16 + 1, var10) * 0.8F + 0.2F) * var23;
+												var27 *= var26;
+												var28 *= var26;
+												var29 *= var26;
+											} else {
+												var30 = var2.func_35451_b(var11, var16 + 1, var10, 0);
+												int var31 = var30 >>> 4 & 15;
+												int var32 = var30 >>> 20 & 15;
+												var33 = (var32 << 4 | var31) * 3;
+												var27 *= (var9[var33 + 0] * 0.8F + 0.2F) * var23;
+												var28 *= (var9[var33 + 1] * 0.8F + 0.2F) * var23;
+												var29 *= (var9[var33 + 2] * 0.8F + 0.2F) * var23;
+											}
+
+											var27 *= var20;
+											var28 *= var21;
+											var29 *= var22;
+											if(var14 >= 0 && (this.field_1186_c[var24] & 255) <= var16) {
+												this.field_1186_c[var24] = (byte)var16;
+												this.field_1180_b[var24] = -16777216 | (int)var27 << 16 | (int)var28 << 8 | (int)var29;
+											}
+
+											if(var14 < 31 && (this.field_1186_c[var24 + 1] & 255) <= var16) {
+												var27 *= 0.9F;
+												var28 *= 0.9F;
+												var29 *= 0.9F;
+												this.field_1186_c[var24 + 1] = (byte)var16;
+												this.field_1180_b[var24 + 1] = -16777216 | (int)var27 << 16 | (int)var28 << 8 | (int)var29;
+											}
+										}
+
+										boolean var41 = var18 != Block.grass;
+										if(var17 >= -1 && var17 < 159) {
+											var24 = var14 + (var17 + 1) * 32;
+											int var34;
+											int var35;
+											int var36;
+											float var46;
+											float var47;
+											if(var14 >= 0 && (this.field_1186_c[var24] & 255) <= var16 - 1) {
+												var25 = var18.getBlockTexture(var2, var11, var16, var10, 2);
+												if(var25 < 0) {
+													var25 = -var25;
+												}
+
+												var25 &= 255;
+												float var43 = this.field_1181_a[var25 * 3 + 0];
+												var46 = this.field_1181_a[var25 * 3 + 1];
+												var47 = this.field_1181_a[var25 * 3 + 2];
+												if(var8) {
+													var26 = var2.getLightBrightness(var11 - 1, var16, var10) * 0.8F + 0.2F;
+													var28 = var26 * var23 * 0.6F;
+													var43 *= var28;
+													var46 *= var28;
+													var47 *= var28;
+												} else {
+													var33 = var2.func_35451_b(var11 - 1, var16, var10, 0);
+													var34 = var33 >>> 4 & 15;
+													var35 = var33 >>> 20 & 15;
+													var36 = (var35 << 4 | var34) * 3;
+													var43 *= (var9[var36 + 0] * 0.8F + 0.2F) * var23 * 0.6F;
+													var46 *= (var9[var36 + 1] * 0.8F + 0.2F) * var23 * 0.6F;
+													var47 *= (var9[var36 + 2] * 0.8F + 0.2F) * var23 * 0.6F;
+												}
+
+												if(var41) {
+													var43 *= var20;
+													var46 *= var21;
+													var47 *= var22;
+												}
+
+												this.field_1186_c[var24] = (byte)(var16 - 1);
+												this.field_1180_b[var24] = -16777216 | (int)var43 << 16 | (int)var46 << 8 | (int)var47;
+											}
+
+											if(var14 < 31 && (this.field_1186_c[var24 + 1] & 255) <= var16 - 1) {
+												var30 = var18.getBlockTexture(var2, var11, var16, var10, 3);
+												if(var30 < 0) {
+													var30 = -var30;
+												}
+
+												var30 &= 255;
+												var46 = this.field_1181_a[var30 * 3 + 0];
+												var47 = this.field_1181_a[var30 * 3 + 1];
+												float var48 = this.field_1181_a[var30 * 3 + 2];
+												if(var8) {
+													float var49 = var2.getLightBrightness(var11, var16, var10 + 1) * 0.8F + 0.2F;
+													var28 = var49 * 0.9F * var23 * 0.4F;
+													var46 *= var28;
+													var47 *= var28;
+													var48 *= var28;
+												} else {
+													var34 = var2.func_35451_b(var11, var16, var10 + 1, 0);
+													var35 = var34 >>> 4 & 15;
+													var36 = var34 >>> 20 & 15;
+													int var37 = (var36 << 4 | var35) * 3;
+													var46 *= (var9[var37 + 0] * 0.8F + 0.2F) * 0.9F * var23 * 0.4F;
+													var47 *= (var9[var37 + 1] * 0.8F + 0.2F) * 0.9F * var23 * 0.4F;
+													var48 *= (var9[var37 + 2] * 0.8F + 0.2F) * 0.9F * var23 * 0.4F;
+												}
+
+												if(var41) {
+													var46 *= var20;
+													var47 *= var21;
+													var48 *= var22;
+												}
+
+												this.field_1186_c[var24 + 1] = (byte)(var16 - 1);
+												this.field_1180_b[var24 + 1] = -16777216 | (int)var46 << 16 | (int)var47 << 8 | (int)var48;
 											}
 										}
 									}
@@ -188,6 +455,7 @@
 				var1.field_1352_e = true;
 			}
 		}
+
 	}
 
 	private void func_800_a() {
@@ -198,13 +466,12 @@
 					this.field_1180_b[var3] = 0;
 				}
 
-				if(this.field_1185_d[var3] > this.field_1186_c[var3]) {
+				if((this.field_1185_d[var3] & 255) > (this.field_1186_c[var3] & 255)) {
 					int var4 = this.field_1180_b[var3] >> 24 & 255;
-					this.field_1180_b[var3] = ((this.field_1180_b[var3] & 16711422) >> 1) + this.field_1184_e[var3];
 					if(var4 < 128) {
-						this.field_1180_b[var3] = Integer.MIN_VALUE + this.field_1184_e[var3] * 2;
+						this.field_1180_b[var3] = Integer.MIN_VALUE + (this.waterR[var3] << 17) + (this.waterG[var3] << 9) + (this.waterB[var3] << 1);
 					} else {
-						this.field_1180_b[var3] |= -16777216;
+						this.field_1180_b[var3] = ((this.field_1180_b[var3] & 16711422) >> 1) + (this.waterR[var3] << 16) + (this.waterG[var3] << 8) + this.waterB[var3] | -16777216;
 					}
 				}
 			}
--- /dev/null
+++ net/minecraft/src/EntityAuraFX.java
@@ -1,0 +1,34 @@
+package net.minecraft.src;
+
+public class EntityAuraFX extends EntityFX {
+	public EntityAuraFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		super(var1, var2, var4, var6, var8, var10, var12);
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var14 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var14 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var14 & 255) / 255.0F;
+		this.particleTextureIndex = 0;
+		this.setSize(0.02F, 0.02F);
+		this.particleScale *= this.rand.nextFloat() * 0.6F + 0.5F;
+		this.motionX *= (double)0.02F;
+		this.motionY *= (double)0.02F;
+		this.motionZ *= (double)0.02F;
+		this.particleMaxAge = (int)(20.0D / (Math.random() * 0.8D + 0.2D));
+		this.noClip = true;
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		this.motionX *= 0.99D;
+		this.motionY *= 0.99D;
+		this.motionZ *= 0.99D;
+		if(this.particleMaxAge-- <= 0) {
+			this.setEntityDead();
+		}
+
+	}
+}
--- net/minecraft/src/EntityPig.java
+++ net/minecraft/src/EntityPig.java
@@ -43,6 +43,10 @@
 	}
 
 	protected int getDropItemId() {
+		if(this.getSaddled()) {
+			this.dropItem(Item.saddle.shiftedIndex, 1);
+		}
+
 		return this.fire > 0 ? Item.porkCooked.shiftedIndex : Item.porkRaw.shiftedIndex;
 	}
 
--- net/minecraft/src/EntityRenderer.java
+++ net/minecraft/src/EntityRenderer.java
@@ -1,5 +1,6 @@
 package net.minecraft.src;
 
+import java.awt.image.BufferedImage;
 import java.nio.FloatBuffer;
 import java.util.List;
 import java.util.Random;
@@ -12,6 +13,8 @@
 import org.lwjgl.util.glu.GLU;
 
 public class EntityRenderer {
+	private static final float[][] sunRgbs = new float[16][3];
+	private static final float[][] torchRgbs = new float[16][3];
 	public static boolean field_28135_a = false;
 	public static int anaglyphField;
 	private Minecraft mc;
@@ -35,12 +38,24 @@
 	private float field_22221_y = 0.0F;
 	private float field_22220_z = 0.0F;
 	private float field_22230_A = 0.0F;
+	private float fovModifierHand;
+	private float fovModifierHandPrev;
+	private float fovMultiplierTemp;
+	public int field_35818_d;
+	private int[] field_35811_L;
+	private final int[] lightMapsColorsRgb;
+	private final int[] hellLightMapsColorsRgb;
 	private boolean cloudFog = false;
 	private double cameraZoom = 1.0D;
 	private double cameraYaw = 0.0D;
 	private double cameraPitch = 0.0D;
 	private long prevFrameTime = System.currentTimeMillis();
 	private long field_28133_I = 0L;
+	private boolean field_35815_V = false;
+	float field_35819_e = 0.0F;
+	float field_35816_f = 0.0F;
+	float field_35817_g = 0.0F;
+	float field_35821_h = 0.0F;
 	private Random random = new Random();
 	private int rainSoundCounter = 0;
 	volatile int field_1394_b = 0;
@@ -51,13 +66,20 @@
 	float fogColorBlue;
 	private float fogColor2;
 	private float fogColor1;
+	public float panoramaTimer;
 
 	public EntityRenderer(Minecraft var1) {
 		this.mc = var1;
 		this.itemRenderer = new ItemRenderer(var1);
+		this.field_35818_d = var1.renderEngine.allocateAndSetupTexture(new BufferedImage(16, 16, 1));
+		this.field_35811_L = new int[256];
+		this.lightMapsColorsRgb = var1.renderEngine.func_28149_a("/environment/light_normal.png");
+		this.hellLightMapsColorsRgb = var1.renderEngine.func_28149_a("/environment/light_hell.png");
 	}
 
 	public void updateRenderer() {
+		this.func_35807_d();
+		this.updateFovModifierHand();
 		this.fogColor2 = this.fogColor1;
 		this.field_22227_s = this.field_22228_r;
 		this.field_22225_u = this.field_22226_t;
@@ -134,19 +156,36 @@
 		}
 	}
 
-	private float getFOVModifier(float var1) {
-		EntityLiving var2 = this.mc.renderViewEntity;
-		float var3 = 70.0F;
-		if(var2.isInsideOfMaterial(Material.water)) {
-			var3 = 60.0F;
-		}
-
-		if(var2.health <= 0) {
-			float var4 = (float)var2.deathTime + var1;
-			var3 /= (1.0F - 500.0F / (var4 + 500.0F)) * 2.0F + 1.0F;
-		}
-
-		return var3 + this.field_22221_y + (this.field_22222_x - this.field_22221_y) * var1;
+	private void updateFovModifierHand() {
+		EntityPlayerSP var1 = (EntityPlayerSP)this.mc.renderViewEntity;
+		this.fovMultiplierTemp = var1.getFOVMultiplier();
+		this.fovModifierHandPrev = this.fovModifierHand;
+		this.fovModifierHand += (this.fovMultiplierTemp - this.fovModifierHand) * 0.5F;
+	}
+
+	private float getFOVModifier(float var1, boolean var2) {
+		EntityPlayer var3 = (EntityPlayer)this.mc.renderViewEntity;
+		float var4 = 70.0F;
+		if(var2) {
+			var4 += this.mc.gameSettings.fovSetting * 40.0F;
+			var4 *= this.fovModifierHandPrev + (this.fovModifierHand - this.fovModifierHandPrev) * var1;
+		}
+
+		if(var3.health <= 0) {
+			float var5 = (float)var3.deathTime + var1;
+			var4 /= (1.0F - 500.0F / (var5 + 500.0F)) * 2.0F + 1.0F;
+		}
+
+		int var6 = ActiveRenderInfo.func_41066_a(this.mc.theWorld, var3, var1);
+		if(var6 != 0 && Block.blocksList[var6].blockMaterial == Material.water) {
+			var4 *= 0.857142857F;
+		}
+
+		if(this.mc.theWorld.isTitle()) {
+			var4 = 90.0F;
+		}
+
+		return var4 + this.field_22221_y + (this.field_22222_x - this.field_22221_y) * var1;
 	}
 
 	private void hurtCameraEffect(float var1) {
@@ -270,9 +309,9 @@
 		if(this.cameraZoom != 1.0D) {
 			GL11.glTranslatef((float)this.cameraYaw, (float)(-this.cameraPitch), 0.0F);
 			GL11.glScaled(this.cameraZoom, this.cameraZoom, 1.0D);
-			GLU.gluPerspective(this.getFOVModifier(var1), (float)this.mc.displayWidth / (float)this.mc.displayHeight, 0.05F, this.farPlaneDistance * 2.0F);
+			GLU.gluPerspective(this.getFOVModifier(var1, true), (float)this.mc.displayWidth / (float)this.mc.displayHeight, 0.05F, this.farPlaneDistance * 2.0F);
 		} else {
-			GLU.gluPerspective(this.getFOVModifier(var1), (float)this.mc.displayWidth / (float)this.mc.displayHeight, 0.05F, this.farPlaneDistance * 2.0F);
+			GLU.gluPerspective(this.getFOVModifier(var1, true), (float)this.mc.displayWidth / (float)this.mc.displayHeight, 0.05F, this.farPlaneDistance * 2.0F);
 		}
 
 		GL11.glMatrixMode(GL11.GL_MODELVIEW);
@@ -295,10 +334,31 @@
 			GL11.glRotatef(-((float)this.rendererUpdateCount + var1) * 20.0F, 0.0F, 1.0F, 1.0F);
 		}
 
+		if(this.mc.theWorld.isTitle() && this.mc.thePlayer != null) {
+			this.mc.thePlayer.rotationPitch = MathHelper.sin(this.panoramaTimer / 400.0F) * 25.0F + 20.0F;
+			this.mc.thePlayer.rotationYaw = this.panoramaTimer * 0.1F + 0.0F;
+		}
+
 		this.orientCamera(var1);
 	}
 
 	private void func_4135_b(float var1, int var2) {
+		GL11.glMatrixMode(GL11.GL_PROJECTION);
+		GL11.glLoadIdentity();
+		float var3 = 0.07F;
+		if(this.mc.gameSettings.anaglyph) {
+			GL11.glTranslatef((float)(-(var2 * 2 - 1)) * var3, 0.0F, 0.0F);
+		}
+
+		if(this.cameraZoom != 1.0D) {
+			GL11.glTranslatef((float)this.cameraYaw, (float)(-this.cameraPitch), 0.0F);
+			GL11.glScaled(this.cameraZoom, this.cameraZoom, 1.0D);
+			GLU.gluPerspective(this.getFOVModifier(var1, false), (float)this.mc.displayWidth / (float)this.mc.displayHeight, 0.05F, this.farPlaneDistance * 2.0F);
+		} else {
+			GLU.gluPerspective(this.getFOVModifier(var1, false), (float)this.mc.displayWidth / (float)this.mc.displayHeight, 0.05F, this.farPlaneDistance * 2.0F);
+		}
+
+		GL11.glMatrixMode(GL11.GL_MODELVIEW);
 		GL11.glLoadIdentity();
 		if(this.mc.gameSettings.anaglyph) {
 			GL11.glTranslatef((float)(var2 * 2 - 1) * 0.1F, 0.0F, 0.0F);
@@ -310,8 +370,10 @@
 			this.setupViewBobbing(var1);
 		}
 
-		if(!this.mc.gameSettings.thirdPersonView && !this.mc.renderViewEntity.isPlayerSleeping() && !this.mc.gameSettings.hideGUI) {
+		if(!this.mc.gameSettings.thirdPersonView && !this.mc.renderViewEntity.isPlayerSleeping() && !this.mc.gameSettings.hideGUI && !this.mc.theWorld.isTitle()) {
+			this.func_35806_b((double)var1);
 			this.itemRenderer.renderItemInFirstPerson(var1);
+			this.func_35810_a((double)var1);
 		}
 
 		GL11.glPopMatrix();
@@ -326,7 +388,145 @@
 
 	}
 
+	public void func_35810_a(double var1) {
+		OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapEnabled);
+		GL11.glDisable(GL11.GL_TEXTURE_2D);
+		OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapDisabled);
+	}
+
+	public void func_35806_b(double var1) {
+		OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapEnabled);
+		GL11.glMatrixMode(GL11.GL_TEXTURE);
+		GL11.glLoadIdentity();
+		float var3 = 0.00390625F;
+		GL11.glScalef(var3, var3, var3);
+		GL11.glTranslatef(8.0F, 8.0F, 8.0F);
+		GL11.glMatrixMode(GL11.GL_MODELVIEW);
+		this.mc.renderEngine.bindTexture(this.field_35818_d);
+		GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_LINEAR);
+		GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_LINEAR);
+		GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_LINEAR);
+		GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_LINEAR);
+		GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL11.GL_CLAMP);
+		GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL11.GL_CLAMP);
+		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
+		GL11.glEnable(GL11.GL_TEXTURE_2D);
+		OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapDisabled);
+	}
+
+	private void func_35807_d() {
+		this.field_35816_f = (float)((double)this.field_35816_f + (Math.random() - Math.random()) * Math.random() * Math.random());
+		this.field_35821_h = (float)((double)this.field_35821_h + (Math.random() - Math.random()) * Math.random() * Math.random());
+		this.field_35816_f = (float)((double)this.field_35816_f * 0.9D);
+		this.field_35821_h = (float)((double)this.field_35821_h * 0.9D);
+		this.field_35819_e += (this.field_35816_f - this.field_35819_e) * 1.0F;
+		this.field_35817_g += (this.field_35821_h - this.field_35817_g) * 1.0F;
+		this.field_35815_V = true;
+	}
+
+	private void func_35808_e() {
+		World level = this.mc.theWorld;
+		if(level == null) {
+			return;
+		}
+
+		int[] lightMapRgb;
+		if(level.worldProvider instanceof WorldProviderHell) {
+			lightMapRgb = this.hellLightMapsColorsRgb;
+		} else {
+			lightMapRgb = this.lightMapsColorsRgb;
+		}
+
+		int width = lightMapRgb.length >> 5;
+		float sun;
+		if(level.field_27172_i > 0) {
+			sun = 1.0F;
+		} else {
+			sun = 7.0F / 6.0F * (level.getSunBrightness(1.0F) - 0.2F);
+			if(sun < 0.0F) {
+				sun = 0.0F;
+			} else if(sun > 1.0F) {
+				sun = 1.0F;
+			}
+		}
+
+		float sunX = sun * (float)(width - 1);
+		float torchX = this.field_35817_g + 0.5F;
+		if(torchX < 0.0F) {
+			torchX = 0.0F;
+		} else if(torchX > 1.0F) {
+			torchX = (float)(width - 1);
+		} else {
+			torchX *= (float)(width - 1);
+		}
+
+		getLightMapColumn(lightMapRgb, sunX, 0, width, sunRgbs);
+		getLightMapColumn(lightMapRgb, torchX, width << 4, width, torchRgbs);
+
+		for(int is = 0; is < 16; ++is) {
+			for(int it = 0; it < 16; ++it) {
+				int r = (int)((sunRgbs[is][0] + torchRgbs[it][0]) * 255.0F);
+				int g = (int)((sunRgbs[is][1] + torchRgbs[it][1]) * 255.0F);
+				int b = (int)((sunRgbs[is][2] + torchRgbs[it][2]) * 255.0F);
+				if(r < 0) {
+					r = 0;
+				} else if(r > 255) {
+					r = 255;
+				}
+
+				if(g < 0) {
+					g = 0;
+				} else if(g > 255) {
+					g = 255;
+				}
+
+				if(b < 0) {
+					b = 0;
+				} else if(b > 255) {
+					b = 255;
+				}
+
+				this.field_35811_L[is << 4 | it] = 255 << 24 | r << 16 | g << 8 | b;
+			}
+		}
+		
+		this.mc.renderEngine.func_28150_a(this.field_35811_L, 16, 16, this.field_35818_d);
+		this.field_35815_V = false;
+	}
+
+	private static void getLightMapColumn(int[] origMap, float x, int offset, int width, float[][] colRgb) {
+		int xLow = (int)Math.floor((double)x);
+		int xHigh = (int)Math.ceil((double)x);
+		if(xLow == xHigh) {
+			for(int y = 0; y < 16; ++y) {
+				int rgbLow = origMap[offset + y * width + xLow];
+				float[] rgb = colRgb[y];
+				rgb[0] = (float)(rgbLow >> 16 & 0xFF) / 255.0F;
+				rgb[1] = (float)(rgbLow >> 8 & 0xFF) / 255.0F;
+				rgb[2] = (float)(rgbLow & 0xFF) / 255.0F;
+			}
+
+			return;
+		}
+
+		float dLow = 1.0F - (x - (float)xLow);
+		float dHigh = 1.0F - ((float)xHigh - x);
+
+		for(int y = 0; y < 16; ++y) {
+			int rgbLow = origMap[offset + y * width + xLow];
+			int rgbHigh = origMap[offset + y * width + xHigh];
+			float[] rgb = colRgb[y];
+			rgb[0] = (float)(rgbLow >> 16 & 0xFF) / 255.0F * dLow + (float)(rgbHigh >> 16 & 0xFF) / 255.0F * dHigh;
+			rgb[1] = (float)(rgbLow >> 8 & 0xFF) / 255.0F * dLow + (float)(rgbHigh >> 8 & 0xFF) / 255.0F * dHigh;
+			rgb[2] = (float)(rgbLow & 0xFF) / 255.0F * dLow + (float)(rgbHigh & 0xFF) / 255.0F * dHigh;
+		}
+	}
+
 	public void updateCameraAndRender(float var1) {
+		if(this.field_35815_V) {
+			this.func_35808_e();
+		}
+
 		if(!Display.isActive()) {
 			if(System.currentTimeMillis() - this.prevFrameTime > 500L) {
 				this.mc.displayInGameMenu();
@@ -430,6 +630,10 @@
 	}
 
 	public void renderWorld(float var1, long var2) {
+		if(this.field_35815_V) {
+			this.func_35808_e();
+		}
+
 		GL11.glEnable(GL11.GL_CULL_FACE);
 		GL11.glEnable(GL11.GL_DEPTH_TEST);
 		if(this.mc.renderViewEntity == null) {
@@ -467,6 +671,7 @@
 			GL11.glClear(GL11.GL_DEPTH_BUFFER_BIT | GL11.GL_COLOR_BUFFER_BIT);
 			GL11.glEnable(GL11.GL_CULL_FACE);
 			this.setupCameraTransform(var1, var18);
+			ActiveRenderInfo.func_41067_a(this.mc.thePlayer, this.mc.gameSettings.thirdPersonView);
 			ClippingHelperImpl.getInstance();
 			if(this.mc.gameSettings.renderDistance < 2) {
 				this.setupFog(-1, var1);
@@ -499,16 +704,20 @@
 			GL11.glShadeModel(GL11.GL_FLAT);
 			RenderHelper.enableStandardItemLighting();
 			var5.renderEntities(var4.getPosition(var1), var19, var1);
+			this.func_35806_b((double)var1);
 			var6.func_1187_b(var4, var1);
 			RenderHelper.disableStandardItemLighting();
 			this.setupFog(0, var1);
 			var6.renderParticles(var4, var1);
+			this.func_35810_a((double)var1);
 			EntityPlayer var21;
 			if(this.mc.objectMouseOver != null && var4.isInsideOfMaterial(Material.water) && var4 instanceof EntityPlayer) {
 				var21 = (EntityPlayer)var4;
 				GL11.glDisable(GL11.GL_ALPHA_TEST);
 				var5.drawBlockBreaking(var21, this.mc.objectMouseOver, 0, var21.inventory.getCurrentItem(), var1);
-				var5.drawSelectionBox(var21, this.mc.objectMouseOver, 0, var21.inventory.getCurrentItem(), var1);
+				if(!this.mc.theWorld.isTitle()) {
+					var5.drawSelectionBox(var21, this.mc.objectMouseOver, 0, var21.inventory.getCurrentItem(), var1);
+				}
 				GL11.glEnable(GL11.GL_ALPHA_TEST);
 			}
 
@@ -550,7 +759,9 @@
 				var21 = (EntityPlayer)var4;
 				GL11.glDisable(GL11.GL_ALPHA_TEST);
 				var5.drawBlockBreaking(var21, this.mc.objectMouseOver, 0, var21.inventory.getCurrentItem(), var1);
-				var5.drawSelectionBox(var21, this.mc.objectMouseOver, 0, var21.inventory.getCurrentItem(), var1);
+				if(!this.mc.theWorld.isTitle()) {
+					var5.drawSelectionBox(var21, this.mc.objectMouseOver, 0, var21.inventory.getCurrentItem(), var1);
+				}
 				GL11.glEnable(GL11.GL_ALPHA_TEST);
 			}
 
@@ -636,6 +847,7 @@
 	protected void renderRainSnow(float var1) {
 		float var2 = this.mc.theWorld.func_27162_g(var1);
 		if(var2 > 0.0F) {
+			this.func_35806_b((double)var1);
 			EntityLiving var3 = this.mc.renderViewEntity;
 			World var4 = this.mc.theWorld;
 			int var5 = MathHelper.floor_double(var3.posX);
@@ -750,8 +962,9 @@
 							double var39 = (double)((float)var20 + 0.5F) - var3.posZ;
 							float var40 = MathHelper.sqrt_double(var38 * var38 + var39 * var39) / (float)var16;
 							var8.startDrawingQuads();
-							float var32 = var4.getLightBrightness(var19, 128, var20) * 0.85F + 0.15F;
-							GL11.glColor4f(var32, var32, var32, ((1.0F - var40 * var40) * 0.5F + 0.5F) * var2);
+							float var32 = 1.0F;
+							var8.func_35835_b((var4.func_35451_b(var19, var24, var20, 0) * 3 + 15728880) / 4);
+							var8.setColorRGBA_F(var32, var32, var32, ((1.0F - var40 * var40) * 0.3F + 0.5F) * var2);
 							var8.setTranslationD(-var9 * 1.0D, -var11 * 1.0D, -var13 * 1.0D);
 							var8.addVertexWithUV((double)(var19 + 0), (double)var23, (double)var20 + 0.5D, (double)(0.0F * var37), (double)((float)var23 * var37 / 4.0F + var26 * var37));
 							var8.addVertexWithUV((double)(var19 + 1), (double)var23, (double)var20 + 0.5D, (double)(1.0F * var37), (double)((float)var23 * var37 / 4.0F + var26 * var37));
@@ -771,6 +984,7 @@
 			GL11.glEnable(GL11.GL_CULL_FACE);
 			GL11.glDisable(GL11.GL_BLEND);
 			GL11.glAlphaFunc(GL11.GL_GREATER, 0.1F);
+			this.func_35810_a((double)var1);
 		}
 	}
 
@@ -798,11 +1012,29 @@
 		this.fogColorRed = (float)var9.xCoord;
 		this.fogColorGreen = (float)var9.yCoord;
 		this.fogColorBlue = (float)var9.zCoord;
+		float var11;
+		if(this.mc.gameSettings.renderDistance < 2) {
+			Vec3D var10 = MathHelper.sin(var2.getCelestialAngleRadians(var1)) > 0.0F ? Vec3D.createVector(-1.0D, 0.0D, 0.0D) : Vec3D.createVector(1.0D, 0.0D, 0.0D);
+			var11 = (float)var3.getLook(var1).dotProduct(var10);
+			if(var11 < 0.0F) {
+				var11 = 0.0F;
+			}
+
+			if(var11 > 0.0F) {
+				float[] var60 = var2.worldProvider.calcSunriseSunsetColors(var2.getCelestialAngle(var1), var1);
+				if(var60 != null) {
+					var11 *= var60[3];
+					this.fogColorRed = this.fogColorRed * (1.0F - var11) + var60[0] * var11;
+					this.fogColorGreen = this.fogColorGreen * (1.0F - var11) + var60[1] * var11;
+					this.fogColorBlue = this.fogColorBlue * (1.0F - var11) + var60[2] * var11;
+				}
+			}
+		}
+
 		this.fogColorRed += (var6 - this.fogColorRed) * var4;
 		this.fogColorGreen += (var7 - this.fogColorGreen) * var4;
 		this.fogColorBlue += (var8 - this.fogColorBlue) * var4;
 		float var10 = var2.func_27162_g(var1);
-		float var11;
 		float var12;
 		if(var10 > 0.0F) {
 			var11 = 1.0F - var10 * 0.5F;
@@ -820,16 +1052,21 @@
 			this.fogColorBlue *= var12;
 		}
 
+		int var21 = ActiveRenderInfo.func_41066_a(this.mc.theWorld, var3, var1);
+		float var14;
 		if(this.cloudFog) {
 			Vec3D var16 = var2.func_628_d(var1);
 			this.fogColorRed = (float)var16.xCoord;
 			this.fogColorGreen = (float)var16.yCoord;
 			this.fogColorBlue = (float)var16.zCoord;
-		} else if(var3.isInsideOfMaterial(Material.water)) {
-			this.fogColorRed = 0.02F;
-			this.fogColorGreen = 0.02F;
-			this.fogColorBlue = 0.2F;
-		} else if(var3.isInsideOfMaterial(Material.lava)) {
+		} else if(var21 != 0 && Block.blocksList[var21].blockMaterial == Material.water) {
+			this.mc.theWorld.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var3.posX), MathHelper.floor_double(var3.posZ), 1, 1);
+			int var16 = ColorizerWater.getWaterColor(this.mc.theWorld.getWorldChunkManager().temperature[0], this.mc.theWorld.getWorldChunkManager().humidity[0]);
+			var14 = 0.5F;
+			this.fogColorRed = (float)(var16 >> 16 & 255) / 255.0F * 0.15F * var14;
+			this.fogColorGreen = (float)(var16 >> 8 & 255) / 255.0F * 0.2F * var14;
+			this.fogColorBlue = (float)(var16 & 255) / 255.0F * 0.4F * var14;
+		} else if(var21 != 0 && Block.blocksList[var21].blockMaterial == Material.lava) {
 			this.fogColorRed = 0.6F;
 			this.fogColorGreen = 0.1F;
 			this.fogColorBlue = 0.0F;
@@ -839,9 +1076,21 @@
 		this.fogColorRed *= var12;
 		this.fogColorGreen *= var12;
 		this.fogColorBlue *= var12;
+		double var58 = (var3.lastTickPosY + (var3.posY - var3.lastTickPosY) * (double)var1) / 32.0D;
+		if(var58 < 1.0D) {
+			if(var58 < 0.0D) {
+				var58 = 0.0D;
+			}
+
+			var58 *= var58;
+			this.fogColorRed = (float)((double)this.fogColorRed * var58);
+			this.fogColorGreen = (float)((double)this.fogColorGreen * var58);
+			this.fogColorBlue = (float)((double)this.fogColorBlue * var58);
+		}
+
 		if(this.mc.gameSettings.anaglyph) {
 			float var13 = (this.fogColorRed * 30.0F + this.fogColorGreen * 59.0F + this.fogColorBlue * 11.0F) / 100.0F;
-			float var14 = (this.fogColorRed * 30.0F + this.fogColorGreen * 70.0F) / 100.0F;
+			var14 = (this.fogColorRed * 30.0F + this.fogColorGreen * 70.0F) / 100.0F;
 			float var15 = (this.fogColorRed * 30.0F + this.fogColorBlue * 70.0F) / 100.0F;
 			this.fogColorRed = var13;
 			this.fogColorGreen = var14;
@@ -853,68 +1102,102 @@
 
 	private void setupFog(int var1, float var2) {
 		EntityLiving var3 = this.mc.renderViewEntity;
-		GL11.glFog(GL11.GL_FOG_COLOR, this.func_908_a(this.fogColorRed, this.fogColorGreen, this.fogColorBlue, 1.0F));
-		GL11.glNormal3f(0.0F, -1.0F, 0.0F);
-		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
-		float var4;
-		float var5;
-		float var6;
-		float var7;
-		float var8;
-		float var9;
-		if(this.cloudFog) {
-			GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_EXP);
-			GL11.glFogf(GL11.GL_FOG_DENSITY, 0.1F);
-			var4 = 1.0F;
-			var5 = 1.0F;
-			var6 = 1.0F;
-			if(this.mc.gameSettings.anaglyph) {
-				var7 = (var4 * 30.0F + var5 * 59.0F + var6 * 11.0F) / 100.0F;
-				var8 = (var4 * 30.0F + var5 * 70.0F) / 100.0F;
-				var9 = (var4 * 30.0F + var6 * 70.0F) / 100.0F;
-			}
-		} else if(var3.isInsideOfMaterial(Material.water)) {
-			GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_EXP);
-			GL11.glFogf(GL11.GL_FOG_DENSITY, 0.1F);
-			var4 = 0.4F;
-			var5 = 0.4F;
-			var6 = 0.9F;
-			if(this.mc.gameSettings.anaglyph) {
-				var7 = (var4 * 30.0F + var5 * 59.0F + var6 * 11.0F) / 100.0F;
-				var8 = (var4 * 30.0F + var5 * 70.0F) / 100.0F;
-				var9 = (var4 * 30.0F + var6 * 70.0F) / 100.0F;
-			}
-		} else if(var3.isInsideOfMaterial(Material.lava)) {
-			GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_EXP);
-			GL11.glFogf(GL11.GL_FOG_DENSITY, 2.0F);
-			var4 = 0.4F;
-			var5 = 0.3F;
-			var6 = 0.3F;
-			if(this.mc.gameSettings.anaglyph) {
-				var7 = (var4 * 30.0F + var5 * 59.0F + var6 * 11.0F) / 100.0F;
-				var8 = (var4 * 30.0F + var5 * 70.0F) / 100.0F;
-				var9 = (var4 * 30.0F + var6 * 70.0F) / 100.0F;
-			}
-		} else {
+		if(var1 == 999) {
+			GL11.glFog(GL11.GL_FOG_COLOR, this.func_908_a(0.0F, 0.0F, 0.0F, 1.0F));
 			GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_LINEAR);
-			GL11.glFogf(GL11.GL_FOG_START, this.farPlaneDistance * 0.25F);
-			GL11.glFogf(GL11.GL_FOG_END, this.farPlaneDistance);
-			if(var1 < 0) {
-				GL11.glFogf(GL11.GL_FOG_START, 0.0F);
-				GL11.glFogf(GL11.GL_FOG_END, this.farPlaneDistance * 0.8F);
-			}
-
+			GL11.glFogf(GL11.GL_FOG_START, 0.0F);
+			GL11.glFogf(GL11.GL_FOG_END, 8.0F);
 			if(GLContext.getCapabilities().GL_NV_fog_distance) {
 				GL11.glFogi(NVFogDistance.GL_FOG_DISTANCE_MODE_NV, NVFogDistance.GL_EYE_RADIAL_NV);
 			}
 
-			if(this.mc.theWorld.worldProvider.isNether) {
-				GL11.glFogf(GL11.GL_FOG_START, 0.0F);
+			GL11.glFogf(GL11.GL_FOG_START, 0.0F);
+		} else {
+			GL11.glFog(GL11.GL_FOG_COLOR, this.func_908_a(this.fogColorRed, this.fogColorGreen, this.fogColorBlue, 1.0F));
+			GL11.glNormal3f(0.0F, -1.0F, 0.0F);
+			GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
+			int var4 = ActiveRenderInfo.func_41066_a(this.mc.theWorld, var3, var2);
+			float var5;
+			float var7;
+			float var8;
+			float var9;
+			float var10;
+			float var11;
+			if(this.cloudFog) {
+				GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_EXP);
+				GL11.glFogf(GL11.GL_FOG_DENSITY, 0.1F);
+				var5 = 1.0F;
+				var11 = 1.0F;
+				var7 = 1.0F;
+				if(this.mc.gameSettings.anaglyph) {
+					var8 = (var5 * 30.0F + var11 * 59.0F + var7 * 11.0F) / 100.0F;
+					var9 = (var5 * 30.0F + var11 * 70.0F) / 100.0F;
+					var10 = (var5 * 30.0F + var7 * 70.0F) / 100.0F;
+				}
+			} else if(var4 > 0 && Block.blocksList[var4].blockMaterial == Material.water) {
+				GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_EXP);
+				GL11.glFogf(GL11.GL_FOG_DENSITY, 0.05F);
+				var5 = 0.4F;
+				var11 = 0.4F;
+				var7 = 0.9F;
+				if(this.mc.gameSettings.anaglyph) {
+					var8 = (var5 * 30.0F + var11 * 59.0F + var7 * 11.0F) / 100.0F;
+					var9 = (var5 * 30.0F + var11 * 70.0F) / 100.0F;
+					var10 = (var5 * 30.0F + var7 * 70.0F) / 100.0F;
+				}
+			} else if(var4 > 0 && Block.blocksList[var4].blockMaterial == Material.lava) {
+				GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_EXP);
+				GL11.glFogf(GL11.GL_FOG_DENSITY, 2.0F);
+				var5 = 0.4F;
+				var11 = 0.3F;
+				var7 = 0.3F;
+				if(this.mc.gameSettings.anaglyph) {
+					var8 = (var5 * 30.0F + var11 * 59.0F + var7 * 11.0F) / 100.0F;
+					var9 = (var5 * 30.0F + var11 * 70.0F) / 100.0F;
+					var10 = (var5 * 30.0F + var7 * 70.0F) / 100.0F;
+				}
+			} else {
+				var5 = this.farPlaneDistance;
+				if(!this.mc.theWorld.worldProvider.hasNoSky) {
+					double var12 = (double)((var3.func_35115_a(var2) & 15728640) >> 20) / 16.0D + (var3.lastTickPosY + (var3.posY - var3.lastTickPosY) * (double)var2 + 4.0D) / 32.0D;
+					if(var12 < 1.0D) {
+						if(var12 < 0.0D) {
+							var12 = 0.0D;
+						}
+
+						var12 *= var12;
+						var8 = 100.0F * (float)var12;
+						if(var8 < 5.0F) {
+							var8 = 5.0F;
+						}
+
+						if(var5 > var8) {
+							var5 = var8;
+						}
+					}
+				}
+
+				GL11.glFogi(GL11.GL_FOG_MODE, GL11.GL_LINEAR);
+				if(var1 < 0) {
+					GL11.glFogf(GL11.GL_FOG_START, 0.0F);
+					GL11.glFogf(GL11.GL_FOG_END, var5 * 0.8F);
+				} else {
+					GL11.glFogf(GL11.GL_FOG_START, var5 * 0.25F);
+					GL11.glFogf(GL11.GL_FOG_END, var5);
+				}
+
+				if(GLContext.getCapabilities().GL_NV_fog_distance) {
+					GL11.glFogi(NVFogDistance.GL_FOG_DISTANCE_MODE_NV, NVFogDistance.GL_EYE_RADIAL_NV);
+				}
+
+				if(this.mc.theWorld.worldProvider.isNether) {
+					GL11.glFogf(GL11.GL_FOG_START, 0.0F);
+				}
 			}
+
+			GL11.glEnable(GL11.GL_COLOR_MATERIAL);
+			GL11.glColorMaterial(GL11.GL_FRONT, GL11.GL_AMBIENT);
 		}
-
-		GL11.glEnable(GL11.GL_COLOR_MATERIAL);
-		GL11.glColorMaterial(GL11.GL_FRONT, GL11.GL_AMBIENT);
 	}
 
 	private FloatBuffer func_908_a(float var1, float var2, float var3, float var4) {
--- net/minecraft/src/EntityArrow.java
+++ net/minecraft/src/EntityArrow.java
@@ -14,6 +14,7 @@
 	public EntityLiving owner;
 	private int ticksInGround;
 	private int ticksInAir = 0;
+	public boolean field_35140_d = false;
 
 	public EntityArrow(World var1) {
 		super(var1);
@@ -27,7 +28,7 @@
 		this.yOffset = 0.0F;
 	}
 
-	public EntityArrow(World var1, EntityLiving var2) {
+	public EntityArrow(World var1, EntityLiving var2, float var3) {
 		super(var1);
 		this.owner = var2;
 		this.doesArrowBelongToPlayer = var2 instanceof EntityPlayer;
@@ -41,7 +42,7 @@
 		this.motionX = (double)(-MathHelper.sin(this.rotationYaw / 180.0F * (float)Math.PI) * MathHelper.cos(this.rotationPitch / 180.0F * (float)Math.PI));
 		this.motionZ = (double)(MathHelper.cos(this.rotationYaw / 180.0F * (float)Math.PI) * MathHelper.cos(this.rotationPitch / 180.0F * (float)Math.PI));
 		this.motionY = (double)(-MathHelper.sin(this.rotationPitch / 180.0F * (float)Math.PI));
-		this.setArrowHeading(this.motionX, this.motionY, this.motionZ, 1.5F, 1.0F);
+		this.setArrowHeading(this.motionX, this.motionY, this.motionZ, var3 * 1.5F, 1.0F);
 	}
 
 	protected void entityInit() {
@@ -136,8 +137,9 @@
 			List var5 = this.worldObj.getEntitiesWithinAABBExcludingEntity(this, this.boundingBox.addCoord(this.motionX, this.motionY, this.motionZ).expand(1.0D, 1.0D, 1.0D));
 			double var6 = 0.0D;
 
+			int var8;
 			float var10;
-			for(int var8 = 0; var8 < var5.size(); ++var8) {
+			for(var8 = 0; var8 < var5.size(); ++var8) {
 				Entity var9 = (Entity)var5.get(var8);
 				if(var9.canBeCollidedWith() && (var9 != this.owner || this.ticksInAir >= 5)) {
 					var10 = 0.3F;
@@ -160,10 +162,20 @@
 			float var19;
 			if(var3 != null) {
 				if(var3.entityHit != null) {
-					if(var3.entityHit.attackEntityFrom(this.owner, 4)) {
-						this.worldObj.playSoundAtEntity(this, "random.drr", 1.0F, 1.2F / (this.rand.nextFloat() * 0.2F + 0.9F));
-						this.setEntityDead();
-					} else {
+					var19 = MathHelper.sqrt_double(this.motionX * this.motionX + this.motionY * this.motionY + this.motionZ * this.motionZ);
+					int var20 = (int)Math.ceil((double)var19 * 2.0D);
+					if(this.field_35140_d) {
+						var20 = var20 * 3 / 2 + 1;
+					}
+
+					if(var3.entityHit.attackEntityFrom(this.owner, var20)) {
+						if(var3.entityHit instanceof EntityLiving) {
+							++((EntityLiving)var3.entityHit).field_35172_bP;
+						}
+
+ 						this.worldObj.playSoundAtEntity(this, "random.drr", 1.0F, 1.2F / (this.rand.nextFloat() * 0.2F + 0.9F));
+ 						this.setEntityDead();
+ 					} else {
 						this.motionX *= (double)-0.1F;
 						this.motionY *= (double)-0.1F;
 						this.motionZ *= (double)-0.1F;
@@ -187,8 +199,15 @@
 					this.worldObj.playSoundAtEntity(this, "random.drr", 1.0F, 1.2F / (this.rand.nextFloat() * 0.2F + 0.9F));
 					this.inGround = true;
 					this.arrowShake = 7;
+					this.field_35140_d = false;
 				}
 			}
+
+			if(this.field_35140_d) {
+				for(var8 = 0; var8 < 4; ++var8) {
+					this.worldObj.spawnParticle("crit", this.posX + this.motionX * (double)var8 / 4.0D, this.posY + this.motionY * (double)var8 / 4.0D, this.posZ + this.motionZ * (double)var8 / 4.0D, -this.motionX, -this.motionY + 0.2D, -this.motionZ);
+ 				}
+ 			}
 
 			this.posX += this.motionX;
 			this.posY += this.motionY;
--- net/minecraft/src/ModelSheep2.java
+++ net/minecraft/src/ModelSheep2.java
@@ -3,10 +3,10 @@
 public class ModelSheep2 extends ModelQuadruped {
 	public ModelSheep2() {
 		super(12, 0.0F);
-		this.head = new ModelRenderer(0, 0);
+		this.head = new ModelRenderer(this, 0, 0);
 		this.head.addBox(-3.0F, -4.0F, -6.0F, 6, 6, 8, 0.0F);
 		this.head.setRotationPoint(0.0F, 6.0F, -8.0F);
-		this.body = new ModelRenderer(28, 8);
+		this.body = new ModelRenderer(this, 28, 8);
 		this.body.addBox(-4.0F, -10.0F, -7.0F, 8, 16, 6, 0.0F);
 		this.body.setRotationPoint(0.0F, 5.0F, 2.0F);
 	}
--- net/minecraft/src/GuiMainMenu.java
+++ net/minecraft/src/GuiMainMenu.java
@@ -74,6 +74,14 @@
 			this.multiplayerButton.enabled = false;
 		}
 
+		if(this.mc.theWorld == null || !this.mc.theWorld.isTitle()) {
+			this.mc.playerController = new PlayerControllerTest(this.mc);
+			LoadingScreenRenderer loadingScreen = this.mc.loadingScreen;
+			this.mc.loadingScreen = null;
+			this.mc.startTitleWorld("panorama", "Title", 2151901553968352745L);
+			this.mc.loadingScreen = loadingScreen;
+			this.mc.sndManager.playTitleMusicIfReady();
+		}
 	}
 
 	protected void actionPerformed(GuiButton var1) {
@@ -100,7 +108,12 @@
 	}
 
 	public void drawScreen(int var1, int var2, float var3) {
-		this.drawDefaultBackground();
+		if(this.mc.entityRenderer != null) {
+			this.mc.entityRenderer.panoramaTimer = this.updateCounter + 1.0F * var3;
+			this.drawGradientRect(0, 0, this.width, this.height, -2130706433, 0xFFFFFF);
+			this.drawGradientRect(0, 0, this.width, this.height, 0, Integer.MIN_VALUE);
+		}
+
 		Tessellator var4 = Tessellator.instance;
 		short var5 = 274;
 		int var6 = this.width / 2 - var5 / 2;
@@ -118,7 +131,7 @@
 		GL11.glScalef(var8, var8, var8);
 		this.drawCenteredString(this.fontRenderer, this.splashText, 0, -8, 16776960);
 		GL11.glPopMatrix();
-		this.drawString(this.fontRenderer, "Minecraft Beta 1.7.3", 2, 2, 5263440);
+		this.drawString(this.fontRenderer, "Minecraft Beta 1.7.3_01", 2, this.height - 10, 16777215);
 		String var9 = "Copyright Mojang AB. Do not distribute.";
 		this.drawString(this.fontRenderer, var9, this.width - this.fontRenderer.getStringWidth(var9) - 2, this.height - 10, 16777215);
 		super.drawScreen(var1, var2, var3);
--- net/minecraft/src/ChunkCache.java
+++ net/minecraft/src/ChunkCache.java
@@ -54,6 +54,16 @@
 		return this.worldObj.worldProvider.lightBrightnessTable[var5];
 	}
 
+	public int func_35451_b(int var1, int var2, int var3, int var4) {
+		int var5 = this.func_35454_a(EnumSkyBlock.Sky, var1, var2, var3);
+		int var6 = this.func_35454_a(EnumSkyBlock.Block, var1, var2, var3);
+		if(var6 < var4) {
+			var6 = var4;
+		}
+
+		return var5 << 20 | var6 << 4;
+	}
+
 	public float getLightBrightness(int var1, int var2, int var3) {
 		return this.worldObj.worldProvider.lightBrightnessTable[this.getLightValue(var1, var2, var3)];
 	}
@@ -142,5 +152,78 @@
 	public boolean isBlockNormalCube(int var1, int var2, int var3) {
 		Block var4 = Block.blocksList[this.getBlockId(var1, var2, var3)];
 		return var4 == null ? false : var4.blockMaterial.getIsSolid() && var4.renderAsNormalBlock();
+	}
+
+	public int func_35454_a(EnumSkyBlock var1, int var2, int var3, int var4) {
+		if(var3 < 0) {
+			var3 = 0;
+		}
+
+		this.worldObj.getClass();
+		if(var3 >= 128) {
+			this.worldObj.getClass();
+			var3 = 128 - 1;
+		}
+
+		if(var3 >= 0) {
+			this.worldObj.getClass();
+			if(var3 < 128 && var2 >= -30000000 && var4 >= -30000000 && var2 < 30000000 && var4 <= 30000000) {
+				int var5 = this.getBlockId(var2, var3, var4);
+				int var6;
+				if(var5 != Block.stairSingle.blockID && var5 != Block.tilledField.blockID && var5 != Block.stairCompactCobblestone.blockID && var5 != Block.stairCompactPlanks.blockID) {
+					var5 = (var2 >> 4) - this.chunkX;
+					var6 = (var4 >> 4) - this.chunkZ;
+					return this.chunkArray[var5][var6].getSavedLightValue(var1, var2 & 15, var3, var4 & 15);
+				}
+
+				var6 = this.func_35453_b(var1, var2, var3 + 1, var4);
+				int var7 = this.func_35453_b(var1, var2 + 1, var3, var4);
+				int var8 = this.func_35453_b(var1, var2 - 1, var3, var4);
+				int var9 = this.func_35453_b(var1, var2, var3, var4 + 1);
+				int var10 = this.func_35453_b(var1, var2, var3, var4 - 1);
+				if(var7 > var6) {
+					var6 = var7;
+				}
+
+				if(var8 > var6) {
+					var6 = var8;
+				}
+
+				if(var9 > var6) {
+					var6 = var9;
+				}
+
+				if(var10 > var6) {
+					var6 = var10;
+				}
+
+				return var6;
+			}
+		}
+
+		return var1.field_1722_c;
+	}
+
+	public int func_35453_b(EnumSkyBlock var1, int var2, int var3, int var4) {
+		if(var3 < 0) {
+			var3 = 0;
+		}
+
+		this.worldObj.getClass();
+		if(var3 >= 128) {
+			this.worldObj.getClass();
+			var3 = 128 - 1;
+		}
+
+		if(var3 >= 0) {
+			this.worldObj.getClass();
+			if(var3 < 128 && var2 >= -30000000 && var4 >= -30000000 && var2 < 30000000 && var4 <= 30000000) {
+				int var5 = (var2 >> 4) - this.chunkX;
+				int var6 = (var4 >> 4) - this.chunkZ;
+				return this.chunkArray[var5][var6].getSavedLightValue(var1, var2 & 15, var3, var4 & 15);
+			}
+		}
+
+		return var1.field_1722_c;
 	}
 }
--- net/minecraft/src/MouseHelper.java
+++ net/minecraft/src/MouseHelper.java
@@ -5,6 +5,7 @@
 import org.lwjgl.LWJGLException;
 import org.lwjgl.input.Cursor;
 import org.lwjgl.input.Mouse;
+import org.lwjgl.opengl.Display;
 
 public class MouseHelper {
 	private Component field_1117_c;
@@ -35,7 +36,12 @@
 	}
 
 	public void ungrabMouseCursor() {
-		Mouse.setCursorPosition(this.field_1117_c.getWidth() / 2, this.field_1117_c.getHeight() / 2);
+		if(Display.isFullscreen()) {
+			Mouse.setCursorPosition(Display.getDisplayMode().getWidth() / 2, Display.getDisplayMode().getHeight() / 2);
+		} else {
+			Mouse.setCursorPosition(this.field_1117_c.getWidth() / 2, this.field_1117_c.getHeight() / 2);
+		}
+		
 		Mouse.setGrabbed(false);
 	}
 
--- net/minecraft/src/RenderManager.java
+++ net/minecraft/src/RenderManager.java
@@ -104,8 +104,11 @@
 		double var5 = var1.lastTickPosY + (var1.posY - var1.lastTickPosY) * (double)var2;
 		double var7 = var1.lastTickPosZ + (var1.posZ - var1.lastTickPosZ) * (double)var2;
 		float var9 = var1.prevRotationYaw + (var1.rotationYaw - var1.prevRotationYaw) * var2;
-		float var10 = var1.getEntityBrightness(var2);
-		GL11.glColor3f(var10, var10, var10);
+		int var10 = var1.func_35115_a(var2);
+		int var11 = var10 % 65536;
+		int var12 = var10 / 65536;
+		OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapEnabled, (float)var11 / 1.0F, (float)var12 / 1.0F);
+		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 		this.renderEntityWithPosYaw(var1, var3 - renderPosX, var5 - renderPosY, var7 - renderPosZ, var9, var2);
 	}
 
--- net/minecraft/src/GuiSlotStats.java
+++ net/minecraft/src/GuiSlotStats.java
@@ -155,13 +155,41 @@
 	protected void func_27267_a(StatCrafting var1, int var2, int var3) {
 		if(var1 != null) {
 			Item var4 = Item.itemsList[var1.func_25072_b()];
-			String var5 = ("" + StringTranslate.getInstance().translateNamedKey(var4.getItemName())).trim();
-			if(var5.length() > 0) {
+			StringTranslate language = StringTranslate.getInstance();
+			String descriptionId = var4.getItemName();
+			String var5 = ("" + language.translateNamedKey(descriptionId)).trim();
+			String elementDescription = ("" + language.getElementDescription(descriptionId)).trim();
+			if(var5.length() > 0 || elementDescription.length() > 0) {
 				int var6 = var2 + 12;
 				int var7 = var3 - 12;
-				int var8 = GuiStats.func_27127_n(this.field_27269_g).getStringWidth(var5);
-				GuiStats.func_27135_b(this.field_27269_g, var6 - 3, var7 - 3, var6 + var8 + 3, var7 + 8 + 3, -1073741824, -1073741824);
-				GuiStats.func_27131_o(this.field_27269_g).drawStringWithShadow(var5, var6, var7, -1);
+				int var8;
+				if(var5.length() > 0) {
+					var8 = GuiStats.func_27127_n(this.field_27269_g).getStringWidth(var5);
+					if(elementDescription.length() > 0) {
+						if(var8 < 120) {
+							var8 = 120;
+						}
+
+						GuiStats.func_27135_b(this.field_27269_g, var6 - 3, var7 - 3, var6 + var8 + 3, var7 + GuiStats.func_27127_n(this.field_27269_g).func_27277_a(elementDescription, var8) + 3 + 12, 0xC0000000, 0xC0000000);
+					} else {
+						GuiStats.func_27135_b(this.field_27269_g, var6 - 3, var7 - 3, var6 + var8 + 3, var7 + 8 + 3, 0xC0000000, 0xC0000000);
+					}
+				} else {
+					var8 = 120;
+					GuiStats.func_27135_b(this.field_27269_g, var6 - 3, var7 - 3, var6 + var8 + 3, var7 + GuiStats.func_27127_n(this.field_27269_g).func_27277_a(elementDescription, var8) + 3, 0xC0000000, 0xC0000000);
+				}
+
+				if(elementDescription.length() > 0) {
+					if(var5.length() > 0) {
+						GuiStats.func_27131_o(this.field_27269_g).func_27278_a(elementDescription, var6, var7 + 12, var8, 0xFFA0A0A0);
+					} else {
+						GuiStats.func_27131_o(this.field_27269_g).func_27278_a(elementDescription, var6, var7, var8, 0xFFA0A0A0);
+					}
+				}
+
+				if(var5.length() > 0) {
+					GuiStats.func_27131_o(this.field_27269_g).drawStringWithShadow(var5, var6, var7, 0xFFFFFFFF);
+				}
 			}
 
 		}
--- net/minecraft/src/RenderPlayer.java
+++ net/minecraft/src/RenderPlayer.java
@@ -39,6 +39,13 @@
 	public void renderPlayer(EntityPlayer var1, double var2, double var4, double var6, float var8, float var9) {
 		ItemStack var10 = var1.inventory.getCurrentItem();
 		this.modelArmorChestplate.field_1278_i = this.modelArmor.field_1278_i = this.modelBipedMain.field_1278_i = var10 != null;
+		if(var10 != null && var1.getItemInUseCount() > 0) {
+			EnumAction var11 = var10.getItemUseAction();
+			if(var11 == EnumAction.bow) {
+				this.modelArmorChestplate.field_40333_u = this.modelArmor.field_40333_u = this.modelBipedMain.field_40333_u = true;
+			}
+		}
+
 		this.modelArmorChestplate.isSneak = this.modelArmor.isSneak = this.modelBipedMain.isSneak = var1.isSneaking();
 		double var11 = var4 - (double)var1.yOffset;
 		if(var1.isSneaking() && !(var1 instanceof EntityPlayerSP)) {
@@ -46,6 +53,7 @@
 		}
 
 		super.doRenderLiving(var1, var2, var11, var6, var8, var9);
+		this.modelArmorChestplate.field_40333_u = this.modelArmor.field_40333_u = this.modelBipedMain.field_40333_u = false;
 		this.modelArmorChestplate.isSneak = this.modelArmor.isSneak = this.modelBipedMain.isSneak = false;
 		this.modelArmorChestplate.field_1278_i = this.modelArmor.field_1278_i = this.modelBipedMain.field_1278_i = false;
 	}
@@ -101,6 +109,7 @@
 	}
 
 	protected void renderSpecials(EntityPlayer var1, float var2) {
+		super.renderEquippedItems(var1, var2);
 		ItemStack var3 = var1.inventory.armorItemInSlot(3);
 		if(var3 != null && var3.getItem().shiftedIndex < 256) {
 			GL11.glPushMatrix();
@@ -189,6 +198,13 @@
 				GL11.glRotatef(20.0F, 1.0F, 0.0F, 0.0F);
 				GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
 				GL11.glScalef(var5, -var5, var5);
+			} else if(var21.itemID == Item.bow.shiftedIndex) {
+				var5 = 10.0F / 16.0F;
+				GL11.glTranslatef(0.0F, 2.0F / 16.0F, 5.0F / 16.0F);
+				GL11.glRotatef(-20.0F, 0.0F, 1.0F, 0.0F);
+				GL11.glScalef(var5, -var5, var5);
+				GL11.glRotatef(-100.0F, 1.0F, 0.0F, 0.0F);
+				GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
 			} else if(Item.itemsList[var21.itemID].isFull3D()) {
 				var5 = 10.0F / 16.0F;
 				if(Item.itemsList[var21.itemID].shouldRotateAroundWhenRendering()) {
--- net/minecraft/src/GuiIngame.java
+++ net/minecraft/src/GuiIngame.java
@@ -32,6 +32,10 @@
 		FontRenderer var8 = this.mc.fontRenderer;
 		this.mc.entityRenderer.func_905_b();
 		GL11.glEnable(GL11.GL_BLEND);
+		if(this.mc.theWorld.isTitle()) {
+			return;
+		}
+
 		if(Minecraft.isFancyGraphicsEnabled()) {
 			this.renderVignette(this.mc.thePlayer.getEntityBrightness(var1), var6, var7);
 		}
@@ -50,8 +54,8 @@
 		GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.mc.renderEngine.getTexture("/gui/gui.png"));
 		InventoryPlayer var11 = this.mc.thePlayer.inventory;
 		this.zLevel = -90.0F;
-		this.drawTexturedModalRect(var6 / 2 - 91, var7 - 22, 0, 0, 182, 22);
-		this.drawTexturedModalRect(var6 / 2 - 91 - 1 + var11.currentItem * 20, var7 - 22 - 1, 0, 22, 24, 22);
+		this.drawTexturedModalRect(var6 / 2 - 91, var7 - 23, 0, 0, 182, 22);
+		this.drawTexturedModalRect(var6 / 2 - 91 - 1 + var11.currentItem * 20, var7 - 23 - 1, 0, 22, 24, 24);
 		GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.mc.renderEngine.getTexture("/gui/icons.png"));
 		GL11.glEnable(GL11.GL_BLEND);
 		GL11.glBlendFunc(GL11.GL_ONE_MINUS_DST_COLOR, GL11.GL_ONE_MINUS_SRC_COLOR);
@@ -73,7 +77,7 @@
 
 			int var18;
 			for(var16 = 0; var16 < 10; ++var16) {
-				var17 = var7 - 32;
+				var17 = var7 - 33;
 				if(var15 > 0) {
 					var18 = var6 / 2 + 91 - var16 * 8 - 9;
 					if(var16 * 2 + 1 < var15) {
@@ -125,9 +129,9 @@
 
 				for(var18 = 0; var18 < var16 + var17; ++var18) {
 					if(var18 < var16) {
-						this.drawTexturedModalRect(var6 / 2 - 91 + var18 * 8, var7 - 32 - 9, 16, 18, 9, 9);
+						this.drawTexturedModalRect(var6 / 2 - 91 + var18 * 8, var7 - 33 - 9, 16, 18, 9, 9);
 					} else {
-						this.drawTexturedModalRect(var6 / 2 - 91 + var18 * 8, var7 - 32 - 9, 25, 18, 9, 9);
+						this.drawTexturedModalRect(var6 / 2 - 91 + var18 * 8, var7 - 33 - 9, 25, 18, 9, 9);
 					}
 				}
 			}
@@ -135,14 +139,11 @@
 
 		GL11.glDisable(GL11.GL_BLEND);
 		GL11.glEnable(GL12.GL_RESCALE_NORMAL);
-		GL11.glPushMatrix();
-		GL11.glRotatef(120.0F, 1.0F, 0.0F, 0.0F);
-		RenderHelper.enableStandardItemLighting();
-		GL11.glPopMatrix();
+		RenderHelper.func_41089_c();
 
 		for(var15 = 0; var15 < 9; ++var15) {
 			var16 = var6 / 2 - 90 + var15 * 20 + 2;
-			var17 = var7 - 16 - 3;
+			var17 = var7 - 17 - 3;
 			this.renderInventorySlot(var15, var16, var17, var1);
 		}
 
@@ -170,7 +171,7 @@
 				GL11.glTranslatef(0.0F, 32.0F, 0.0F);
 			}
 
-			var8.drawStringWithShadow("Minecraft Beta 1.7.3 (" + this.mc.debug + ")", 2, 2, 16777215);
+			var8.drawStringWithShadow("Minecraft Beta 1.7.3_01 (" + this.mc.debug + ")", 2, 2, 16777215);
 			var8.drawStringWithShadow(this.mc.func_6241_m(), 2, 12, 16777215);
 			var8.drawStringWithShadow(this.mc.func_6262_n(), 2, 22, 16777215);
 			var8.drawStringWithShadow(this.mc.func_6245_o(), 2, 32, 16777215);
@@ -267,7 +268,7 @@
 		GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
 		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 		GL11.glDisable(GL11.GL_ALPHA_TEST);
-		GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.mc.renderEngine.getTexture("%blur%/misc/pumpkinblur.png"));
+		GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.mc.renderEngine.getTexture("/misc/pumpkinblur.png"));
 		Tessellator var3 = Tessellator.instance;
 		var3.startDrawingQuads();
 		var3.addVertexWithUV(0.0D, (double)var2, -90.0D, 0.0D, 1.0D);
@@ -352,7 +353,7 @@
 				GL11.glTranslatef((float)(-(var2 + 8)), (float)(-(var3 + 12)), 0.0F);
 			}
 
-			itemRenderer.renderItemIntoGUI(this.mc.fontRenderer, this.mc.renderEngine, var5, var2, var3);
+			itemRenderer.renderItemIntoGUI(this.mc.fontRenderer, this.mc.renderEngine, var5, var2, var3, this.mc.thePlayer);
 			if(var6 > 0.0F) {
 				GL11.glPopMatrix();
 			}
--- net/minecraft/src/RenderCreeper.java
+++ net/minecraft/src/RenderCreeper.java
@@ -1,6 +1,7 @@
 package net.minecraft.src;
 
 import org.lwjgl.opengl.GL11;
+import org.lwjgl.opengl.GL12;
 
 public class RenderCreeper extends RenderLiving {
 	private ModelBase field_27008_a = new ModelCreeper(2.0F);
@@ -83,6 +84,112 @@
 	protected boolean func_27007_b(EntityCreeper var1, int var2, float var3) {
 		return false;
 	}
+
+	public void doRenderLiving(EntityLiving var1, double var2, double var4, double var6, float var8, float var9) {
+		GL11.glPushMatrix();
+		GL11.glDisable(GL11.GL_CULL_FACE);
+		this.mainModel.onGround = this.func_167_c(var1, var9);
+		if(this.renderPassModel != null) {
+			this.renderPassModel.onGround = this.mainModel.onGround;
+		}
+
+		this.mainModel.isRiding = var1.isRiding();
+		if(this.renderPassModel != null) {
+			this.renderPassModel.isRiding = this.mainModel.isRiding;
+		}
+
+		try {
+			float var10 = var1.prevRenderYawOffset + (var1.renderYawOffset - var1.prevRenderYawOffset) * var9;
+			float var11 = var1.prevRotationYaw + (var1.rotationYaw - var1.prevRotationYaw) * var9;
+			float var12 = var1.prevRotationPitch + (var1.rotationPitch - var1.prevRotationPitch) * var9;
+			this.func_22012_b(var1, var2, var4, var6);
+			float var13 = this.func_170_d(var1, var9);
+			this.rotateCorpse(var1, var13, var10, var9);
+			float var14 = 1.0F / 16.0F;
+			GL11.glEnable(GL12.GL_RESCALE_NORMAL);
+			GL11.glScalef(-1.0F, -1.0F, 1.0F);
+			this.preRenderCallback(var1, var9);
+			GL11.glTranslatef(0.0F, -24.0F * var14 - 0.0078125F, 0.0F);
+			float var15 = var1.field_705_Q + (var1.field_704_R - var1.field_705_Q) * var9;
+			float var16 = var1.field_703_S - var1.field_704_R * (1.0F - var9);
+			if(var15 > 1.0F) {
+				var15 = 1.0F;
+			}
+
+			this.loadDownloadableImageTexture(var1.skinUrl, var1.getEntityTexture());
+			GL11.glEnable(GL11.GL_ALPHA_TEST);
+			float var25 = var1.getEntityBrightness(var9);
+			var1.worldObj.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var1.posX), MathHelper.floor_double(var1.posZ), 1, 1);
+			int c = ColorizerFoliage.getFoliageColor(var1.worldObj.getWorldChunkManager().temperature[0], var1.worldObj.getWorldChunkManager().humidity[0]);
+			float r = var25 * ((float)(c >> 16 & 255) / 255.0F);
+			float g = var25 * ((float)(c >> 8 & 255) / 255.0F);
+			float b = var25 * ((float)(c & 255) / 255.0F);
+			GL11.glColor3f(r, g, b);
+			this.mainModel.setLivingAnimations(var1, var16, var15, var9);
+			this.mainModel.render(var16, var15, var13, var11 - var10, var12, var14);
+
+			for(int var17 = 0; var17 < 4; ++var17) {
+				if(this.shouldRenderPass(var1, var17, var9)) {
+					this.renderPassModel.setLivingAnimations(var1, var16, var15, var9);
+					this.renderPassModel.render(var16, var15, var13, var11 - var10, var12, var14);
+					GL11.glDisable(GL11.GL_BLEND);
+					GL11.glEnable(GL11.GL_ALPHA_TEST);
+				}
+			}
+
+			this.renderEquippedItems(var1, var9);
+			int var18 = this.getColorMultiplier(var1, var25, var9);
+			if((var18 >> 24 & 255) > 0 || var1.hurtTime > 0 || var1.deathTime > 0) {
+				GL11.glDisable(GL11.GL_TEXTURE_2D);
+				GL11.glDisable(GL11.GL_ALPHA_TEST);
+				GL11.glEnable(GL11.GL_BLEND);
+				GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
+				GL11.glDepthFunc(GL11.GL_EQUAL);
+				if(var1.hurtTime > 0 || var1.deathTime > 0) {
+					GL11.glColor3f(r, g, b);
+					GL11.glColor4f(var25, 0.0F, 0.0F, 0.4F);
+					this.mainModel.render(var16, var15, var13, var11 - var10, var12, var14);
+
+					for(int var19 = 0; var19 < 4; ++var19) {
+						if(this.func_27005_b(var1, var19, var9)) {
+							GL11.glColor4f(var25, 0.0F, 0.0F, 0.4F);
+							this.renderPassModel.render(var16, var15, var13, var11 - var10, var12, var14);
+						}
+					}
+				}
+
+				if((var18 >> 24 & 255) > 0) {
+					GL11.glColor3f(r, g, b);
+					float var26 = (float)(var18 >> 16 & 255) / 255.0F;
+					float var20 = (float)(var18 >> 8 & 255) / 255.0F;
+					float var21 = (float)(var18 & 255) / 255.0F;
+					float var22 = (float)(var18 >> 24 & 255) / 255.0F;
+					GL11.glColor4f(var26, var20, var21, var22);
+					this.mainModel.render(var16, var15, var13, var11 - var10, var12, var14);
+
+					for(int var23 = 0; var23 < 4; ++var23) {
+						if(this.func_27005_b(var1, var23, var9)) {
+							GL11.glColor4f(var26, var20, var21, var22);
+							this.renderPassModel.render(var16, var15, var13, var11 - var10, var12, var14);
+						}
+					}
+				}
+
+				GL11.glDepthFunc(GL11.GL_LEQUAL);
+				GL11.glDisable(GL11.GL_BLEND);
+				GL11.glEnable(GL11.GL_ALPHA_TEST);
+				GL11.glEnable(GL11.GL_TEXTURE_2D);
+			}
+
+			GL11.glDisable(GL12.GL_RESCALE_NORMAL);
+		} catch (Exception var24) {
+			var24.printStackTrace();
+		}
+
+		GL11.glEnable(GL11.GL_CULL_FACE);
+		GL11.glPopMatrix();
+		this.passSpecialRender(var1, var2, var4, var6);
+ 	}
 
 	protected void preRenderCallback(EntityLiving var1, float var2) {
 		this.updateCreeperScale((EntityCreeper)var1, var2);
--- net/minecraft/src/TileEntityFurnace.java
+++ net/minecraft/src/TileEntityFurnace.java
@@ -116,6 +116,12 @@
 					var2 = true;
 					if(this.furnaceItemStacks[1] != null) {
 						--this.furnaceItemStacks[1].stackSize;
+
+						if(this.furnaceItemStacks[1].itemID == Item.bucketLava.shiftedIndex) {
+							this.furnaceItemStacks[1].itemID = Item.bucketEmpty.shiftedIndex;
+							this.furnaceItemStacks[1].stackSize = 1;
+						}
+
 						if(this.furnaceItemStacks[1].stackSize == 0) {
 							this.furnaceItemStacks[1] = null;
 						}
--- net/minecraft/src/WorldProvider.java
+++ net/minecraft/src/WorldProvider.java
@@ -40,8 +40,9 @@
 	}
 
 	public float calculateCelestialAngle(long var1, float var3) {
-		int var4 = (int)(var1 % 24000L);
-		float var5 = ((float)var4 + var3) / 24000.0F - 0.25F;
+		float var7 = this.worldObj.isTitle() ? 24000L / 10.0F : 24000L;
+		int var4 = (int)(var1 % (long)var7);
+		float var5 = ((float)var4 + var3) / var7 - 0.25F;
 		if(var5 < 0.0F) {
 			++var5;
 		}
@@ -54,6 +55,10 @@
 		var5 = 1.0F - (float)((Math.cos((double)var5 * Math.PI) + 1.0D) / 2.0D);
 		var5 = var6 + (var5 - var6) / 3.0F;
 		return var5;
+	}
+
+	public int func_40470_b(long var1, float var3) {
+		return (int)(var1 / 24000L) % 8;
 	}
 
 	public float[] calcSunriseSunsetColors(float var1, float var2) {
--- /dev/null
+++ net/minecraft/src/WorldTitle.java
@@ -1,0 +1,11 @@
+package net.minecraft.src;
+
+public class WorldTitle extends World {
+	public WorldTitle(ISaveHandler var1, String var2, long var3) {
+		super(var1, var2, var3);
+	}
+
+	public boolean isTitle() {
+		return !this.multiplayerWorld;
+	}
+}
--- net/minecraft/src/EntityFlameFX.java
+++ net/minecraft/src/EntityFlameFX.java
@@ -24,6 +24,27 @@
 		super.renderParticle(var1, var2, var3, var4, var5, var6, var7);
 	}
 
+	public int func_35115_a(float var1) {
+		float var2 = ((float)this.particleAge + var1) / (float)this.particleMaxAge;
+		if(var2 < 0.0F) {
+			var2 = 0.0F;
+		}
+
+		if(var2 > 1.0F) {
+			var2 = 1.0F;
+		}
+
+		int var3 = super.func_35115_a(var1);
+		int var4 = var3 & 255;
+		int var5 = var3 >> 16 & 255;
+		var4 += (int)(var2 * 15.0F * 16.0F);
+		if(var4 > 240) {
+			var4 = 240;
+		}
+
+		return var4 | var5 << 16;
+	}
+
 	public float getEntityBrightness(float var1) {
 		float var2 = ((float)this.particleAge + var1) / (float)this.particleMaxAge;
 		if(var2 < 0.0F) {
--- net/minecraft/src/TextureWaterFX.java
+++ net/minecraft/src/TextureWaterFX.java
@@ -62,8 +62,8 @@
 			}
 
 			float var13 = var3 * var3;
-			var5 = (int)(32.0F + var13 * 32.0F);
-			var6 = (int)(50.0F + var13 * 64.0F);
+			var5 = (int)(111.0F + var13 * 76.0F);
+			var6 = (int)(139.0F + var13 * 116.0F);
 			int var7 = 255;
 			int var8 = (int)(146.0F + var13 * 50.0F);
 			if(this.anaglyphEnabled) {
--- net/minecraft/src/SignModel.java
+++ net/minecraft/src/SignModel.java
@@ -1,12 +1,12 @@
 package net.minecraft.src;
 
-public class SignModel {
-	public ModelRenderer signBoard = new ModelRenderer(0, 0);
+public class SignModel extends ModelBase {
+	public ModelRenderer signBoard = new ModelRenderer(this, 0, 0);
 	public ModelRenderer signStick;
 
 	public SignModel() {
 		this.signBoard.addBox(-12.0F, -14.0F, -1.0F, 24, 12, 2, 0.0F);
-		this.signStick = new ModelRenderer(0, 14);
+		this.signStick = new ModelRenderer(this, 0, 14);
 		this.signStick.addBox(-1.0F, -2.0F, -1.0F, 2, 14, 2, 0.0F);
 	}
 
--- net/minecraft/src/EntityBoat.java
+++ net/minecraft/src/EntityBoat.java
@@ -71,15 +71,7 @@
 					this.riddenByEntity.mountEntity(this);
 				}
 
-				int var3;
-				for(var3 = 0; var3 < 3; ++var3) {
-					this.dropItemWithOffset(Block.planks.blockID, 1, 0.0F);
-				}
-
-				for(var3 = 0; var3 < 2; ++var3) {
-					this.dropItemWithOffset(Item.stick.shiftedIndex, 1, 0.0F);
-				}
-
+				this.dropItem(Item.boat.shiftedIndex, 1);
 				this.setEntityDead();
 			}
 
@@ -234,11 +226,11 @@
 					if(this.rand.nextBoolean()) {
 						var17 = this.posX - var8 * var13 * 0.8D + var10 * var15;
 						var19 = this.posZ - var10 * var13 * 0.8D - var8 * var15;
-						this.worldObj.spawnParticle("splash", var17, this.posY - 0.125D, var19, this.motionX, this.motionY, this.motionZ);
+						this.worldObj.spawnParticle("largesplash", var17, this.posY - 0.125D, var19, this.motionX, this.motionY, this.motionZ);
 					} else {
 						var17 = this.posX + var8 + var10 * var13 * 0.7D;
 						var19 = this.posZ + var10 - var8 * var13 * 0.7D;
-						this.worldObj.spawnParticle("splash", var17, this.posY - 0.125D, var19, this.motionX, this.motionY, this.motionZ);
+						this.worldObj.spawnParticle("largesplash", var17, this.posY - 0.125D, var19, this.motionX, this.motionY, this.motionZ);
 					}
 				}
 			}
--- net/minecraft/src/IBlockAccess.java
+++ net/minecraft/src/IBlockAccess.java
@@ -5,6 +5,8 @@
 
 	TileEntity getBlockTileEntity(int var1, int var2, int var3);
 
+	int func_35451_b(int var1, int var2, int var3, int var4);
+
 	float getBrightness(int var1, int var2, int var3, int var4);
 
 	float getLightBrightness(int var1, int var2, int var3);
--- net/minecraft/src/MusInputStream.java
+++ net/minecraft/src/MusInputStream.java
@@ -15,7 +15,7 @@
 		this.buffer = new byte[1];
 		this.inputStream = var3;
 		String var4 = var2.getPath();
-		var4 = var4.substring(var4.lastIndexOf("/") + 1);
+		var4 = var4.substring(var4.lastIndexOf("/") + 1).replaceAll("%20", " ");
 		this.hash = var4.hashCode();
 	}
 
--- net/minecraft/src/EntityLavaFX.java
+++ net/minecraft/src/EntityLavaFX.java
@@ -17,6 +17,22 @@
 		this.particleTextureIndex = 49;
 	}
 
+	public int func_35115_a(float var1) {
+		float var2 = ((float)this.particleAge + var1) / (float)this.particleMaxAge;
+		if(var2 < 0.0F) {
+			var2 = 0.0F;
+		}
+
+		if(var2 > 1.0F) {
+			var2 = 1.0F;
+		}
+
+		int var3 = super.func_35115_a(var1);
+		short var4 = 240;
+		int var5 = var3 >> 16 & 255;
+		return var4 | var5 << 16;
+	}
+
 	public float getEntityBrightness(float var1) {
 		return 1.0F;
 	}
--- net/minecraft/src/PanelCrashReport.java
+++ net/minecraft/src/PanelCrashReport.java
@@ -25,7 +25,7 @@
 		try {
 			var5 = var5 + "Generated " + (new SimpleDateFormat()).format(new Date()) + "\n";
 			var5 = var5 + "\n";
-			var5 = var5 + "Minecraft: Minecraft Beta 1.7.3\n";
+			var5 = var5 + "Minecraft: Minecraft Beta 1.7.3_01\n";
 			var5 = var5 + "OS: " + System.getProperty("os.name") + " (" + System.getProperty("os.arch") + ") version " + System.getProperty("os.version") + "\n";
 			var5 = var5 + "Java: " + System.getProperty("java.version") + ", " + System.getProperty("java.vendor") + "\n";
 			var5 = var5 + "VM: " + System.getProperty("java.vm.name") + " (" + System.getProperty("java.vm.info") + "), " + System.getProperty("java.vm.vendor") + "\n";
--- net/minecraft/src/GuiContainer.java
+++ net/minecraft/src/GuiContainer.java
@@ -24,15 +24,16 @@
 		int var4 = (this.width - this.xSize) / 2;
 		int var5 = (this.height - this.ySize) / 2;
 		this.drawGuiContainerBackgroundLayer(var3);
-		GL11.glPushMatrix();
-		GL11.glRotatef(120.0F, 1.0F, 0.0F, 0.0F);
-		RenderHelper.enableStandardItemLighting();
-		GL11.glPopMatrix();
+		RenderHelper.func_41089_c();
 		GL11.glPushMatrix();
 		GL11.glTranslatef((float)var4, (float)var5, 0.0F);
 		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 		GL11.glEnable(GL12.GL_RESCALE_NORMAL);
 		Slot var6 = null;
+		short var80 = 240;
+		short var81 = 240;
+		OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapEnabled, (float)var80 / 1.0F, (float)var81 / 1.0F);
+		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 
 		int var9;
 		int var10;
@@ -51,10 +52,11 @@
 			}
 		}
 
+		this.drawGuiContainerForegroundLayer();
 		InventoryPlayer var12 = this.mc.thePlayer.inventory;
 		if(var12.getItemStack() != null) {
 			GL11.glTranslatef(0.0F, 0.0F, 32.0F);
-			itemRenderer.renderItemIntoGUI(this.fontRenderer, this.mc.renderEngine, var12.getItemStack(), var1 - var4 - 8, var2 - var5 - 8);
+			itemRenderer.renderItemIntoGUI(this.fontRenderer, this.mc.renderEngine, var12.getItemStack(), var1 - var4 - 8, var2 - var5 - 8, this.mc.thePlayer);
 			itemRenderer.renderItemOverlayIntoGUI(this.fontRenderer, this.mc.renderEngine, var12.getItemStack(), var1 - var4 - 8, var2 - var5 - 8);
 		}
 
@@ -62,15 +64,42 @@
 		RenderHelper.disableStandardItemLighting();
 		GL11.glDisable(GL11.GL_LIGHTING);
 		GL11.glDisable(GL11.GL_DEPTH_TEST);
-		this.drawGuiContainerForegroundLayer();
 		if(var12.getItemStack() == null && var6 != null && var6.getHasStack()) {
-			String var13 = ("" + StringTranslate.getInstance().translateNamedKey(var6.getStack().getItemName())).trim();
-			if(var13.length() > 0) {
+			StringTranslate language = StringTranslate.getInstance();
+			String descriptionId = var6.getStack().getItemName();
+			String var13 = ("" + language.translateNamedKey(descriptionId)).trim();
+			String elementDescription = ("" + language.getElementDescription(descriptionId)).trim();
+			if(var13.length() > 0 || elementDescription.length() > 0) {
 				var9 = var1 - var4 + 12;
 				var10 = var2 - var5 - 12;
-				int var11 = this.fontRenderer.getStringWidth(var13);
-				this.drawGradientRect(var9 - 3, var10 - 3, var9 + var11 + 3, var10 + 8 + 3, -1073741824, -1073741824);
-				this.fontRenderer.drawStringWithShadow(var13, var9, var10, -1);
+				int var11;
+				if(var13.length() > 0) {
+					var11 = this.fontRenderer.getStringWidth(var13);
+					if(elementDescription.length() > 0) {
+						if(var11 < 120) {
+							var11 = 120;
+						}
+
+						this.drawGradientRect(var9 - 3, var10 - 3, var9 + var11 + 3, var10 + this.fontRenderer.func_27277_a(elementDescription, var11) + 3 + 12, 0xC0000000, 0xC0000000);
+					} else {
+						this.drawGradientRect(var9 - 3, var10 - 3, var9 + var11 + 3, var10 + 8 + 3, 0xC0000000, 0xC0000000);
+					}
+				} else {
+					var11 = 120;
+					this.drawGradientRect(var9 - 3, var10 - 3, var9 + var11 + 3, var10 + this.fontRenderer.func_27277_a(elementDescription, var11) + 3, 0xC0000000, 0xC0000000);
+				}
+
+				if(elementDescription.length() > 0) {
+					if(var13.length() > 0) {
+						this.fontRenderer.func_27278_a(elementDescription, var9, var10 + 12, var11, 0xFFA0A0A0);
+					} else {
+						this.fontRenderer.func_27278_a(elementDescription, var9, var10, var11, 0xFFA0A0A0);
+					}
+				}
+
+				if(var13.length() > 0) {
+					this.fontRenderer.drawStringWithShadow(var13, var9, var10, 0xFFFFFFFF);
+				}
 			}
 		}
 
@@ -100,7 +129,7 @@
 			}
 		}
 
-		itemRenderer.renderItemIntoGUI(this.fontRenderer, this.mc.renderEngine, var4, var2, var3);
+		itemRenderer.renderItemIntoGUI(this.fontRenderer, this.mc.renderEngine, var4, var2, var3, this.mc.thePlayer);
 		itemRenderer.renderItemOverlayIntoGUI(this.fontRenderer, this.mc.renderEngine, var4, var2, var3);
 	}
 
--- net/minecraft/src/ModelCow.java
+++ net/minecraft/src/ModelCow.java
@@ -7,20 +7,20 @@
 
 	public ModelCow() {
 		super(12, 0.0F);
-		this.head = new ModelRenderer(0, 0);
+		this.head = new ModelRenderer(this, 0, 0);
 		this.head.addBox(-4.0F, -4.0F, -6.0F, 8, 8, 6, 0.0F);
 		this.head.setRotationPoint(0.0F, 4.0F, -8.0F);
-		this.horn1 = new ModelRenderer(22, 0);
+		this.horn1 = new ModelRenderer(this, 22, 0);
 		this.horn1.addBox(-4.0F, -5.0F, -4.0F, 1, 3, 1, 0.0F);
 		this.horn1.setRotationPoint(0.0F, 3.0F, -7.0F);
-		this.horn2 = new ModelRenderer(22, 0);
+		this.horn2 = new ModelRenderer(this, 22, 0);
 		this.horn2.addBox(3.0F, -5.0F, -4.0F, 1, 3, 1, 0.0F);
 		this.horn2.setRotationPoint(0.0F, 3.0F, -7.0F);
-		this.udders = new ModelRenderer(52, 0);
+		this.udders = new ModelRenderer(this, 52, 0);
 		this.udders.addBox(-2.0F, -3.0F, 0.0F, 4, 6, 2, 0.0F);
 		this.udders.setRotationPoint(0.0F, 14.0F, 6.0F);
 		this.udders.rotateAngleX = (float)Math.PI * 0.5F;
-		this.body = new ModelRenderer(18, 4);
+		this.body = new ModelRenderer(this, 18, 4);
 		this.body.addBox(-6.0F, -10.0F, -7.0F, 12, 18, 10, 0.0F);
 		this.body.setRotationPoint(0.0F, 5.0F, 2.0F);
 		--this.leg1.rotationPointX;
--- net/minecraft/src/EntityFX.java
+++ net/minecraft/src/EntityFX.java
@@ -85,7 +85,7 @@
 		float var13 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
 		float var14 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
 		float var15 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
-		float var16 = this.getEntityBrightness(var2);
+		float var16 = 1.0F;
 		var1.setColorOpaque_F(this.particleRed * var16, this.particleGreen * var16, this.particleBlue * var16);
 		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var9, (double)var11);
 		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var9, (double)var10);
--- net/minecraft/src/ItemSoup.java
+++ net/minecraft/src/ItemSoup.java
@@ -5,7 +5,7 @@
 		super(var1, var2, false);
 	}
 
-	public ItemStack onItemRightClick(ItemStack var1, World var2, EntityPlayer var3) {
+	public ItemStack onFoodEaten(ItemStack var1, World var2, EntityPlayer var3) {
 		super.onItemRightClick(var1, var2, var3);
 		return new ItemStack(Item.bowlEmpty);
 	}
--- net/minecraft/src/RenderLiving.java
+++ net/minecraft/src/RenderLiving.java
@@ -1,5 +1,6 @@
 package net.minecraft.src;
 
+import java.util.Random;
 import net.minecraft.client.Minecraft;
 import org.lwjgl.opengl.GL11;
 import org.lwjgl.opengl.GL12;
@@ -64,6 +65,9 @@
 			this.renderEquippedItems(var1, var9);
 			float var25 = var1.getEntityBrightness(var9);
 			int var18 = this.getColorMultiplier(var1, var25, var9);
+			OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapEnabled);
+			GL11.glDisable(GL11.GL_TEXTURE_2D);
+			OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapDisabled);
 			if((var18 >> 24 & 255) > 0 || var1.hurtTime > 0 || var1.deathTime > 0) {
 				GL11.glDisable(GL11.GL_TEXTURE_2D);
 				GL11.glDisable(GL11.GL_ALPHA_TEST);
@@ -109,6 +113,9 @@
 			var24.printStackTrace();
 		}
 
+		OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapEnabled);
+		GL11.glEnable(GL11.GL_TEXTURE_2D);
+		OpenGlHelper.setActiveTexture(OpenGlHelper.lightmapDisabled);
 		GL11.glEnable(GL11.GL_CULL_FACE);
 		GL11.glPopMatrix();
 		this.passSpecialRender(var1, var2, var4, var6);
@@ -141,6 +148,38 @@
 	}
 
 	protected void renderEquippedItems(EntityLiving var1, float var2) {
+		if(var1.field_35172_bP > 0) {
+			EntityArrow var3 = new EntityArrow(var1.worldObj, var1.posX, var1.posY, var1.posZ);
+			Random var4 = new Random((long)var1.entityId);
+
+			for(int var5 = 0; var5 < var1.field_35172_bP; ++var5) {
+				GL11.glPushMatrix();
+				ModelRenderer var6 = this.mainModel.func_35393_a(var4);
+				var6.postRender(1.0F / 16.0F);
+				float var7 = var4.nextFloat();
+				float var8 = var4.nextFloat();
+				float var9 = var4.nextFloat();
+				float var10 = (var6.field_35977_i + (var6.field_35973_l - var6.field_35977_i) * var7) / 16.0F;
+				float var11 = (var6.field_35975_j + (var6.field_35974_m - var6.field_35975_j) * var8) / 16.0F;
+				float var12 = (var6.field_35976_k + (var6.field_35972_n - var6.field_35976_k) * var9) / 16.0F;
+				GL11.glTranslatef(var10, var11, var12);
+				var7 = var7 * 2.0F - 1.0F;
+				var8 = var8 * 2.0F - 1.0F;
+				var9 = var9 * 2.0F - 1.0F;
+				var7 *= -1.0F;
+				var8 *= -1.0F;
+				var9 *= -1.0F;
+				float var13 = MathHelper.sqrt_float(var7 * var7 + var9 * var9);
+				var3.prevRotationYaw = var3.rotationYaw = (float)(Math.atan2((double)var7, (double)var9) * 180.0D / (double)((float)Math.PI));
+				var3.prevRotationPitch = var3.rotationPitch = (float)(Math.atan2((double)var8, (double)var13) * 180.0D / (double)((float)Math.PI));
+				double var14 = 0.0D;
+				double var16 = 0.0D;
+				double var18 = 0.0D;
+				float var20 = 0.0F;
+				this.renderManager.renderEntityWithPosYaw(var3, var14, var16, var18, var20, var2);
+				GL11.glPopMatrix();
+			}
+		}
 	}
 
 	protected boolean func_27005_b(EntityLiving var1, int var2, float var3) {
--- net/minecraft/src/MaterialLiquid.java
+++ net/minecraft/src/MaterialLiquid.java
@@ -15,6 +15,10 @@
 		return false;
 	}
 
+	public boolean getCanBlockGrass() {
+		return false;
+	}
+
 	public boolean isSolid() {
 		return false;
 	}
--- /dev/null
+++ net/minecraft/src/OpenGlHelper.java
@@ -1,0 +1,50 @@
+package net.minecraft.src;
+
+import org.lwjgl.opengl.ARBMultitexture;
+import org.lwjgl.opengl.GL13;
+import org.lwjgl.opengl.GLContext;
+
+public class OpenGlHelper {
+	public static int lightmapDisabled;
+	public static int lightmapEnabled;
+	private static boolean useMultitextureARB = false;
+
+	public static void initializeTextures() {
+		useMultitextureARB = GLContext.getCapabilities().GL_ARB_multitexture && !GLContext.getCapabilities().OpenGL13;
+		if(useMultitextureARB) {
+			lightmapDisabled = '\u84c0';
+			lightmapEnabled = '\u84c1';
+		} else {
+			lightmapDisabled = '\u84c0';
+			lightmapEnabled = '\u84c1';
+		}
+
+	}
+
+	public static void setActiveTexture(int var0) {
+		if(useMultitextureARB) {
+			ARBMultitexture.glActiveTextureARB(var0);
+		} else {
+			GL13.glActiveTexture(var0);
+		}
+
+	}
+
+	public static void setClientActiveTexture(int var0) {
+		if(useMultitextureARB) {
+			ARBMultitexture.glClientActiveTextureARB(var0);
+		} else {
+			GL13.glClientActiveTexture(var0);
+		}
+
+	}
+
+	public static void setLightmapTextureCoords(int var0, float var1, float var2) {
+		if(useMultitextureARB) {
+			ARBMultitexture.glMultiTexCoord2fARB(var0, var1, var2);
+		} else {
+			GL13.glMultiTexCoord2f(var0, var1, var2);
+		}
+
+	}
+}
--- net/minecraft/src/EntityDiggingFX.java
+++ net/minecraft/src/EntityDiggingFX.java
@@ -7,9 +7,17 @@
 	public EntityDiggingFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12, Block var14, int var15, int var16) {
 		super(var1, var2, var4, var6, var8, var10, var12);
 		this.field_4082_a = var14;
-		this.particleTextureIndex = var14.getBlockTextureFromSideAndMetadata(0, var16);
+		this.particleTextureIndex = var14.getBlockTextureFromSideAndMetadata(var15, var16);
 		this.particleGravity = var14.blockParticleGravity;
-		this.particleRed = this.particleGreen = this.particleBlue = 0.6F;
+		if(var14 == Block.grass && this.particleTextureIndex == 0) {
+			var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+			int var17 = ColorizerGrass.getGrassColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+			this.particleRed = (float)(var17 >> 16 & 255) / 255.0F;
+			this.particleGreen = (float)(var17 >> 8 & 255) / 255.0F;
+			this.particleBlue = (float)(var17 & 255) / 255.0F;
+		} else {
+			this.particleRed = this.particleGreen = this.particleBlue = 0.6F;
+		}
 		this.particleScale /= 2.0F;
 		this.field_32001_o = var15;
 	}
@@ -39,7 +47,7 @@
 		float var13 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
 		float var14 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
 		float var15 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
-		float var16 = this.getEntityBrightness(var2);
+		float var16 = 1.0F;
 		var1.setColorOpaque_F(var16 * this.particleRed, var16 * this.particleGreen, var16 * this.particleBlue);
 		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var8, (double)var11);
 		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var8, (double)var10);
--- net/minecraft/src/PlayerControllerSP.java
+++ net/minecraft/src/PlayerControllerSP.java
@@ -16,7 +16,11 @@
 	}
 
 	public void flipPlayer(EntityPlayer var1) {
-		var1.rotationYaw = -180.0F;
+		if(this.mc.theWorld.isTitle()) {
+			var1.rotationYaw = -180.0F;
+		} else {
+			var1.rotationYaw = -90.0F;
+		}
 	}
 
 	public boolean sendBlockRemoved(int var1, int var2, int var3, int var4) {
--- net/minecraft/src/EntityRainFX.java
+++ net/minecraft/src/EntityRainFX.java
@@ -1,15 +1,19 @@
 package net.minecraft.src;
 
 public class EntityRainFX extends EntityFX {
+	int particleTextureIndexRand = this.rand.nextInt(4);
+
 	public EntityRainFX(World var1, double var2, double var4, double var6) {
 		super(var1, var2, var4, var6, 0.0D, 0.0D, 0.0D);
 		this.motionX *= (double)0.3F;
 		this.motionY = (double)((float)Math.random() * 0.2F + 0.1F);
 		this.motionZ *= (double)0.3F;
-		this.particleRed = 1.0F;
-		this.particleGreen = 1.0F;
-		this.particleBlue = 1.0F;
-		this.particleTextureIndex = 19 + this.rand.nextInt(4);
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var8 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var8 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var8 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var8 & 255) / 255.0F;
+		this.particleTextureIndex = 19 + this.particleTextureIndexRand;
 		this.setSize(0.01F, 0.01F);
 		this.particleGravity = 0.06F;
 		this.particleMaxAge = (int)(8.0D / (Math.random() * 0.8D + 0.2D));
--- net/minecraft/src/BlockStairs.java
+++ net/minecraft/src/BlockStairs.java
@@ -78,6 +78,10 @@
 		this.modelBlock.onBlockDestroyedByPlayer(var1, var2, var3, var4, var5);
 	}
 
+	public int func_35275_c(IBlockAccess var1, int var2, int var3, int var4) {
+		return this.modelBlock.func_35275_c(var1, var2, var3, var4);
+	}
+
 	public float getBlockBrightness(IBlockAccess var1, int var2, int var3, int var4) {
 		return this.modelBlock.getBlockBrightness(var1, var2, var3, var4);
 	}
--- net/minecraft/src/EntityBubbleFX.java
+++ net/minecraft/src/EntityBubbleFX.java
@@ -3,9 +3,11 @@
 public class EntityBubbleFX extends EntityFX {
 	public EntityBubbleFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
 		super(var1, var2, var4, var6, var8, var10, var12);
-		this.particleRed = 1.0F;
-		this.particleGreen = 1.0F;
-		this.particleBlue = 1.0F;
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var14 >> 16 & 255) / 255.0F;
+		this.particleGreen = (float)(var14 >> 8 & 255) / 255.0F;
+		this.particleBlue = (float)(var14 & 255) / 255.0F;
 		this.particleTextureIndex = 32;
 		this.setSize(0.02F, 0.02F);
 		this.particleScale *= this.rand.nextFloat() * 0.6F + 0.2F;
@@ -32,5 +34,29 @@
 			this.setEntityDead();
 		}
 
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		float var8 = (float)(this.particleTextureIndex % 16) / 16.0F;
+		float var9 = var8 + 0.999F / 16.0F;
+		float var10 = (float)(this.particleTextureIndex / 16) / 16.0F;
+		float var11 = var10 + 0.999F / 16.0F;
+		float var12 = 0.1F * this.particleScale;
+		float var13 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
+		float var14 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
+		float var15 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
+		float var16 = this.getEntityBrightness(var2);
+		var1.setColorOpaque_F(this.particleRed * var16, this.particleGreen * var16, this.particleBlue * var16);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var9, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 + var5 * var12 + var7 * var12), (double)var8, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 + var5 * var12 - var7 * var12), (double)var8, (double)var11);
+		var8 += 2.0F / 16.0F;
+		var9 += 2.0F / 16.0F;
+		var1.setColorOpaque_F(var16, var16, var16);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var9, (double)var11);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var9, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 + var5 * var12 + var7 * var12), (double)var8, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 + var5 * var12 - var7 * var12), (double)var8, (double)var11);
 	}
 }
--- net/minecraft/src/ModelSquid.java
+++ net/minecraft/src/ModelSquid.java
@@ -6,12 +6,12 @@
 
 	public ModelSquid() {
 		byte var1 = -16;
-		this.squidBody = new ModelRenderer(0, 0);
+		this.squidBody = new ModelRenderer(this, 0, 0);
 		this.squidBody.addBox(-6.0F, -8.0F, -6.0F, 12, 16, 12);
 		this.squidBody.rotationPointY += (float)(24 + var1);
 
 		for(int var2 = 0; var2 < this.squidTentacles.length; ++var2) {
-			this.squidTentacles[var2] = new ModelRenderer(48, 0);
+			this.squidTentacles[var2] = new ModelRenderer(this, 48, 0);
 			double var3 = (double)var2 * Math.PI * 2.0D / (double)this.squidTentacles.length;
 			float var5 = (float)Math.cos(var3) * 5.0F;
 			float var6 = (float)Math.sin(var3) * 5.0F;
--- net/minecraft/src/RenderEngine.java
+++ net/minecraft/src/RenderEngine.java
@@ -243,6 +243,57 @@
 
 	}
 
+	public void createTextureFromBytes(int[] var1, int var2, int var3, int var4) {
+		GL11.glBindTexture(GL11.GL_TEXTURE_2D, var4);
+		if(useMipmaps) {
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_NEAREST_MIPMAP_LINEAR);
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_NEAREST);
+		} else {
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_NEAREST);
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_NEAREST);
+		}
+
+		if(this.blurTexture) {
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_LINEAR);
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_LINEAR);
+		}
+
+		if(this.clampTexture) {
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL11.GL_CLAMP);
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL11.GL_CLAMP);
+		} else {
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL11.GL_REPEAT);
+			GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL11.GL_REPEAT);
+		}
+
+		byte[] var5 = new byte[var2 * var3 * 4];
+
+		for(int var6 = 0; var6 < var1.length; ++var6) {
+			int var7 = var1[var6] >> 24 & 255;
+			int var8 = var1[var6] >> 16 & 255;
+			int var9 = var1[var6] >> 8 & 255;
+			int var10 = var1[var6] & 255;
+			if(this.options != null && this.options.anaglyph) {
+				int var11 = (var8 * 30 + var9 * 59 + var10 * 11) / 100;
+				int var12 = (var8 * 30 + var9 * 70) / 100;
+				int var13 = (var8 * 30 + var10 * 70) / 100;
+				var8 = var11;
+				var9 = var12;
+				var10 = var13;
+			}
+
+			var5[var6 * 4 + 0] = (byte)var8;
+			var5[var6 * 4 + 1] = (byte)var9;
+			var5[var6 * 4 + 2] = (byte)var10;
+			var5[var6 * 4 + 3] = (byte)var7;
+		}
+
+		this.imageData.clear();
+		this.imageData.put(var5);
+		this.imageData.position(0).limit(var5.length);
+		GL11.glTexSubImage2D(GL11.GL_TEXTURE_2D, 0, 0, 0, var2, var3, GL11.GL_RGBA, GL11.GL_UNSIGNED_BYTE, (ByteBuffer)this.imageData);
+	}
+
 	public void func_28150_a(int[] var1, int var2, int var3, int var4) {
 		GL11.glBindTexture(GL11.GL_TEXTURE_2D, var4);
 		if(useMipmaps) {
--- net/minecraft/client/Minecraft.java
+++ net/minecraft/client/Minecraft.java
@@ -13,6 +13,7 @@
 import net.minecraft.src.Block;
 import net.minecraft.src.ChunkCoordinates;
 import net.minecraft.src.ChunkProviderLoadOrGenerate;
+import net.minecraft.src.IProgressUpdate;
 import net.minecraft.src.ColorizerFoliage;
 import net.minecraft.src.ColorizerGrass;
 import net.minecraft.src.ColorizerWater;
@@ -59,6 +60,7 @@
 import net.minecraft.src.MovingObjectPosition;
 import net.minecraft.src.NetClientHandler;
 import net.minecraft.src.OpenGlCapsChecker;
+import net.minecraft.src.OpenGlHelper;
 import net.minecraft.src.PlayerController;
 import net.minecraft.src.PlayerControllerTest;
 import net.minecraft.src.RenderBlocks;
@@ -66,6 +68,7 @@
 import net.minecraft.src.RenderGlobal;
 import net.minecraft.src.RenderManager;
 import net.minecraft.src.SaveConverterMcRegion;
+import net.minecraft.src.SaveOldDir;
 import net.minecraft.src.ScaledResolution;
 import net.minecraft.src.ScreenShotHelper;
 import net.minecraft.src.Session;
@@ -93,11 +96,13 @@
 import net.minecraft.src.World;
 import net.minecraft.src.WorldProvider;
 import net.minecraft.src.WorldRenderer;
+import net.minecraft.src.WorldTitle;
 import org.lwjgl.LWJGLException;
 import org.lwjgl.input.Controllers;
 import org.lwjgl.input.Keyboard;
 import org.lwjgl.input.Mouse;
 import org.lwjgl.opengl.Display;
+import org.lwjgl.opengl.PixelFormat;
 import org.lwjgl.opengl.DisplayMode;
 import org.lwjgl.opengl.GL11;
 import org.lwjgl.util.glu.GLU;
@@ -218,10 +223,10 @@
 			Display.setDisplayMode(new DisplayMode(this.displayWidth, this.displayHeight));
 		}
 
-		Display.setTitle("Minecraft Minecraft Beta 1.7.3");
+		Display.setTitle("Minecraft Minecraft Beta 1.7.3_01");
 
 		try {
-			Display.create();
+			Display.create(new PixelFormat().withDepthBits(24));
 		} catch (LWJGLException var6) {
 			var6.printStackTrace();
 
@@ -230,9 +235,10 @@
 			} catch (InterruptedException var5) {
 			}
 
-			Display.create();
+			Display.create(new PixelFormat().withDepthBits(24));
 		}
 
+		OpenGlHelper.initializeTextures();
 		this.mcDataDir = getMinecraftDir();
 		this.saveLoader = new SaveConverterMcRegion(new File(this.mcDataDir, "saves"));
 		this.gameSettings = new GameSettings(this, this.mcDataDir);
@@ -406,7 +412,7 @@
 			}
 
 			this.statFileWriter.syncStats();
-			if(var1 == null && this.theWorld == null) {
+			if(var1 == null && (this.theWorld == null || this.theWorld.isTitle())) {
 				var1 = new GuiMainMenu();
 			} else if(var1 == null && this.thePlayer.health <= 0) {
 				var1 = new GuiGameOver();
@@ -595,7 +601,7 @@
 					this.checkGLError("Post render");
 					++var3;
 
-					for(this.isGamePaused = !this.isMultiplayerWorld() && this.currentScreen != null && this.currentScreen.doesGuiPauseGame(); System.currentTimeMillis() >= var1 + 1000L; var3 = 0) {
+					for(this.isGamePaused = (this.theWorld == null || !this.isMultiplayerWorld() && !this.theWorld.isTitle()) && this.currentScreen != null && this.currentScreen.doesGuiPauseGame(); System.currentTimeMillis() >= var1 + 1000L; var3 = 0) {
 						this.debug = var3 + " fps, " + WorldRenderer.chunksUpdated + " chunk updates";
 						WorldRenderer.chunksUpdated = 0;
 						var1 += 1000L;
@@ -1006,6 +1012,10 @@
 														this.clickMouse(1);
 														this.mouseTicksRan = this.ticksRan;
 													}
+
+													if(!Mouse.isButtonDown(1)) {
+														this.playerController.onStoppedUsingItem(this.thePlayer);
+													}
 												}
 
 												this.func_6254_a(0, this.currentScreen == null && Mouse.isButtonDown(0) && this.inGameHasFocus);
@@ -1144,6 +1154,10 @@
 					--this.theWorld.field_27172_i;
 				}
 
+				if(this.thePlayer.isDead) {
+					++this.thePlayer.deathTime;
+				}
+
 				this.theWorld.updateEntities();
 			}
 
@@ -1175,6 +1189,23 @@
 		return this.theWorld != null && this.theWorld.multiplayerWorld;
 	}
 
+	public void startTitleWorld(String var1, String var2, long var3) {
+		this.changeWorld1((World)null);
+		System.gc();
+		if(this.saveLoader.isOldMapFormat(var1)) {
+			this.convertMapFormat(var1, var2);
+		} else {
+			World var4 = null;
+			var4 = new WorldTitle(new SaveOldDir(this.mcDataDir, var1, false), var2, var3);
+			if(var4.isNewWorld) {
+				this.changeWorld2(var4, "Generating level");
+			} else {
+				this.changeWorld2(var4, "Loading level");
+			}
+		}
+
+	}
+
 	public void startWorld(String var1, String var2, long var3) {
 		this.changeWorld1((World)null);
 		System.gc();
@@ -1193,6 +1224,8 @@
 				this.statFileWriter.readStat(StatList.startGameStat, 1);
 				this.changeWorld2(var6, "Loading level");
 			}
+
+			this.sndManager.stopStreaming();
 		}
 
 	}
@@ -1256,17 +1289,26 @@
 		this.statFileWriter.func_27175_b();
 		this.statFileWriter.syncStats();
 		this.renderViewEntity = null;
-		this.loadingScreen.printText(var2);
-		this.loadingScreen.displayLoadingString("");
+		if(this.loadingScreen != null) {
+			this.loadingScreen.printText(var2);
+			this.loadingScreen.displayLoadingString("");
+		}
+
 		this.sndManager.playStreaming((String)null, 0.0F, 0.0F, 0.0F, 0.0F, 0.0F);
 		if(this.theWorld != null) {
-			this.theWorld.saveWorldIndirectly(this.loadingScreen);
-		}
+			if(this.theWorld.isTitle()) {
+				this.theWorld.saveWorldIndirectly((IProgressUpdate)null);
+			} else {
+				this.theWorld.saveWorldIndirectly(this.loadingScreen);
+			}
+ 		}
 
 		this.theWorld = var1;
 		if(var1 != null) {
-			this.playerController.func_717_a(var1);
-			if(!this.isMultiplayerWorld()) {
+			if(var1.isTitle()) {
+				this.thePlayer = new EntityPlayerSP(this, var1, this.session, var1.worldProvider.worldType);
+				this.thePlayer.setLocationAndAngles(61.48D, 75.0D, -68.73D, 0.0F, 0.0F);
+			} else if(!this.isMultiplayerWorld()) {
 				if(var3 == null) {
 					this.thePlayer = (EntityPlayerSP)var1.func_4085_a(EntityPlayerSP.class);
 				}
@@ -1281,6 +1323,7 @@
 				this.func_6255_d(var2);
 			}
 
+			this.playerController.func_717_a(var1);
 			if(this.thePlayer == null) {
 				this.thePlayer = (EntityPlayerSP)this.playerController.createPlayer(var1);
 				this.thePlayer.preparePlayerToSpawn();
@@ -1297,6 +1340,8 @@
 			}
 
 			this.playerController.func_6473_b(this.thePlayer);
+			this.textureWaterFX.textureId = this.renderEngine.getTexture("/misc/water.png");
+			this.textureLavaFX.textureId = 0;
 			if(var3 != null) {
 				var1.emptyMethod1();
 			}
@@ -1331,8 +1376,10 @@
 	}
 
 	private void func_6255_d(String var1) {
-		this.loadingScreen.printText(var1);
-		this.loadingScreen.displayLoadingString("Building terrain");
+		if(this.loadingScreen != null) {
+			this.loadingScreen.printText(var1);
+			this.loadingScreen.displayLoadingString("Building terrain");
+		}
 		short var2 = 128;
 		int var3 = 0;
 		int var4 = var2 * 2 / 16 + 1;
@@ -1351,7 +1398,10 @@
 
 		for(int var10 = -var2; var10 <= var2; var10 += 16) {
 			for(int var8 = -var2; var8 <= var2; var8 += 16) {
-				this.loadingScreen.setLoadingProgress(var3++ * 100 / var4);
+				if(this.loadingScreen != null) {
+					this.loadingScreen.setLoadingProgress(var3++ * 100 / var4);
+				}
+
 				this.theWorld.getBlockId(var6.x + var10, 64, var6.z + var8);
 
 				while(this.theWorld.updatingLighting()) {
@@ -1359,7 +1409,10 @@
 			}
 		}
 
-		this.loadingScreen.displayLoadingString("Simulating world for a bit");
+		if(this.loadingScreen != null) {
+			this.loadingScreen.displayLoadingString("Simulating world for a bit");
+		}
+
 		boolean var9 = true;
 		this.theWorld.func_656_j();
 	}
@@ -1376,8 +1429,16 @@
 			this.sndManager.addStreaming(var1, var2);
 		} else if(var4.equalsIgnoreCase("music")) {
 			this.sndManager.addMusic(var1, var2);
+
+			if(var1.startsWith("title/")) {
+				this.sndManager.addTitleMusic(var1, var2);
+			}
 		} else if(var4.equalsIgnoreCase("newmusic")) {
 			this.sndManager.addMusic(var1, var2);
+
+			if(var1.startsWith("title/")) {
+				this.sndManager.addTitleMusic(var1, var2);
+			}
 		}
 
 	}
--- net/minecraft/src/ModelQuadruped.java
+++ net/minecraft/src/ModelQuadruped.java
@@ -1,7 +1,7 @@
 package net.minecraft.src;
 
 public class ModelQuadruped extends ModelBase {
-	public ModelRenderer head = new ModelRenderer(0, 0);
+	public ModelRenderer head = new ModelRenderer(this, 0, 0);
 	public ModelRenderer body;
 	public ModelRenderer leg1;
 	public ModelRenderer leg2;
@@ -11,19 +11,19 @@
 	public ModelQuadruped(int var1, float var2) {
 		this.head.addBox(-4.0F, -4.0F, -8.0F, 8, 8, 8, var2);
 		this.head.setRotationPoint(0.0F, (float)(18 - var1), -6.0F);
-		this.body = new ModelRenderer(28, 8);
+		this.body = new ModelRenderer(this, 28, 8);
 		this.body.addBox(-5.0F, -10.0F, -7.0F, 10, 16, 8, var2);
 		this.body.setRotationPoint(0.0F, (float)(17 - var1), 2.0F);
-		this.leg1 = new ModelRenderer(0, 16);
+		this.leg1 = new ModelRenderer(this, 0, 16);
 		this.leg1.addBox(-2.0F, 0.0F, -2.0F, 4, var1, 4, var2);
 		this.leg1.setRotationPoint(-3.0F, (float)(24 - var1), 7.0F);
-		this.leg2 = new ModelRenderer(0, 16);
+		this.leg2 = new ModelRenderer(this, 0, 16);
 		this.leg2.addBox(-2.0F, 0.0F, -2.0F, 4, var1, 4, var2);
 		this.leg2.setRotationPoint(3.0F, (float)(24 - var1), 7.0F);
-		this.leg3 = new ModelRenderer(0, 16);
+		this.leg3 = new ModelRenderer(this, 0, 16);
 		this.leg3.addBox(-2.0F, 0.0F, -2.0F, 4, var1, 4, var2);
 		this.leg3.setRotationPoint(-3.0F, (float)(24 - var1), -5.0F);
-		this.leg4 = new ModelRenderer(0, 16);
+		this.leg4 = new ModelRenderer(this, 0, 16);
 		this.leg4.addBox(-2.0F, 0.0F, -2.0F, 4, var1, 4, var2);
 		this.leg4.setRotationPoint(3.0F, (float)(24 - var1), -5.0F);
 	}
--- net/minecraft/src/ModelCreeper.java
+++ net/minecraft/src/ModelCreeper.java
@@ -15,25 +15,25 @@
 
 	public ModelCreeper(float var1) {
 		byte var2 = 4;
-		this.head = new ModelRenderer(0, 0);
+		this.head = new ModelRenderer(this, 0, 0);
 		this.head.addBox(-4.0F, -8.0F, -4.0F, 8, 8, 8, var1);
 		this.head.setRotationPoint(0.0F, (float)var2, 0.0F);
-		this.field_1270_b = new ModelRenderer(32, 0);
+		this.field_1270_b = new ModelRenderer(this, 32, 0);
 		this.field_1270_b.addBox(-4.0F, -8.0F, -4.0F, 8, 8, 8, var1 + 0.5F);
 		this.field_1270_b.setRotationPoint(0.0F, (float)var2, 0.0F);
-		this.body = new ModelRenderer(16, 16);
+		this.body = new ModelRenderer(this, 16, 16);
 		this.body.addBox(-4.0F, 0.0F, -2.0F, 8, 12, 4, var1);
 		this.body.setRotationPoint(0.0F, (float)var2, 0.0F);
-		this.leg1 = new ModelRenderer(0, 16);
+		this.leg1 = new ModelRenderer(this, 0, 16);
 		this.leg1.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg1.setRotationPoint(-2.0F, (float)(12 + var2), 4.0F);
-		this.leg2 = new ModelRenderer(0, 16);
+		this.leg2 = new ModelRenderer(this, 0, 16);
 		this.leg2.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg2.setRotationPoint(2.0F, (float)(12 + var2), 4.0F);
-		this.leg3 = new ModelRenderer(0, 16);
+		this.leg3 = new ModelRenderer(this, 0, 16);
 		this.leg3.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg3.setRotationPoint(-2.0F, (float)(12 + var2), -4.0F);
-		this.leg4 = new ModelRenderer(0, 16);
+		this.leg4 = new ModelRenderer(this, 0, 16);
 		this.leg4.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg4.setRotationPoint(2.0F, (float)(12 + var2), -4.0F);
 	}
--- /dev/null
+++ net/minecraft/src/EntityLargeSplashFX.java
@@ -1,0 +1,15 @@
+package net.minecraft.src;
+
+public class EntityLargeSplashFX extends EntityRainFX {
+	public EntityLargeSplashFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		super(var1, var2, var4, var6);
+		this.particleGravity = 0.04F;
+		this.particleTextureIndex = ++this.particleTextureIndex - (3 + this.particleTextureIndexRand);
+		if(var10 == 0.0D && (var8 != 0.0D || var12 != 0.0D)) {
+			this.motionX = var8;
+			this.motionY = var10 + 0.1D;
+			this.motionZ = var12;
+		}
+
+	}
+}
--- /dev/null
+++ net/minecraft/src/EnumAction.java
@@ -1,0 +1,7 @@
+package net.minecraft.src;
+
+public enum EnumAction {
+	none,
+	eat,
+	bow;
+}
--- net/minecraft/src/ModelPig.java
+++ net/minecraft/src/ModelPig.java
@@ -1,11 +1,27 @@
 package net.minecraft.src;
 
 public class ModelPig extends ModelQuadruped {
+	public ModelRenderer nose;
+
 	public ModelPig() {
-		super(6, 0.0F);
+		this(0.0F);
 	}
 
 	public ModelPig(float var1) {
 		super(6, var1);
+		this.nose = new ModelRenderer(this, 16, 16);
+		this.nose.addBox(-2.0F, 0.0F, -9.0F, 4, 3, 1);
+		this.nose.setRotationPoint(0.0F, 12.0F, -6.0F);
+	}
+
+	public void render(float var1, float var2, float var3, float var4, float var5, float var6) {
+		super.render(var1, var2, var3, var4, var5, var6);
+		this.nose.render(var6);
+	}
+
+	public void setRotationAngles(float var1, float var2, float var3, float var4, float var5, float var6) {
+		super.setRotationAngles(var1, var2, var3, var4, var5, var6);
+		this.nose.rotateAngleX = var5 / 57.29578F;
+		this.nose.rotateAngleY = var4 / 57.29578F;
 	}
 }
--- net/minecraft/src/EntityPickupFX.java
+++ net/minecraft/src/EntityPickupFX.java
@@ -32,11 +32,14 @@
 		int var27 = MathHelper.floor_double(var21);
 		int var28 = MathHelper.floor_double(var23 + (double)(this.yOffset / 2.0F));
 		int var29 = MathHelper.floor_double(var25);
-		float var30 = this.worldObj.getLightBrightness(var27, var28, var29);
+		int var30 = this.func_35115_a(var2);
+		int var31 = var30 % 65536;
+		int var32 = var30 / 65536;
+		OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapEnabled, (float)var31 / 1.0F, (float)var32 / 1.0F);
+		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 		var21 -= interpPosX;
 		var23 -= interpPosY;
 		var25 -= interpPosZ;
-		GL11.glColor4f(var30, var30, var30, 1.0F);
 		RenderManager.instance.renderEntityWithPosYaw(this.field_675_a, (double)((float)var21), (double)((float)var23), (double)((float)var25), this.field_675_a.rotationYaw, var2);
 	}
 
--- net/minecraft/src/GuiOptions.java
+++ net/minecraft/src/GuiOptions.java
@@ -4,7 +4,7 @@
 	private GuiScreen parentScreen;
 	protected String screenTitle = "Options";
 	private GameSettings options;
-	private static EnumOptions[] field_22135_k = new EnumOptions[]{EnumOptions.MUSIC, EnumOptions.SOUND, EnumOptions.INVERT_MOUSE, EnumOptions.SENSITIVITY, EnumOptions.DIFFICULTY};
+	private static EnumOptions[] field_22135_k = new EnumOptions[]{EnumOptions.MUSIC, EnumOptions.SOUND, EnumOptions.INVERT_MOUSE, EnumOptions.SENSITIVITY, EnumOptions.FOV, EnumOptions.DIFFICULTY};
 
 	public GuiOptions(GuiScreen var1, GameSettings var2) {
 		this.parentScreen = var1;
--- net/minecraft/src/InventoryPlayer.java
+++ net/minecraft/src/InventoryPlayer.java
@@ -128,6 +128,11 @@
 		}
 	}
 
+	public boolean hasItem(int var1) {
+		int var2 = this.getInventorySlotContainItem(var1);
+		return var2 >= 0;
+	}
+
 	public boolean addItemStackToInventory(ItemStack var1) {
 		int var2;
 		if(var1.isItemDamaged()) {
--- net/minecraft/src/EntityPlayerSP.java
+++ net/minecraft/src/EntityPlayerSP.java
@@ -5,6 +5,10 @@
 public class EntityPlayerSP extends EntityPlayer {
 	public MovementInput movementInput;
 	protected Minecraft mc;
+	public float flRenderArmYaw;
+	public float flRenderArmPitch;
+	public float flPreviousRenderArmYaw;
+	public float flPreviousRenderArmPitch;
 	private MouseFilter field_21903_bJ = new MouseFilter();
 	private MouseFilter field_21904_bK = new MouseFilter();
 	private MouseFilter field_21902_bL = new MouseFilter();
@@ -21,7 +25,19 @@
 	}
 
 	public void moveEntity(double var1, double var3, double var5) {
-		super.moveEntity(var1, var3, var5);
+		if(this == this.mc.thePlayer && this.worldObj.isTitle()) {
+			this.noClip = true;
+			float var7 = this.distanceWalkedModified;
+			this.fallDistance = 0.0F;
+			this.motionY = 0.0D;
+			super.moveEntity(var1, 0.0D, var5);
+			this.onGround = true;
+			this.distanceWalkedModified = var7;
+			this.mc.gameSettings.thirdPersonView = false;
+		} else {
+			this.noClip = false;
+			super.moveEntity(var1, var3, var5);
+		}
 	}
 
 	public void updatePlayerActionState() {
@@ -29,10 +45,14 @@
 		this.moveStrafing = this.movementInput.moveStrafe;
 		this.moveForward = this.movementInput.moveForward;
 		this.isJumping = this.movementInput.jump;
+		this.flPreviousRenderArmYaw = this.flRenderArmYaw;
+		this.flPreviousRenderArmPitch = this.flRenderArmPitch;
+		this.flRenderArmPitch = (float)((double)this.flRenderArmPitch + (double)(this.rotationPitch - this.flRenderArmPitch) * 0.5D);
+		this.flRenderArmYaw = (float)((double)this.flRenderArmYaw + (double)(this.rotationYaw - this.flRenderArmYaw) * 0.5D);
 	}
 
 	public void onLivingUpdate() {
-		if(!this.mc.statFileWriter.hasAchievementUnlocked(AchievementList.openInventory)) {
+		if(!this.mc.statFileWriter.hasAchievementUnlocked(AchievementList.openInventory) && !this.worldObj.isTitle()) {
 			this.mc.guiAchievement.queueAchievementInformation(AchievementList.openInventory);
 		}
 
@@ -76,6 +96,11 @@
 		}
 
 		this.movementInput.updatePlayerMoveState(this);
+		if(this.isUsingItem()) {
+			this.movementInput.moveStrafe *= 0.2F;
+			this.movementInput.moveForward *= 0.2F;
+		}
+
 		if(this.movementInput.sneak && this.ySize < 0.2F) {
 			this.ySize = 0.2F;
 		}
@@ -87,6 +112,24 @@
 		super.onLivingUpdate();
 	}
 
+	public float getFOVMultiplier() {
+		float var1 = 1.0F;
+		var1 *= (0.1F * 1.0F / 0.1F + 1.0F) / 2.0F;
+		if(this.isUsingItem() && this.getItemInUse().itemID == Item.bow.shiftedIndex) {
+			int var2 = this.getItemInUseDuration();
+			float var3 = (float)var2 / 20.0F;
+			if(var3 > 1.0F) {
+				var3 = 1.0F;
+			} else {
+				var3 *= var3;
+			}
+
+			var1 *= 1.0F - var3 * 0.15F;
+		}
+
+		return var1;
+	}
+
 	public void resetPlayerKeyState() {
 		this.movementInput.resetKeyState();
 	}
@@ -106,6 +149,10 @@
 	}
 
 	public void closeScreen() {
+		if(this.mc.currentScreen instanceof GuiChest) {
+			this.worldObj.playSoundAtEntity(this, "random.door_close", 1.0F, this.worldObj.rand.nextFloat() * 0.1F + 0.9F);
+		}
+
 		super.closeScreen();
 		this.mc.displayGuiScreen((GuiScreen)null);
 	}
@@ -116,6 +163,7 @@
 
 	public void displayGUIChest(IInventory var1) {
 		this.mc.displayGuiScreen(new GuiChest(this.inventory, var1));
+		this.worldObj.playSoundAtEntity(this, "random.door_open", 1.0F, this.worldObj.rand.nextFloat() * 0.1F + 0.9F);
 	}
 
 	public void displayWorkbenchGUI(int var1, int var2, int var3) {
@@ -128,6 +176,10 @@
 
 	public void displayGUIDispenser(TileEntityDispenser var1) {
 		this.mc.displayGuiScreen(new GuiDispenser(this.inventory, var1));
+	}
+
+	public void onCriticalHit(Entity var1) {
+		this.mc.effectRenderer.addEffect(new EntityCrit2FX(this.mc.theWorld, var1));
 	}
 
 	public void onItemPickup(Entity var1, int var2) {
--- net/minecraft/src/GuiAchievement.java
+++ net/minecraft/src/GuiAchievement.java
@@ -62,7 +62,7 @@
 			GL11.glDepthMask(false);
 			RenderHelper.disableStandardItemLighting();
 			this.updateAchievementWindowScale();
-			String var1 = "Minecraft Beta 1.7.3   Unlicensed Copy :(";
+			String var1 = "Minecraft Beta 1.7.3_01   Unlicensed Copy :(";
 			String var2 = "(Or logged in from another location)";
 			String var3 = "Purchase at minecraft.net";
 			this.theGame.fontRenderer.drawStringWithShadow(var1, 2, 2, 16777215);
@@ -106,15 +106,12 @@
 					this.theGame.fontRenderer.drawString(this.field_25084_e, var5 + 30, var6 + 18, -1);
 				}
 
-				GL11.glPushMatrix();
-				GL11.glRotatef(180.0F, 1.0F, 0.0F, 0.0F);
-				RenderHelper.enableStandardItemLighting();
-				GL11.glPopMatrix();
+				RenderHelper.func_41089_c();
 				GL11.glDisable(GL11.GL_LIGHTING);
 				GL11.glEnable(GL12.GL_RESCALE_NORMAL);
 				GL11.glEnable(GL11.GL_COLOR_MATERIAL);
 				GL11.glEnable(GL11.GL_LIGHTING);
-				this.itemRender.renderItemIntoGUI(this.theGame.fontRenderer, this.theGame.renderEngine, this.theAchievement.theItemStack, var5 + 8, var6 + 8);
+				this.itemRender.renderItemIntoGUI(this.theGame.fontRenderer, this.theGame.renderEngine, this.theAchievement.theItemStack, var5 + 8, var6 + 8, null);
 				GL11.glDisable(GL11.GL_LIGHTING);
 				GL11.glDepthMask(true);
 				GL11.glEnable(GL11.GL_DEPTH_TEST);
--- net/minecraft/src/EntityFish.java
+++ net/minecraft/src/EntityFish.java
@@ -352,7 +352,7 @@
 			double var8 = (double)MathHelper.sqrt_double(var2 * var2 + var4 * var4 + var6 * var6);
 			double var10 = 0.1D;
 			this.bobber.motionX += var2 * var10;
-			this.bobber.motionY += var4 * var10 + (double)MathHelper.sqrt_double(var8) * 0.08D;
+			this.bobber.motionY += var4 * var10 + (double)MathHelper.sqrt_double(var8) * 0.04D;
 			this.bobber.motionZ += var6 * var10;
 			var1 = 3;
 		} else if(this.ticksCatchable > 0) {
@@ -363,7 +363,7 @@
 			double var9 = (double)MathHelper.sqrt_double(var3 * var3 + var5 * var5 + var7 * var7);
 			double var11 = 0.1D;
 			var13.motionX = var3 * var11;
-			var13.motionY = var5 * var11 + (double)MathHelper.sqrt_double(var9) * 0.08D;
+			var13.motionY = var5 * var11 + (double)MathHelper.sqrt_double(var9) * 0.04D;
 			var13.motionZ = var7 * var11;
 			this.worldObj.entityJoinedWorld(var13);
 			this.angler.addStat(StatList.fishCaughtStat, 1);
--- net/minecraft/src/EntityPlayer.java
+++ net/minecraft/src/EntityPlayer.java
@@ -34,6 +34,8 @@
 	protected boolean inPortal = false;
 	public float timeInPortal;
 	public float prevTimeInPortal;
+	private ItemStack itemInUse;
+	public int itemInUseCount;
 	private int damageRemainder = 0;
 	public EntityFish fishEntity = null;
 
@@ -56,7 +58,67 @@
 		this.dataWatcher.addObject(16, Byte.valueOf((byte)0));
 	}
 
+	public ItemStack getItemInUse() {
+		return this.itemInUse;
+	}
+
+	public int getItemInUseCount() {
+		return this.itemInUseCount;
+	}
+
+	public boolean isUsingItem() {
+		return this.itemInUse != null;
+	}
+	
+	public int getItemInUseDuration() {
+		return this.isUsingItem() ? this.itemInUse.getMaxItemUseDuration() - this.itemInUseCount : 0;
+	}
+
+	public void stopUsingItem() {
+		if(this.itemInUse != null) {
+			this.itemInUse.onPlayerStoppedUsing(this.worldObj, this, this.itemInUseCount);
+		}
+
+		this.clearItemInUse();
+	}
+
+	public void clearItemInUse() {
+		this.itemInUse = null;
+		this.itemInUseCount = 0;
+		if(!this.worldObj.multiplayerWorld) {
+			this.setEating(false);
+		}
+
+	}
+
 	public void onUpdate() {
+		if(this.itemInUse != null) {
+			ItemStack var1 = this.inventory.getCurrentItem();
+			if(var1 != this.itemInUse) {
+				this.clearItemInUse();
+			} else {
+				if(this.itemInUseCount <= 25 && this.itemInUseCount % 4 == 0) {
+					this.func_35201_a(var1, 5);
+				}
+
+				if(--this.itemInUseCount == 0 && !this.worldObj.multiplayerWorld) {
+					if(this.itemInUse != null) {
+						this.func_35201_a(this.itemInUse, 16);
+						int var2 = this.itemInUse.stackSize;
+						ItemStack var3 = this.itemInUse.onFoodEaten(this.worldObj, this);
+						if(var3 != this.itemInUse || var3 != null && var3.stackSize != var2) {
+							this.inventory.mainInventory[this.inventory.currentItem] = var3;
+							if(var3.stackSize == 0) {
+								this.inventory.mainInventory[this.inventory.currentItem] = null;
+							}
+						}
+
+						this.clearItemInUse();
+					}
+				}
+			}
+		}
+
 		if(this.isPlayerSleeping()) {
 			++this.sleepTimer;
 			if(this.sleepTimer > 100) {
@@ -124,6 +186,24 @@
 
 	}
 
+	protected void func_35201_a(ItemStack var1, int var2) {
+		if(var1.getItemUseAction() == EnumAction.eat) {
+			for(int var3 = 0; var3 < var2; ++var3) {
+				Vec3D var4 = Vec3D.createVector(((double)this.rand.nextFloat() - 0.5D) * 0.1D, Math.random() * 0.1D + 0.1D, 0.0D);
+				var4.rotateAroundX(-this.rotationPitch * (float)Math.PI / 180.0F);
+				var4.rotateAroundY(-this.rotationYaw * (float)Math.PI / 180.0F);
+				Vec3D var5 = Vec3D.createVector(((double)this.rand.nextFloat() - 0.5D) * 0.3D, (double)(-this.rand.nextFloat()) * 0.6D - 0.3D, 0.6D);
+				var5.rotateAroundX(-this.rotationPitch * (float)Math.PI / 180.0F);
+				var5.rotateAroundY(-this.rotationYaw * (float)Math.PI / 180.0F);
+				var5 = var5.addVector(this.posX, this.posY + (double)this.getEyeHeight(), this.posZ);
+				this.worldObj.spawnParticle("iconcrack_" + var1.getItem().shiftedIndex, var5.xCoord, var5.yCoord, var5.zCoord, var4.xCoord, var4.yCoord + 0.05D, var4.zCoord);
+			}
+
+			this.worldObj.playSoundAtEntity(this, "random.eat", 0.5F + 0.5F * (float)this.rand.nextInt(2), (this.rand.nextFloat() - this.rand.nextFloat()) * 0.2F + 1.0F);
+		}
+
+	}
+
 	protected boolean isMovementBlocked() {
 		return this.health <= 0 || this.isPlayerSleeping();
 	}
@@ -488,8 +568,9 @@
 	public void attackTargetEntityWithCurrentItem(Entity var1) {
 		int var2 = this.inventory.getDamageVsEntity(var1);
 		if(var2 > 0) {
-			if(this.motionY < 0.0D) {
+			if(this.motionY < 0.0F && !this.onGround && !this.isOnLadder() && !this.isInWater() && this.ridingEntity == null && var1 instanceof EntityLiving) {
 				++var2;
+				this.onCriticalHit(var1);
 			}
 
 			var1.attackEntityFrom(this, var2);
@@ -513,6 +594,9 @@
 
 	}
 
+	public void onCriticalHit(Entity var1) {
+	}
+
 	public void respawnPlayer() {
 	}
 
@@ -796,12 +880,25 @@
 	}
 
 	public int getItemIcon(ItemStack var1) {
-		int var2 = super.getItemIcon(var1);
+		int var3 = super.getItemIcon(var1);
 		if(var1.itemID == Item.fishingRod.shiftedIndex && this.fishEntity != null) {
-			var2 = var1.getIconIndex() + 16;
+			var3 = var1.getIconIndex() + 16;
+		} else if(this.itemInUse != null && var1.itemID == Item.bow.shiftedIndex) {
+			int var4 = var1.getMaxItemUseDuration() - this.itemInUseCount;
+			if(var4 >= 18) {
+				return 133;
+			}
+
+			if(var4 > 13) {
+				return 117;
+			}
+
+			if(var4 > 0) {
+				return 101;
+			}
 		}
 
-		return var2;
+		return var3;
 	}
 
 	public void setInPortal() {
@@ -811,4 +908,14 @@
 			this.inPortal = true;
 		}
 	}
+
+	public void setItemInUse(ItemStack var1, int var2) {
+		if(var1 != this.itemInUse) {
+			this.itemInUse = var1;
+			this.itemInUseCount = var2;
+			if(!this.worldObj.multiplayerWorld) {
+				this.setEating(true);
+			}
+ 		}
+ 	}
 }
--- net/minecraft/src/RenderGlobal.java
+++ net/minecraft/src/RenderGlobal.java
@@ -1,5 +1,6 @@
 package net.minecraft.src;
 
+import java.nio.FloatBuffer;
 import java.nio.IntBuffer;
 import java.util.ArrayList;
 import java.util.Arrays;
@@ -8,7 +9,9 @@
 import java.util.Random;
 import net.minecraft.client.Minecraft;
 import org.lwjgl.opengl.ARBOcclusionQuery;
+import org.lwjgl.BufferUtils;
 import org.lwjgl.opengl.GL11;
+import org.lwjgl.opengl.GL13;
 import org.lwjgl.opengl.GL15;
 
 public class RenderGlobal implements IWorldAccess {
@@ -58,6 +61,7 @@
 	double prevSortZ = -9999.0D;
 	public float damagePartialTime;
 	int frustrumCheckOffset = 0;
+	FloatBuffer floatBuffer;
 
 	public RenderGlobal(Minecraft var1, RenderEngine var2) {
 		this.mc = var1;
@@ -74,6 +78,7 @@
 			ARBOcclusionQuery.glGenQueriesARB(this.glOcclusionQueryBase);
 		}
 
+		this.floatBuffer = BufferUtils.createFloatBuffer(16);
 		this.starGLCallList = GLAllocation.generateDisplayLists(3);
 		GL11.glPushMatrix();
 		GL11.glNewList(this.starGLCallList, GL11.GL_COMPILE);
@@ -268,6 +273,7 @@
 			TileEntityRenderer.staticPlayerX = var4.lastTickPosX + (var4.posX - var4.lastTickPosX) * (double)var3;
 			TileEntityRenderer.staticPlayerY = var4.lastTickPosY + (var4.posY - var4.lastTickPosY) * (double)var3;
 			TileEntityRenderer.staticPlayerZ = var4.lastTickPosZ + (var4.posZ - var4.lastTickPosZ) * (double)var3;
+			this.mc.entityRenderer.func_35806_b((double)var3);
 			List var5 = this.worldObj.getLoadedEntityList();
 			this.countEntitiesTotal = var5.size();
 
@@ -283,7 +289,7 @@
 
 			for(var6 = 0; var6 < var5.size(); ++var6) {
 				var7 = (Entity)var5.get(var6);
-				if(var7.isInRangeToRenderVec3D(var1) && (var7.ignoreFrustumCheck || var2.isBoundingBoxInFrustum(var7.boundingBox)) && (var7 != this.mc.renderViewEntity || this.mc.gameSettings.thirdPersonView || this.mc.renderViewEntity.isPlayerSleeping())) {
+				if(var7.isInRangeToRenderVec3D(var1) && (var7.ignoreFrustumCheck || var2.isBoundingBoxInFrustum(var7.boundingBox)) && (var7 != this.mc.renderViewEntity || (this.mc.gameSettings.thirdPersonView || this.mc.renderViewEntity.isPlayerSleeping()) && !this.worldObj.isTitle())) {
 					int var8 = MathHelper.floor_double(var7.posY);
 					if(var8 < 0) {
 						var8 = 0;
@@ -304,6 +310,7 @@
 				TileEntityRenderer.instance.renderTileEntity((TileEntity)this.tileEntities.get(var6), var3);
 			}
 
+			this.mc.entityRenderer.func_35810_a((double)var3);
 		}
 	}
 
@@ -588,10 +595,13 @@
 	}
 
 	public void renderAllRenderLists(int var1, double var2) {
+		this.mc.entityRenderer.func_35806_b(var2);
+
 		for(int var4 = 0; var4 < this.allRenderLists.length; ++var4) {
 			this.allRenderLists[var4].func_860_a();
 		}
 
+		this.mc.entityRenderer.func_35810_a(var2);
 	}
 
 	public void updateClouds() {
@@ -632,13 +642,15 @@
 			float var10;
 			float var11;
 			float var12;
+			float var16;
+			int var20;
 			if(var18 != null) {
 				GL11.glDisable(GL11.GL_TEXTURE_2D);
 				GL11.glShadeModel(GL11.GL_SMOOTH);
 				GL11.glPushMatrix();
 				GL11.glRotatef(90.0F, 1.0F, 0.0F, 0.0F);
-				var8 = this.worldObj.getCelestialAngle(var1);
-				GL11.glRotatef(var8 > 0.5F ? 180.0F : 0.0F, 0.0F, 0.0F, 1.0F);
+				GL11.glRotatef(MathHelper.sin(this.worldObj.getCelestialAngleRadians(var1)) < 0.0F ? 180.0F : 0.0F, 0.0F, 0.0F, 1.0F);
+				GL11.glRotatef(90.0F, 0.0F, 0.0F, 1.0F);
 				var9 = var18[0];
 				var10 = var18[1];
 				var11 = var18[2];
@@ -658,10 +670,10 @@
 				byte var19 = 16;
 				var17.setColorRGBA_F(var18[0], var18[1], var18[2], 0.0F);
 
-				for(int var20 = 0; var20 <= var19; ++var20) {
+				for(var20 = 0; var20 <= var19; ++var20) {
 					var14 = (float)var20 * (float)Math.PI * 2.0F / (float)var19;
 					float var15 = MathHelper.sin(var14);
-					float var16 = MathHelper.cos(var14);
+					var16 = MathHelper.cos(var14);
 					var17.addVertex((double)(var15 * 120.0F), (double)(var16 * 120.0F), (double)(-var16 * 40.0F * var18[3]));
 				}
 
@@ -679,7 +691,7 @@
 			var10 = 0.0F;
 			GL11.glColor4f(1.0F, 1.0F, 1.0F, var7);
 			GL11.glTranslatef(var8, var9, var10);
-			GL11.glRotatef(0.0F, 0.0F, 0.0F, 1.0F);
+			GL11.glRotatef(-90.0F, 0.0F, 1.0F, 0.0F);
 			GL11.glRotatef(this.worldObj.getCelestialAngle(var1) * 360.0F, 1.0F, 0.0F, 0.0F);
 			var11 = 30.0F;
 			GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.renderEngine.getTexture("/terrain/sun.png"));
@@ -690,12 +702,19 @@
 			var17.addVertexWithUV((double)(-var11), 100.0D, (double)var11, 0.0D, 1.0D);
 			var17.draw();
 			var11 = 20.0F;
-			GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.renderEngine.getTexture("/terrain/moon.png"));
+			GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.renderEngine.getTexture("/terrain/moon_phases.png"));
+			var20 = this.worldObj.func_40475_d(var1);
+			int var26 = var20 % 4;
+			int var27 = var20 / 4 % 2;
+			var16 = (float)(var26 + 0) / 4.0F;
+			float var21 = (float)(var27 + 0) / 2.0F;
+			float var22 = (float)(var26 + 1) / 4.0F;
+			float var23 = (float)(var27 + 1) / 2.0F;
 			var17.startDrawingQuads();
-			var17.addVertexWithUV((double)(-var11), -100.0D, (double)var11, 1.0D, 1.0D);
-			var17.addVertexWithUV((double)var11, -100.0D, (double)var11, 0.0D, 1.0D);
-			var17.addVertexWithUV((double)var11, -100.0D, (double)(-var11), 0.0D, 0.0D);
-			var17.addVertexWithUV((double)(-var11), -100.0D, (double)(-var11), 1.0D, 0.0D);
+			var17.addVertexWithUV((double)(-var11), -100.0D, (double)var11, (double)var22, (double)var23);
+			var17.addVertexWithUV((double)var11, -100.0D, (double)var11, (double)var16, (double)var23);
+			var17.addVertexWithUV((double)var11, -100.0D, (double)(-var11), (double)var16, (double)var21);
+			var17.addVertexWithUV((double)(-var11), -100.0D, (double)(-var11), (double)var22, (double)var21);
 			var17.draw();
 			GL11.glDisable(GL11.GL_TEXTURE_2D);
 			var12 = this.worldObj.getStarBrightness(var1) * var7;
@@ -709,14 +728,52 @@
 			GL11.glEnable(GL11.GL_ALPHA_TEST);
 			GL11.glEnable(GL11.GL_FOG);
 			GL11.glPopMatrix();
+			GL11.glDisable(GL11.GL_TEXTURE_2D);
+			GL11.glColor3f(0.0F, 0.0F, 0.0F);
+			double var30 = this.mc.thePlayer.getPosition(var1).yCoord - 63.0D;
+			if(var30 < 0.0D) {
+				GL11.glPushMatrix();
+				GL11.glTranslatef(0.0F, 12.0F, 0.0F);
+				GL11.glCallList(this.glSkyList2);
+				GL11.glPopMatrix();
+				var9 = 1.0F;
+				var10 = -((float)(var30 + 65.0D));
+				var11 = -var9;
+				var17.startDrawingQuads();
+				var17.setColorRGBA_I(0, 255);
+				var17.addVertex((double)(-var9), (double)var10, (double)var9);
+				var17.addVertex((double)var9, (double)var10, (double)var9);
+				var17.addVertex((double)var9, (double)var11, (double)var9);
+				var17.addVertex((double)(-var9), (double)var11, (double)var9);
+				var17.addVertex((double)(-var9), (double)var11, (double)(-var9));
+				var17.addVertex((double)var9, (double)var11, (double)(-var9));
+				var17.addVertex((double)var9, (double)var10, (double)(-var9));
+				var17.addVertex((double)(-var9), (double)var10, (double)(-var9));
+				var17.addVertex((double)var9, (double)var11, (double)(-var9));
+				var17.addVertex((double)var9, (double)var11, (double)var9);
+				var17.addVertex((double)var9, (double)var10, (double)var9);
+				var17.addVertex((double)var9, (double)var10, (double)(-var9));
+				var17.addVertex((double)(-var9), (double)var10, (double)(-var9));
+				var17.addVertex((double)(-var9), (double)var10, (double)var9);
+				var17.addVertex((double)(-var9), (double)var11, (double)var9);
+				var17.addVertex((double)(-var9), (double)var11, (double)(-var9));
+				var17.addVertex((double)(-var9), (double)var11, (double)(-var9));
+				var17.addVertex((double)(-var9), (double)var11, (double)var9);
+				var17.addVertex((double)var9, (double)var11, (double)var9);
+				var17.addVertex((double)var9, (double)var11, (double)(-var9));
+				var17.draw();
+			}
+
 			if(this.worldObj.worldProvider.func_28112_c()) {
 				GL11.glColor3f(var3 * 0.2F + 0.04F, var4 * 0.2F + 0.04F, var5 * 0.6F + 0.1F);
 			} else {
 				GL11.glColor3f(var3, var4, var5);
 			}
 
-			GL11.glDisable(GL11.GL_TEXTURE_2D);
+			GL11.glPushMatrix();
+			GL11.glTranslatef(0.0F, -((float)(var30 - 16.0D)), 0.0F);
 			GL11.glCallList(this.glSkyList2);
+			GL11.glPopMatrix();
 			GL11.glEnable(GL11.GL_TEXTURE_2D);
 			GL11.glDepthMask(true);
 		}
@@ -750,8 +807,13 @@
 				}
 
 				var10 = 0.5F / 1024.0F;
-				double var22 = this.mc.renderViewEntity.prevPosX + (this.mc.renderViewEntity.posX - this.mc.renderViewEntity.prevPosX) * (double)var1 + (double)(((float)this.cloudOffsetX + var1) * 0.03F);
-				double var13 = this.mc.renderViewEntity.prevPosZ + (this.mc.renderViewEntity.posZ - this.mc.renderViewEntity.prevPosZ) * (double)var1;
+				float var58 = (float)this.cloudOffsetX + var1;
+				if(this.mc.theWorld.isTitle()) {
+					var58 *= 10.0F; 
+				}
+
+				double var22 = this.mc.renderViewEntity.prevPosX + (this.mc.renderViewEntity.posX - this.mc.renderViewEntity.prevPosX) * (double)var1;
+				double var13 = this.mc.renderViewEntity.prevPosZ + (this.mc.renderViewEntity.posZ - this.mc.renderViewEntity.prevPosZ) * (double)var1 + (double)((var58 + var1) * 0.03F);
 				int var15 = MathHelper.floor_double(var22 / 2048.0D);
 				int var16 = MathHelper.floor_double(var13 / 2048.0D);
 				var22 -= (double)(var15 * 2048);
@@ -789,13 +851,34 @@
 		Tessellator var3 = Tessellator.instance;
 		float var4 = 12.0F;
 		float var5 = 4.0F;
-		double var6 = (this.mc.renderViewEntity.prevPosX + (this.mc.renderViewEntity.posX - this.mc.renderViewEntity.prevPosX) * (double)var1 + (double)(((float)this.cloudOffsetX + var1) * 0.03F)) / (double)var4;
-		double var8 = (this.mc.renderViewEntity.prevPosZ + (this.mc.renderViewEntity.posZ - this.mc.renderViewEntity.prevPosZ) * (double)var1) / (double)var4 + (double)0.33F;
+		float var58 = (float)this.cloudOffsetX + var1;
+		if(this.mc.theWorld.isTitle()) {
+			var58 *= 10.0F; 
+		}
+
+		double var6 = (this.mc.renderViewEntity.prevPosX + (this.mc.renderViewEntity.posX - this.mc.renderViewEntity.prevPosX) * (double)var1) / (double)var4 + (double)0.33F;
+		double var8 = (this.mc.renderViewEntity.prevPosZ + (this.mc.renderViewEntity.posZ - this.mc.renderViewEntity.prevPosZ) * (double)var1 + (double)((var58 + var1) * 0.03F)) / (double)var4;
 		float var10 = this.worldObj.worldProvider.getCloudHeight() - var2 + 0.33F;
 		int var11 = MathHelper.floor_double(var6 / 2048.0D);
 		int var12 = MathHelper.floor_double(var8 / 2048.0D);
 		var6 -= (double)(var11 * 2048);
 		var8 -= (double)(var12 * 2048);
+		GL13.glActiveTexture(GL13.GL_TEXTURE1);
+		GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.renderEngine.getTexture("/fluff.png"));
+		GL11.glTexGeni(GL11.GL_S, GL11.GL_TEXTURE_GEN_MODE, GL11.GL_OBJECT_LINEAR);
+		GL11.glTexGen(GL11.GL_S, GL11.GL_OBJECT_PLANE, this.CalcFloatBuffer(1.0F, 0.0F));
+		GL11.glTexGeni(GL11.GL_T, GL11.GL_TEXTURE_GEN_MODE, GL11.GL_OBJECT_LINEAR);
+		GL11.glTexGen(GL11.GL_T, GL11.GL_OBJECT_PLANE, this.CalcFloatBuffer(0.0F, 1.0F));
+		GL11.glEnable(GL11.GL_TEXTURE_GEN_S);
+		GL11.glEnable(GL11.GL_TEXTURE_GEN_T);
+		GL11.glEnable(GL11.GL_TEXTURE_2D);
+		GL11.glMatrixMode(GL11.GL_TEXTURE);
+		GL11.glLoadIdentity();
+		GL11.glScalef(0.25F, 0.25F, 0.25F);
+		GL11.glTranslatef((float)var6, (float)var8, 0.0F);
+		GL11.glMatrixMode(GL11.GL_MODELVIEW);
+		GL13.glActiveTexture(GL13.GL_TEXTURE0);
+		GL11.glEnable(GL11.GL_TEXTURE_2D);
 		GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.renderEngine.getTexture("/environment/clouds.png"));
 		GL11.glEnable(GL11.GL_BLEND);
 		GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
@@ -920,7 +1003,19 @@
 		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 		GL11.glDisable(GL11.GL_BLEND);
 		GL11.glEnable(GL11.GL_CULL_FACE);
+		GL13.glActiveTexture(GL13.GL_TEXTURE1);
+		GL11.glDisable(GL11.GL_TEXTURE_2D);
+		GL11.glDisable(GL11.GL_TEXTURE_GEN_S);
+		GL11.glDisable(GL11.GL_TEXTURE_GEN_T);
+		GL13.glActiveTexture(GL13.GL_TEXTURE0);
 	}
+
+	private FloatBuffer CalcFloatBuffer(float var1, float var2) {
+		this.floatBuffer.clear();
+		this.floatBuffer.put(var1).put(0.0F).put(var2).put(0.0F);
+		this.floatBuffer.flip();
+		return this.floatBuffer;
+ 	}
 
 	public boolean updateRenderers(EntityLiving var1, boolean var2) {
 		boolean var3 = false;
@@ -1072,6 +1167,7 @@
 		GL11.glEnable(GL11.GL_ALPHA_TEST);
 		GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE);
 		GL11.glColor4f(1.0F, 1.0F, 1.0F, (MathHelper.sin((float)System.currentTimeMillis() / 100.0F) * 0.2F + 0.4F) * 0.5F);
+		GL11.glScalef(0.998F, 0.998F, 0.998F);
 		int var8;
 		if(var3 == 0) {
 			if(this.damagePartialTime > 0.0F) {
@@ -1282,6 +1378,12 @@
 			if(var14 * var14 + var16 * var16 + var18 * var18 <= var20 * var20) {
 				if(var1.equals("bubble")) {
 					this.mc.effectRenderer.addEffect(new EntityBubbleFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else if(var1.equals("suspended")) {
+					this.mc.effectRenderer.addEffect(new EntitySuspendFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else if(var1.equals("depthsuspend")) {
+					this.mc.effectRenderer.addEffect(new EntityAuraFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else if(var1.equals("crit")) {
+					this.mc.effectRenderer.addEffect(new EntityCritFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("smoke")) {
 					this.mc.effectRenderer.addEffect(new EntitySmokeFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("note")) {
@@ -1298,19 +1400,31 @@
 					this.mc.effectRenderer.addEffect(new EntityFootStepFX(this.renderEngine, this.worldObj, var2, var4, var6));
 				} else if(var1.equals("splash")) {
 					this.mc.effectRenderer.addEffect(new EntitySplashFX(this.worldObj, var2, var4, var6, var8, var10, var12));
+				} else if(var1.equals("largesplash")) {
+					this.mc.effectRenderer.addEffect(new EntityLargeSplashFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("largesmoke")) {
 					this.mc.effectRenderer.addEffect(new EntitySmokeFX(this.worldObj, var2, var4, var6, var8, var10, var12, 2.5F));
 				} else if(var1.equals("reddust")) {
 					this.mc.effectRenderer.addEffect(new EntityReddustFX(this.worldObj, var2, var4, var6, (float)var8, (float)var10, (float)var12));
 				} else if(var1.equals("snowballpoof")) {
 					this.mc.effectRenderer.addEffect(new EntitySlimeFX(this.worldObj, var2, var4, var6, Item.snowball));
+				} else if(var1.equals("dripWater")) {
+					this.mc.effectRenderer.addEffect(new EntityDropParticleFX(this.worldObj, var2, var4, var6, Material.water));
+				} else if(var1.equals("dripLava")) {
+					this.mc.effectRenderer.addEffect(new EntityDropParticleFX(this.worldObj, var2, var4, var6, Material.lava));
 				} else if(var1.equals("snowshovel")) {
 					this.mc.effectRenderer.addEffect(new EntitySnowShovelFX(this.worldObj, var2, var4, var6, var8, var10, var12));
 				} else if(var1.equals("slime")) {
 					this.mc.effectRenderer.addEffect(new EntitySlimeFX(this.worldObj, var2, var4, var6, Item.slimeBall));
 				} else if(var1.equals("heart")) {
 					this.mc.effectRenderer.addEffect(new EntityHeartFX(this.worldObj, var2, var4, var6, var8, var10, var12));
-				}
+				} else {
+					int var24;
+					if(var1.startsWith("iconcrack_")) {
+						var24 = Integer.parseInt(var1.substring(var1.indexOf("_") + 1));
+						this.mc.effectRenderer.addEffect(new EntityBreakingFX(this.worldObj, var2, var4, var6, var8, var10, var12, Item.itemsList[var24]));
+					}
+ 				}
 
 			}
 		}
@@ -1340,13 +1454,6 @@
 	}
 
 	public void updateAllRenderers() {
-		for(int var1 = 0; var1 < this.worldRenderers.length; ++var1) {
-			if(this.worldRenderers[var1].isChunkLit && !this.worldRenderers[var1].needsUpdate) {
-				this.worldRenderersToUpdate.add(this.worldRenderers[var1]);
-				this.worldRenderers[var1].markDirty();
-			}
-		}
-
 	}
 
 	public void doNothingWithTileEntity(int var1, int var2, int var3, TileEntity var4) {
--- net/minecraft/src/ThreadDownloadResources.java
+++ net/minecraft/src/ThreadDownloadResources.java
@@ -16,6 +16,7 @@
 
 public class ThreadDownloadResources extends Thread {
 	public File resourcesFolder;
+	public File customFolder;
 	private Minecraft mc;
 	private boolean closing = false;
 
@@ -24,12 +25,32 @@
 		this.setName("Resource download thread");
 		this.setDaemon(true);
 		this.resourcesFolder = new File(var1, "resources/");
+		this.customFolder = new File(var1, "custom_resources/");
 		if(!this.resourcesFolder.exists() && !this.resourcesFolder.mkdirs()) {
 			throw new RuntimeException("The working directory could not be created: " + this.resourcesFolder);
 		}
+
+		if(!this.customFolder.exists() && !this.customFolder.mkdirs()) {
+			throw new RuntimeException("The working directory could not be created: " + this.customFolder);
+		}
+
+		try {
+			String[] folderNames = new String[]{"sound", "newsound", "streaming", "music", "newmusic"};
+			File file;
+			for(int i = 0; i < folderNames.length; ++i) {
+				file = new File(this.customFolder, folderNames[i]);
+				if(!file.exists() && !file.mkdirs()) {
+					throw new RuntimeException("The working directory could not be created: " + file);
+				}
+			}
+		} catch (Exception e) {
+			e.printStackTrace();
+		}
 	}
 
 	public void run() {
+		this.loadResource(this.customFolder, "");
+
 		try {
 			URL var1 = new URL("http://s3.amazonaws.com/MinecraftResources/");
 			DocumentBuilderFactory var2 = DocumentBuilderFactory.newInstance();
@@ -61,6 +82,7 @@
 	}
 
 	public void reloadResources() {
+		this.loadResource(this.customFolder, "");
 		this.loadResource(this.resourcesFolder, "");
 	}
 
@@ -127,6 +149,8 @@
 			var7.write(var5, 0, var9);
 		} while(!this.closing);
 
+		var6.close();
+		var7.close();
 	}
 
 	public void closeMinecraft() {
--- net/minecraft/src/BlockFluid.java
+++ net/minecraft/src/BlockFluid.java
@@ -3,6 +3,8 @@
 import java.util.Random;
 
 public abstract class BlockFluid extends Block {
+	protected static boolean graphicsLevel;
+
 	protected BlockFluid(int var1, Material var2) {
 		super(var1, (var2 == Material.lava ? 14 : 12) * 16 + 13, var2);
 		float var3 = 0.0F;
@@ -11,8 +13,19 @@
 		this.setTickOnLoad(true);
 	}
 
+	public int getRenderColor(int var1) {
+		return this.blockMaterial == Material.water ? 25828 : (graphicsLevel && this.blockMaterial == Material.lava ? 16722688 : 16777215);
+	}
+
 	public int colorMultiplier(IBlockAccess var1, int var2, int var3, int var4) {
-		return 16777215;
+		if(this.blockMaterial == Material.water) {
+			var1.getWorldChunkManager().func_4069_a(var2, var4, 1, 1);
+			double var5 = var1.getWorldChunkManager().temperature[0];
+			double var7 = var1.getWorldChunkManager().humidity[0];
+			return ColorizerWater.getWaterColor(var5, var7);
+		} else {
+			return graphicsLevel && this.blockMaterial == Material.lava ? 16722688 : 16777215;
+		}
 	}
 
 	public static float getPercentAir(int var0) {
@@ -59,12 +72,12 @@
 
 	public boolean getIsBlockSolid(IBlockAccess var1, int var2, int var3, int var4, int var5) {
 		Material var6 = var1.getBlockMaterial(var2, var3, var4);
-		return var6 == this.blockMaterial ? false : (var6 == Material.ice ? false : (var5 == 1 ? true : super.getIsBlockSolid(var1, var2, var3, var4, var5)));
+		return var6 == this.blockMaterial ? false : (var5 == 1 ? true : (var6 == Material.ice ? false : super.getIsBlockSolid(var1, var2, var3, var4, var5)));
 	}
 
 	public boolean shouldSideBeRendered(IBlockAccess var1, int var2, int var3, int var4, int var5) {
 		Material var6 = var1.getBlockMaterial(var2, var3, var4);
-		return var6 == this.blockMaterial ? false : (var6 == Material.ice ? false : (var5 == 1 ? true : super.shouldSideBeRendered(var1, var2, var3, var4, var5)));
+		return var6 == this.blockMaterial ? false : (var5 == 1 ? true : (var6 == Material.ice ? false : super.shouldSideBeRendered(var1, var2, var3, var4, var5)));
 	}
 
 	public AxisAlignedBB getCollisionBoundingBoxFromPool(World var1, int var2, int var3, int var4) {
@@ -176,6 +189,16 @@
 		return this.blockMaterial == Material.water ? 5 : (this.blockMaterial == Material.lava ? 30 : 0);
 	}
 
+	public int func_35275_c(IBlockAccess var1, int var2, int var3, int var4) {
+		int var5 = var1.func_35451_b(var2, var3, var4, 0);
+		int var6 = var1.func_35451_b(var2, var3 + 1, var4, 0);
+		int var7 = var5 & 255;
+		int var8 = var6 & 255;
+		int var9 = var5 >> 16 & 255;
+		int var10 = var6 >> 16 & 255;
+		return (var7 > var8 ? var7 : var8) | (var9 > var10 ? var9 : var10) << 16;
+	}
+
 	public float getBlockBrightness(IBlockAccess var1, int var2, int var3, int var4) {
 		float var5 = var1.getLightBrightness(var2, var3, var4);
 		float var6 = var1.getLightBrightness(var2, var3 + 1, var4);
@@ -191,6 +214,83 @@
 	}
 
 	public void randomDisplayTick(World var1, int var2, int var3, int var4, Random var5) {
+		int var7;
+		if(this.blockMaterial == Material.water) {
+			if(var5.nextInt(10) == 0) {
+				var7 = var1.getBlockMetadata(var2, var3, var4);
+				if(var7 <= 0 || var7 >= 8) {
+					var1.spawnParticle("suspended", (double)((float)var2 + var5.nextFloat()), (double)((float)var3 + var5.nextFloat()), (double)((float)var4 + var5.nextFloat()), 0.0D, 0.0D, 0.0D);
+				}
+			}
+
+			for(var7 = 0; var7 < 4; ++var7) {
+				int var8 = var5.nextInt(4);
+				int var9 = var2;
+				int var10 = var4;
+				if(var8 == 0) {
+					--var9;
+				}
+
+				if(var8 == 1) {
+					++var9;
+				}
+
+				if(var8 == 2) {
+					--var10;
+				}
+
+				if(var8 == 3) {
+					++var10;
+				}
+
+				Material var11 = var1.getBlockMaterial(var9, var3 - 1, var10);
+				if(var1.getBlockMaterial(var9, var3, var10) == Material.air && (var11.getIsSolid() || var11.getIsLiquid())) {
+					float var12 = 0.0625F;
+					double var13 = (float)var2 + var5.nextFloat();
+					double var15 = (float)var3 + var5.nextFloat();
+					double var17 = (float)var4 + var5.nextFloat();
+					if(var8 == 0) {
+						var13 = (float)var2 - var12;
+					}
+
+					if(var8 == 1) {
+						var13 = (float)(var2 + 1) + var12;
+					}
+
+					if(var8 == 2) {
+						var17 = (float)var4 - var12;
+					}
+
+					if(var8 == 3) {
+						var17 = (float)(var4 + 1) + var12;
+					}
+
+					double var19 = 0.0D;
+					double var21 = 0.0D;
+					if(var8 == 0) {
+						var19 = -var12;
+					}
+
+					if(var8 == 1) {
+						var19 = var12;
+					}
+
+					if(var8 == 2) {
+						var21 = -var12;
+					}
+
+					if(var8 == 3) {
+						var21 = var12;
+					}
+
+					var1.spawnParticle("splash", var13, var15, var17, var19, 0.0D, var21);
+				}
+			}
+		}
+
+		double var12;
+		double var8;
+		double var10;
 		if(this.blockMaterial == Material.water && var5.nextInt(64) == 0) {
 			int var6 = var1.getBlockMetadata(var2, var3, var4);
 			if(var6 > 0 && var6 < 8) {
@@ -199,12 +299,29 @@
 		}
 
 		if(this.blockMaterial == Material.lava && var1.getBlockMaterial(var2, var3 + 1, var4) == Material.air && !var1.isBlockOpaqueCube(var2, var3 + 1, var4) && var5.nextInt(100) == 0) {
-			double var12 = (double)((float)var2 + var5.nextFloat());
-			double var8 = (double)var3 + this.maxY;
-			double var10 = (double)((float)var4 + var5.nextFloat());
-			var1.spawnParticle("lava", var12, var8, var10, 0.0D, 0.0D, 0.0D);
-		}
-
+			if(var5.nextInt(100) == 0) {
+				var12 = (double)((float)var2 + var5.nextFloat());
+				var8 = (double)var3 + this.maxY;
+				var10 = (double)((float)var4 + var5.nextFloat());
+				var1.spawnParticle("lava", var12, var8, var10, 0.0D, 0.0D, 0.0D);
+				var1.playSoundEffect(var12, var8, var10, "liquid.lavapop", 0.2F + var5.nextFloat() * 0.2F, 0.9F + var5.nextFloat() * 0.15F);
+			}
+
+			if(var5.nextInt(200) == 0) {
+				var1.playSoundEffect((double)var2, (double)var3, (double)var4, "liquid.lava", 0.2F + var5.nextFloat() * 0.2F, 0.9F + var5.nextFloat() * 0.15F);
+			}
+		}
+
+		if(var5.nextInt(10) == 0 && var1.isBlockNormalCube(var2, var3 - 1, var4) && !var1.getBlockMaterial(var2, var3 - 2, var4).getIsSolid()) {
+			var12 = (double)((float)var2 + var5.nextFloat());
+			var8 = (double)var3 - 1.05D;
+			var10 = (double)((float)var4 + var5.nextFloat());
+			if(this.blockMaterial == Material.water) {
+				var1.spawnParticle("dripWater", var12, var8, var10, 0.0D, 0.0D, 0.0D);
+			} else {
+				var1.spawnParticle("dripLava", var12, var8, var10, 0.0D, 0.0D, 0.0D);
+			}
+		}
 	}
 
 	public static double func_293_a(IBlockAccess var0, int var1, int var2, int var3, Material var4) {
--- net/minecraft/src/EntitySkeleton.java
+++ net/minecraft/src/EntitySkeleton.java
@@ -36,13 +36,12 @@
 			double var3 = var1.posX - this.posX;
 			double var5 = var1.posZ - this.posZ;
 			if(this.attackTime == 0) {
-				EntityArrow var7 = new EntityArrow(this.worldObj, this);
-				var7.posY += (double)1.4F;
-				double var8 = var1.posY + (double)var1.getEyeHeight() - (double)0.2F - var7.posY;
+				EntityArrow var7 = new EntityArrow(this.worldObj, this, 1.0F);
+				double var8 = var1.posY + (double)var1.getEyeHeight() - (double)0.7F - var7.posY;
 				float var10 = MathHelper.sqrt_double(var3 * var3 + var5 * var5) * 0.2F;
 				this.worldObj.playSoundAtEntity(this, "random.bow", 1.0F, 1.0F / (this.rand.nextFloat() * 0.4F + 0.8F));
 				this.worldObj.entityJoinedWorld(var7);
-				var7.setArrowHeading(var3, var8 + (double)var10, var5, 0.6F, 12.0F);
+				var7.setArrowHeading(var3, var8 + (double)var10, var5, 1.6F, 12.0F);
 				this.attackTime = 30;
 			}
 
--- net/minecraft/src/GuiAchievements.java
+++ net/minecraft/src/GuiAchievements.java
@@ -231,10 +231,7 @@
 
 		Achievement var27 = null;
 		RenderItem var29 = new RenderItem();
-		GL11.glPushMatrix();
-		GL11.glRotatef(180.0F, 1.0F, 0.0F, 0.0F);
-		RenderHelper.enableStandardItemLighting();
-		GL11.glPopMatrix();
+		RenderHelper.func_41089_c();
 		GL11.glDisable(GL11.GL_LIGHTING);
 		GL11.glEnable(GL12.GL_RESCALE_NORMAL);
 		GL11.glEnable(GL11.GL_COLOR_MATERIAL);
@@ -274,7 +271,7 @@
 
 				GL11.glEnable(GL11.GL_LIGHTING);
 				GL11.glEnable(GL11.GL_CULL_FACE);
-				var29.renderItemIntoGUI(this.mc.fontRenderer, this.mc.renderEngine, var30.theItemStack, var33 + 3, var34 + 3);
+				var29.renderItemIntoGUI(this.mc.fontRenderer, this.mc.renderEngine, var30.theItemStack, var33 + 3, var34 + 3, null);
 				GL11.glDisable(GL11.GL_LIGHTING);
 				if(!this.field_27120_x.func_27181_b(var30)) {
 					var29.field_27004_a = true;
--- net/minecraft/src/EffectRenderer.java
+++ net/minecraft/src/EffectRenderer.java
@@ -47,11 +47,11 @@
 	}
 
 	public void renderParticles(Entity var1, float var2) {
-		float var3 = MathHelper.cos(var1.rotationYaw * (float)Math.PI / 180.0F);
-		float var4 = MathHelper.sin(var1.rotationYaw * (float)Math.PI / 180.0F);
-		float var5 = -var4 * MathHelper.sin(var1.rotationPitch * (float)Math.PI / 180.0F);
-		float var6 = var3 * MathHelper.sin(var1.rotationPitch * (float)Math.PI / 180.0F);
-		float var7 = MathHelper.cos(var1.rotationPitch * (float)Math.PI / 180.0F);
+		float var3 = ActiveRenderInfo.field_41070_d;
+		float var4 = ActiveRenderInfo.field_41068_f;
+		float var5 = ActiveRenderInfo.field_41069_g;
+		float var6 = ActiveRenderInfo.field_41078_h;
+		float var7 = ActiveRenderInfo.field_41071_e;
 		EntityFX.interpPosX = var1.lastTickPosX + (var1.posX - var1.lastTickPosX) * (double)var2;
 		EntityFX.interpPosY = var1.lastTickPosY + (var1.posY - var1.lastTickPosY) * (double)var2;
 		EntityFX.interpPosZ = var1.lastTickPosZ + (var1.posZ - var1.lastTickPosZ) * (double)var2;
@@ -73,10 +73,12 @@
 
 				GL11.glBindTexture(GL11.GL_TEXTURE_2D, var9);
 				Tessellator var10 = Tessellator.instance;
+				GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 				var10.startDrawingQuads();
 
 				for(int var11 = 0; var11 < this.fxLayers[var8].size(); ++var11) {
 					EntityFX var12 = (EntityFX)this.fxLayers[var8].get(var11);
+					var10.func_35835_b(var12.func_35115_a(var2));
 					var12.renderParticle(var10, var2, var3, var7, var4, var5, var6);
 				}
 
@@ -93,6 +95,7 @@
 
 			for(int var5 = 0; var5 < this.fxLayers[var3].size(); ++var5) {
 				EntityFX var6 = (EntityFX)this.fxLayers[var3].get(var5);
+				var4.func_35835_b(var6.func_35115_a(var2));
 				var6.renderParticle(var4, var2, 0.0F, 0.0F, 0.0F, 0.0F, 0.0F);
 			}
 
--- net/minecraft/src/ItemStack.java
+++ net/minecraft/src/ItemStack.java
@@ -72,6 +72,10 @@
 		return this.getItem().onItemRightClick(this, var1, var2);
 	}
 
+	public ItemStack onFoodEaten(World var1, EntityPlayer var2) {
+		return this.getItem().onFoodEaten(this, var1, var2);
+	}
+
 	public NBTTagCompound writeToNBT(NBTTagCompound var1) {
 		var1.setShort("id", (short)this.itemID);
 		var1.setByte("Count", (byte)this.stackSize);
@@ -121,10 +125,11 @@
 		return Item.itemsList[this.itemID].getMaxDamage();
 	}
 
-	public void damageItem(int var1, Entity var2) {
+	public void damageItem(int var1, EntityLiving var2) {
 		if(this.isItemStackDamageable()) {
 			this.itemDamage += var1;
-			if(this.itemDamage > this.getMaxDamage()) {
+			if(this.itemDamage >= this.getMaxDamage()) {
+				var2.func_41005_b(this);
 				if(var2 instanceof EntityPlayer) {
 					((EntityPlayer)var2).addStat(StatList.field_25170_B[this.itemID], 1);
 				}
@@ -215,4 +220,16 @@
 	public boolean isStackEqual(ItemStack var1) {
 		return this.itemID == var1.itemID && this.stackSize == var1.stackSize && this.itemDamage == var1.itemDamage;
 	}
+
+	public int getMaxItemUseDuration() {
+		return this.getItem().getMaxItemUseDuration(this);
+	}
+
+	public EnumAction getItemUseAction() {
+		return this.getItem().getItemUseAction(this);
+	}
+
+	public void onPlayerStoppedUsing(World var1, EntityPlayer var2, int var3) {
+		this.getItem().onPlayerStoppedUsing(this, var1, var2, var3);
+ 	}
 }
--- net/minecraft/src/Entity.java
+++ net/minecraft/src/Entity.java
@@ -187,7 +187,11 @@
 				for(var3 = 0; (float)var3 < 1.0F + this.width * 20.0F; ++var3) {
 					var4 = (this.rand.nextFloat() * 2.0F - 1.0F) * this.width;
 					var5 = (this.rand.nextFloat() * 2.0F - 1.0F) * this.width;
-					this.worldObj.spawnParticle("splash", this.posX + (double)var4, (double)(var2 + 1.0F), this.posZ + (double)var5, this.motionX, this.motionY, this.motionZ);
+					if(this.motionY < -0.5F) {
+						this.worldObj.spawnParticle("largesplash", this.posX + (double)var4, (double)(var2 + 1.0F), this.posZ + (double)var5, this.motionX, this.motionY, this.motionZ);
+					} else {
+						this.worldObj.spawnParticle("splash", this.posX + (double)var4, (double)(var2 + 1.0F), this.posZ + (double)var5, this.motionX, this.motionY, this.motionZ);
+					}
 				}
 			}
 
@@ -584,6 +588,20 @@
 		}
 	}
 
+	public int func_35115_a(float var1) {
+		int var2 = MathHelper.floor_double(this.posX);
+		int var3 = MathHelper.floor_double(this.posZ);
+		World var10000 = this.worldObj;
+		this.worldObj.getClass();
+		if(var10000.blockExists(var2, 128 / 2, var3)) {
+			double var4 = (this.boundingBox.maxY - this.boundingBox.minY) * 0.66D;
+			int var6 = MathHelper.floor_double(this.posY - (double)this.yOffset + var4);
+			return this.worldObj.func_35451_b(var2, var6, var3, 0);
+		} else {
+			return 0;
+		}
+	}
+
 	public float getEntityBrightness(float var1) {
 		int var2 = MathHelper.floor_double(this.posX);
 		double var3 = (this.boundingBox.maxY - this.boundingBox.minY) * 0.66D;
@@ -666,6 +684,10 @@
 	}
 
 	public void applyEntityCollision(Entity var1) {
+		if((var1 instanceof EntityPlayer || this instanceof EntityPlayer) && this.worldObj.isTitle()) {
+			return;
+		}
+
 		if(var1.riddenByEntity != this && var1.ridingEntity != this) {
 			double var2 = var1.posX - this.posX;
 			double var4 = var1.posZ - this.posZ;
@@ -1025,6 +1047,14 @@
 
 	public boolean isSneaking() {
 		return this.getEntityFlag(1);
+	}
+
+	public boolean isEating() {
+		return this.getEntityFlag(4);
+	}
+
+	public void setEating(boolean var1) {
+		this.setEntityFlag(4, var1);
 	}
 
 	protected boolean getEntityFlag(int var1) {
--- net/minecraft/src/EntityChicken.java
+++ net/minecraft/src/EntityChicken.java
@@ -12,7 +12,7 @@
 	public EntityChicken(World var1) {
 		super(var1);
 		this.texture = "/mob/chicken.png";
-		this.setSize(0.3F, 0.4F);
+		this.setSize(0.4F, 0.7F);
 		this.health = 4;
 		this.timeUntilNextEgg = this.rand.nextInt(6000) + 6000;
 	}
--- net/minecraft/src/ChunkPosition.java
+++ net/minecraft/src/ChunkPosition.java
@@ -11,6 +11,10 @@
 		this.z = var3;
 	}
 
+	public ChunkPosition(Vec3D var1) {
+		this(MathHelper.floor_double(var1.xCoord), MathHelper.floor_double(var1.yCoord), MathHelper.floor_double(var1.zCoord));
+	}
+
 	public boolean equals(Object var1) {
 		if(!(var1 instanceof ChunkPosition)) {
 			return false;
--- /dev/null
+++ net/minecraft/src/EntityDropParticleFX.java
@@ -1,0 +1,98 @@
+package net.minecraft.src;
+
+public class EntityDropParticleFX extends EntityFX {
+	private Material field_40103_a;
+	private int field_40104_aw;
+
+	public EntityDropParticleFX(World var1, double var2, double var4, double var6, Material var8) {
+		super(var1, var2, var4, var6, 0.0D, 0.0D, 0.0D);
+		this.motionX = this.motionY = this.motionZ = 0.0D;
+		if(var8 == Material.water) {
+			var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+			int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+			this.particleRed = (float)(var14 >> 16 & 255) / 255.0F;
+			this.particleGreen = (float)(var14 >> 8 & 255) / 255.0F;
+			this.particleBlue = (float)(var14 & 255) / 255.0F;
+		} else {
+			this.particleRed = 1.0F;
+			this.particleGreen = 0.0F;
+			this.particleBlue = 0.0F;
+		}
+
+		this.particleTextureIndex = 113;
+		this.setSize(0.01F, 0.01F);
+		this.particleGravity = 0.06F;
+		this.field_40103_a = var8;
+		this.field_40104_aw = 40;
+		this.particleMaxAge = (int)(64.0D / (Math.random() * 0.8D + 0.2D));
+		this.motionX = this.motionY = this.motionZ = 0.0D;
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		super.renderParticle(var1, var2, var3, var4, var5, var6, var7);
+	}
+
+	public int func_35115_a(float var1) {
+		return this.field_40103_a == Material.water ? super.func_35115_a(var1) : 257;
+	}
+
+	public float getEntityBrightness(float var1) {
+		return this.field_40103_a == Material.water ? super.getEntityBrightness(var1) : 1.0F;
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		if(this.field_40103_a == Material.water) {
+			this.worldObj.getWorldChunkManager().func_4069_a(MathHelper.floor_double(this.posX), MathHelper.floor_double(this.posZ), 1, 1);
+			int var14 = ColorizerWater.getWaterColor(this.worldObj.getWorldChunkManager().temperature[0], this.worldObj.getWorldChunkManager().humidity[0]);
+			this.particleRed = (float)(var14 >> 16 & 255) / 255.0F;
+			this.particleGreen = (float)(var14 >> 8 & 255) / 255.0F;
+			this.particleBlue = (float)(var14 & 255) / 255.0F;
+		} else {
+			this.particleRed = 1.0F;
+			this.particleGreen = 16.0F / (float)(40 - this.field_40104_aw + 16);
+			this.particleBlue = 4.0F / (float)(40 - this.field_40104_aw + 8);
+		}
+
+		this.motionY -= (double)this.particleGravity;
+		if(this.field_40104_aw-- > 0) {
+			this.motionX *= 0.02D;
+			this.motionY *= 0.02D;
+			this.motionZ *= 0.02D;
+			this.particleTextureIndex = 113;
+		} else {
+			this.particleTextureIndex = 112;
+		}
+
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		this.motionX *= (double)0.98F;
+		this.motionY *= (double)0.98F;
+		this.motionZ *= (double)0.98F;
+		if(this.particleMaxAge-- <= 0) {
+			this.setEntityDead();
+		}
+
+		if(this.onGround) {
+			if(this.field_40103_a == Material.water) {
+				this.setEntityDead();
+				this.worldObj.spawnParticle("splash", this.posX, this.posY, this.posZ, 0.0D, 0.0D, 0.0D);
+			} else {
+				this.particleTextureIndex = 114;
+			}
+
+			this.motionX *= (double)0.7F;
+			this.motionZ *= (double)0.7F;
+		}
+
+		Material var1 = this.worldObj.getBlockMaterial(MathHelper.floor_double(this.posX), MathHelper.floor_double(this.posY), MathHelper.floor_double(this.posZ));
+		if(var1.getIsLiquid() || var1.isSolid()) {
+			double var2 = (double)((float)(MathHelper.floor_double(this.posY) + 1) - BlockFluid.getPercentAir(this.worldObj.getBlockMetadata(MathHelper.floor_double(this.posX), MathHelper.floor_double(this.posY), MathHelper.floor_double(this.posZ))));
+			if(this.posY < var2) {
+				this.setEntityDead();
+			}
+		}
+
+	}
+}
--- /dev/null
+++ net/minecraft/src/EntityCrit2FX.java
@@ -1,0 +1,49 @@
+package net.minecraft.src;
+
+public class EntityCrit2FX extends EntityFX {
+	private Entity field_35134_a;
+	private int field_35133_ay;
+	private int field_35132_az;
+	private String field_40105_ay;
+
+	public EntityCrit2FX(World var1, Entity var2) {
+		this(var1, var2, "crit");
+	}
+
+	public EntityCrit2FX(World var1, Entity var2, String var3) {
+		super(var1, var2.posX, var2.boundingBox.minY + (double)(var2.height / 2.0F), var2.posZ, var2.motionX, var2.motionY, var2.motionZ);
+		this.field_35133_ay = 0;
+		this.field_35132_az = 0;
+		this.field_35134_a = var2;
+		this.field_35132_az = 3;
+		this.field_40105_ay = var3;
+		this.onUpdate();
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+	}
+
+	public void onUpdate() {
+		for(int var1 = 0; var1 < 16; ++var1) {
+			double var2 = (double)(this.rand.nextFloat() * 2.0F - 1.0F);
+			double var4 = (double)(this.rand.nextFloat() * 2.0F - 1.0F);
+			double var6 = (double)(this.rand.nextFloat() * 2.0F - 1.0F);
+			if(var2 * var2 + var4 * var4 + var6 * var6 <= 1.0D) {
+				double var8 = this.field_35134_a.posX + var2 * (double)this.field_35134_a.width / 4.0D;
+				double var10 = this.field_35134_a.boundingBox.minY + (double)(this.field_35134_a.height / 2.0F) + var4 * (double)this.field_35134_a.height / 4.0D;
+				double var12 = this.field_35134_a.posZ + var6 * (double)this.field_35134_a.width / 4.0D;
+				this.worldObj.spawnParticle(this.field_40105_ay, var8, var10, var12, var2, var4 + 0.2D, var6);
+			}
+		}
+
+		++this.field_35133_ay;
+		if(this.field_35133_ay >= this.field_35132_az) {
+			this.setEntityDead();
+		}
+
+	}
+
+	public int getFXLayer() {
+		return 3;
+	}
+}
--- net/minecraft/src/ModelSlime.java
+++ net/minecraft/src/ModelSlime.java
@@ -7,16 +7,16 @@
 	ModelRenderer slimeMouth;
 
 	public ModelSlime(int var1) {
-		this.slimeBodies = new ModelRenderer(0, var1);
+		this.slimeBodies = new ModelRenderer(this, 0, var1);
 		this.slimeBodies.addBox(-4.0F, 16.0F, -4.0F, 8, 8, 8);
 		if(var1 > 0) {
-			this.slimeBodies = new ModelRenderer(0, var1);
+			this.slimeBodies = new ModelRenderer(this, 0, var1);
 			this.slimeBodies.addBox(-3.0F, 17.0F, -3.0F, 6, 6, 6);
-			this.slimeRightEye = new ModelRenderer(32, 0);
+			this.slimeRightEye = new ModelRenderer(this, 32, 0);
 			this.slimeRightEye.addBox(-3.25F, 18.0F, -3.5F, 2, 2, 2);
-			this.slimeLeftEye = new ModelRenderer(32, 4);
+			this.slimeLeftEye = new ModelRenderer(this, 32, 4);
 			this.slimeLeftEye.addBox(1.25F, 18.0F, -3.5F, 2, 2, 2);
-			this.slimeMouth = new ModelRenderer(32, 8);
+			this.slimeMouth = new ModelRenderer(this, 32, 8);
 			this.slimeMouth.addBox(0.0F, 21.0F, -3.5F, 1, 1, 1);
 		}
 
--- net/minecraft/src/ModelMinecart.java
+++ net/minecraft/src/ModelMinecart.java
@@ -4,12 +4,12 @@
 	public ModelRenderer[] sideModels = new ModelRenderer[7];
 
 	public ModelMinecart() {
-		this.sideModels[0] = new ModelRenderer(0, 10);
-		this.sideModels[1] = new ModelRenderer(0, 0);
-		this.sideModels[2] = new ModelRenderer(0, 0);
-		this.sideModels[3] = new ModelRenderer(0, 0);
-		this.sideModels[4] = new ModelRenderer(0, 0);
-		this.sideModels[5] = new ModelRenderer(44, 10);
+		this.sideModels[0] = new ModelRenderer(this, 0, 10);
+		this.sideModels[1] = new ModelRenderer(this, 0, 0);
+		this.sideModels[2] = new ModelRenderer(this, 0, 0);
+		this.sideModels[3] = new ModelRenderer(this, 0, 0);
+		this.sideModels[4] = new ModelRenderer(this, 0, 0);
+		this.sideModels[5] = new ModelRenderer(this, 44, 10);
 		byte var1 = 20;
 		byte var2 = 8;
 		byte var3 = 16;
--- net/minecraft/src/TileEntityRenderer.java
+++ net/minecraft/src/TileEntityRenderer.java
@@ -69,8 +69,11 @@
 
 	public void renderTileEntity(TileEntity var1, float var2) {
 		if(var1.getDistanceFrom(this.playerX, this.playerY, this.playerZ) < 4096.0D) {
-			float var3 = this.worldObj.getLightBrightness(var1.xCoord, var1.yCoord, var1.zCoord);
-			GL11.glColor3f(var3, var3, var3);
+			int var3 = this.worldObj.func_35451_b(var1.xCoord, var1.yCoord, var1.zCoord, 0);
+			int var4 = var3 % 65536;
+			int var5 = var3 / 65536;
+			OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapEnabled, (float)var4 / 1.0F, (float)var5 / 1.0F);
+			GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 			this.renderTileEntityAt(var1, (double)var1.xCoord - staticPlayerX, (double)var1.yCoord - staticPlayerY, (double)var1.zCoord - staticPlayerZ, var2);
 		}
 
--- net/minecraft/src/ItemBow.java
+++ net/minecraft/src/ItemBow.java
@@ -4,15 +4,52 @@
 	public ItemBow(int var1) {
 		super(var1);
 		this.maxStackSize = 1;
+		this.setMaxDamage(384);
 	}
 
-	public ItemStack onItemRightClick(ItemStack var1, World var2, EntityPlayer var3) {
-		if(var3.inventory.consumeInventoryItem(Item.arrow.shiftedIndex)) {
-			var2.playSoundAtEntity(var3, "random.bow", 1.0F, 1.0F / (itemRand.nextFloat() * 0.4F + 0.8F));
-			if(!var2.multiplayerWorld) {
-				var2.entityJoinedWorld(new EntityArrow(var2, var3));
+	public void onPlayerStoppedUsing(ItemStack var1, World var2, EntityPlayer var3, int var4) {
+		if(var3.inventory.hasItem(Item.arrow.shiftedIndex)) {
+			int var5 = this.getMaxItemUseDuration(var1) - var4;
+			float var6 = (float)var5 / 20.0F;
+			var6 = (var6 * var6 + var6 * 2.0F) / 3.0F;
+			if((double)var6 < 0.1D) {
+				return;
+			}
+
+			if(var6 > 1.0F) {
+				var6 = 1.0F;
+			}
+
+			EntityArrow var7 = new EntityArrow(var2, var3, var6 * 2.0F);
+			if(var6 == 1.0F) {
+				var7.field_35140_d = true;
+			}
+
+			var1.damageItem(1, var3);
+			var2.playSoundAtEntity(var3, "random.bow", 1.0F, 1.0F / (itemRand.nextFloat() * 0.4F + 1.2F) + var6 * 0.5F);
+			var3.inventory.consumeInventoryItem(Item.arrow.shiftedIndex);
+ 			if(!var2.multiplayerWorld) {
+				var2.entityJoinedWorld(var7);
 			}
 		}
+	}
+
+	public ItemStack onFoodEaten(ItemStack var1, World var2, EntityPlayer var3) {
+		return var1;
+	}
+
+	public int getMaxItemUseDuration(ItemStack var1) {
+		return 72000;
+	}
+
+	public EnumAction getItemUseAction(ItemStack var1) {
+		return EnumAction.bow;
+	}
+
+	public ItemStack onItemRightClick(ItemStack var1, World var2, EntityPlayer var3) {
+		if(var3.inventory.hasItem(Item.arrow.shiftedIndex)) {
+			var3.setItemInUse(var1, this.getMaxItemUseDuration(var1));
+ 		}
 
 		return var1;
 	}
--- net/minecraft/src/StringTranslate.java
+++ net/minecraft/src/StringTranslate.java
@@ -33,4 +33,8 @@
 	public String translateNamedKey(String var1) {
 		return this.translateTable.getProperty(var1 + ".name", "");
 	}
+
+	public String getElementDescription(String elementId) {
+		return this.translateTable.getProperty(elementId + ".desc", "");
+	}
 }
--- net/minecraft/src/EnumOptions.java
+++ net/minecraft/src/EnumOptions.java
@@ -5,6 +5,7 @@
 	SOUND("options.sound", true, false),
 	INVERT_MOUSE("options.invertMouse", false, true),
 	SENSITIVITY("options.sensitivity", true, false),
+	FOV("options.fov", true, false),
 	RENDER_DISTANCE("options.renderDistance", false, false),
 	VIEW_BOBBING("options.viewBobbing", false, true),
 	ANAGLYPH("options.anaglyph", false, true),
--- net/minecraft/src/SlotArmor.java
+++ net/minecraft/src/SlotArmor.java
@@ -17,4 +17,8 @@
 	public boolean isItemValid(ItemStack var1) {
 		return var1.getItem() instanceof ItemArmor ? ((ItemArmor)var1.getItem()).armorType == this.armorType : (var1.getItem().shiftedIndex == Block.pumpkin.blockID ? this.armorType == 0 : false);
 	}
+
+	public int getBackgroundIconIndex() {
+		return 15 + this.armorType * 16;
+	}
 }
--- net/minecraft/src/ModelSpider.java
+++ net/minecraft/src/ModelSpider.java
@@ -16,37 +16,37 @@
 	public ModelSpider() {
 		float var1 = 0.0F;
 		byte var2 = 15;
-		this.spiderHead = new ModelRenderer(32, 4);
+		this.spiderHead = new ModelRenderer(this, 32, 4);
 		this.spiderHead.addBox(-4.0F, -4.0F, -8.0F, 8, 8, 8, var1);
 		this.spiderHead.setRotationPoint(0.0F, (float)(0 + var2), -3.0F);
-		this.spiderNeck = new ModelRenderer(0, 0);
+		this.spiderNeck = new ModelRenderer(this, 0, 0);
 		this.spiderNeck.addBox(-3.0F, -3.0F, -3.0F, 6, 6, 6, var1);
 		this.spiderNeck.setRotationPoint(0.0F, (float)var2, 0.0F);
-		this.spiderBody = new ModelRenderer(0, 12);
+		this.spiderBody = new ModelRenderer(this, 0, 12);
 		this.spiderBody.addBox(-5.0F, -4.0F, -6.0F, 10, 8, 12, var1);
 		this.spiderBody.setRotationPoint(0.0F, (float)(0 + var2), 9.0F);
-		this.spiderLeg1 = new ModelRenderer(18, 0);
+		this.spiderLeg1 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg1.addBox(-15.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg1.setRotationPoint(-4.0F, (float)(0 + var2), 2.0F);
-		this.spiderLeg2 = new ModelRenderer(18, 0);
+		this.spiderLeg2 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg2.addBox(-1.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg2.setRotationPoint(4.0F, (float)(0 + var2), 2.0F);
-		this.spiderLeg3 = new ModelRenderer(18, 0);
+		this.spiderLeg3 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg3.addBox(-15.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg3.setRotationPoint(-4.0F, (float)(0 + var2), 1.0F);
-		this.spiderLeg4 = new ModelRenderer(18, 0);
+		this.spiderLeg4 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg4.addBox(-1.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg4.setRotationPoint(4.0F, (float)(0 + var2), 1.0F);
-		this.spiderLeg5 = new ModelRenderer(18, 0);
+		this.spiderLeg5 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg5.addBox(-15.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg5.setRotationPoint(-4.0F, (float)(0 + var2), 0.0F);
-		this.spiderLeg6 = new ModelRenderer(18, 0);
+		this.spiderLeg6 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg6.addBox(-1.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg6.setRotationPoint(4.0F, (float)(0 + var2), 0.0F);
-		this.spiderLeg7 = new ModelRenderer(18, 0);
+		this.spiderLeg7 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg7.addBox(-15.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg7.setRotationPoint(-4.0F, (float)(0 + var2), -1.0F);
-		this.spiderLeg8 = new ModelRenderer(18, 0);
+		this.spiderLeg8 = new ModelRenderer(this, 18, 0);
 		this.spiderLeg8.addBox(-1.0F, -1.0F, -1.0F, 16, 2, 2, var1);
 		this.spiderLeg8.setRotationPoint(4.0F, (float)(0 + var2), -1.0F);
 	}
--- net/minecraft/src/Vec3D.java
+++ net/minecraft/src/Vec3D.java
@@ -65,6 +65,10 @@
 		return var1 < 1.0E-4D ? createVector(0.0D, 0.0D, 0.0D) : createVector(this.xCoord / var1, this.yCoord / var1, this.zCoord / var1);
 	}
 
+	public double dotProduct(Vec3D var1) {
+		return this.xCoord * var1.xCoord + this.yCoord * var1.yCoord + this.zCoord * var1.zCoord;
+	}
+
 	public Vec3D crossProduct(Vec3D var1) {
 		return createVector(this.yCoord * var1.zCoord - this.zCoord * var1.yCoord, this.zCoord * var1.xCoord - this.xCoord * var1.zCoord, this.xCoord * var1.yCoord - this.yCoord * var1.xCoord);
 	}
--- net/minecraft/src/RenderSheep.java
+++ net/minecraft/src/RenderSheep.java
@@ -10,10 +10,12 @@
 
 	protected boolean setWoolColorAndRender(EntitySheep var1, int var2, float var3) {
 		if(var2 == 0 && !var1.getSheared()) {
-			this.loadTexture("/mob/sheep_fur.png");
-			float var4 = var1.getEntityBrightness(var3);
-			int var5 = var1.getFleeceColor();
-			GL11.glColor3f(var4 * EntitySheep.fleeceColorTable[var5][0], var4 * EntitySheep.fleeceColorTable[var5][1], var4 * EntitySheep.fleeceColorTable[var5][2]);
+			if(var1.getFleeceColor() < 0 || var1.getFleeceColor() >= 16) {
+				this.loadTexture("/mob/sheep_fur_0.png");
+			}
+
+			this.loadTexture("/mob/sheep_fur_" + var1.getFleeceColor() + ".png");
+
 			return true;
 		} else {
 			return false;
--- net/minecraft/src/ModelSkeleton.java
+++ net/minecraft/src/ModelSkeleton.java
@@ -3,19 +3,37 @@
 public class ModelSkeleton extends ModelZombie {
 	public ModelSkeleton() {
 		float var1 = 0.0F;
-		this.bipedRightArm = new ModelRenderer(40, 16);
+		this.bipedRightArm = new ModelRenderer(this, 40, 16);
 		this.bipedRightArm.addBox(-1.0F, -2.0F, -1.0F, 2, 12, 2, var1);
 		this.bipedRightArm.setRotationPoint(-5.0F, 2.0F, 0.0F);
-		this.bipedLeftArm = new ModelRenderer(40, 16);
+		this.bipedLeftArm = new ModelRenderer(this, 40, 16);
 		this.bipedLeftArm.mirror = true;
 		this.bipedLeftArm.addBox(-1.0F, -2.0F, -1.0F, 2, 12, 2, var1);
 		this.bipedLeftArm.setRotationPoint(5.0F, 2.0F, 0.0F);
-		this.bipedRightLeg = new ModelRenderer(0, 16);
+		this.bipedRightLeg = new ModelRenderer(this, 0, 16);
 		this.bipedRightLeg.addBox(-1.0F, 0.0F, -1.0F, 2, 12, 2, var1);
 		this.bipedRightLeg.setRotationPoint(-2.0F, 12.0F, 0.0F);
-		this.bipedLeftLeg = new ModelRenderer(0, 16);
+		this.bipedLeftLeg = new ModelRenderer(this, 0, 16);
 		this.bipedLeftLeg.mirror = true;
 		this.bipedLeftLeg.addBox(-1.0F, 0.0F, -1.0F, 2, 12, 2, var1);
 		this.bipedLeftLeg.setRotationPoint(2.0F, 12.0F, 0.0F);
 	}
+
+	public void setRotationAngles(float var1, float var2, float var3, float var4, float var5, float var6) {
+		super.setRotationAngles(var1, var2, var3, var4, var5, var6);
+		float var7 = 0.0F;
+		float var8 = 0.0F;
+		this.bipedRightArm.rotateAngleZ = 0.0F;
+		this.bipedLeftArm.rotateAngleZ = 0.0F;
+		this.bipedRightArm.rotateAngleY = -(0.1F - var7 * 0.6F) + this.bipedHead.rotateAngleY;
+		this.bipedLeftArm.rotateAngleY = 0.1F - var7 * 0.6F + this.bipedHead.rotateAngleY + 0.4F;
+		this.bipedRightArm.rotateAngleX = (float)Math.PI * -0.5F + this.bipedHead.rotateAngleX;
+		this.bipedLeftArm.rotateAngleX = (float)Math.PI * -0.5F + this.bipedHead.rotateAngleX;
+		this.bipedRightArm.rotateAngleX -= var7 * 1.2F - var8 * 0.4F;
+		this.bipedLeftArm.rotateAngleX -= var7 * 1.2F - var8 * 0.4F;
+		this.bipedRightArm.rotateAngleZ += MathHelper.cos(var3 * 0.09F) * 0.05F + 0.05F;
+		this.bipedLeftArm.rotateAngleZ -= MathHelper.cos(var3 * 0.09F) * 0.05F + 0.05F;
+		this.bipedRightArm.rotateAngleX += MathHelper.sin(var3 * 0.067F) * 0.05F;
+		this.bipedLeftArm.rotateAngleX -= MathHelper.sin(var3 * 0.067F) * 0.05F;
+ 	}
 }
--- net/minecraft/src/Block.java
+++ net/minecraft/src/Block.java
@@ -232,6 +232,10 @@
 		return var1.getBrightness(var2, var3, var4, lightValue[this.blockID]);
 	}
 
+	public int func_35275_c(IBlockAccess var1, int var2, int var3, int var4) {
+		return var1.func_35451_b(var2, var3, var4, lightValue[this.blockID]);
+	}
+
 	public boolean shouldSideBeRendered(IBlockAccess var1, int var2, int var3, int var4, int var5) {
 		return var5 == 0 && this.minY > 0.0D ? true : (var5 == 1 && this.maxY < 1.0D ? true : (var5 == 2 && this.minZ > 0.0D ? true : (var5 == 3 && this.maxZ < 1.0D ? true : (var5 == 4 && this.minX > 0.0D ? true : (var5 == 5 && this.maxX < 1.0D ? true : !var1.isBlockOpaqueCube(var2, var3, var4))))));
 	}
@@ -557,6 +561,10 @@
 
 	public int getMobilityFlag() {
 		return this.blockMaterial.getMaterialMobility();
+	}
+
+	public float func_35276_e(IBlockAccess var1, int var2, int var3, int var4) {
+		return var1.isBlockNormalCube(var2, var3, var4) ? 0.05F : 1.0F;
 	}
 
 	static {
--- net/minecraft/src/GuiScreen.java
+++ net/minecraft/src/GuiScreen.java
@@ -136,7 +136,7 @@
 	}
 
 	public void drawWorldBackground(int var1) {
-		if(this.mc.theWorld != null) {
+		if(this.mc.theWorld != null && !this.mc.theWorld.isTitle()) {
 			this.drawGradientRect(0, 0, this.width, this.height, -1072689136, -804253680);
 		} else {
 			this.drawBackground(var1);
--- net/minecraft/src/RenderHelper.java
+++ net/minecraft/src/RenderHelper.java
@@ -46,4 +46,12 @@
 		field_1695_a.flip();
 		return field_1695_a;
 	}
+
+	public static void func_41089_c() {
+		GL11.glPushMatrix();
+		GL11.glRotatef(-30.0F, 0.0F, 1.0F, 0.0F);
+		GL11.glRotatef(165.0F, 1.0F, 0.0F, 0.0F);
+		enableStandardItemLighting();
+		GL11.glPopMatrix();
+	}
 }
--- net/minecraft/src/Item.java
+++ net/minecraft/src/Item.java
@@ -164,6 +164,10 @@
 		return var1;
 	}
 
+	public ItemStack onFoodEaten(ItemStack var1, World var2, EntityPlayer var3) {
+		return var1;
+	}
+
 	public int getItemStackLimit() {
 		return this.maxStackSize;
 	}
@@ -269,6 +273,17 @@
 
 	public void onCreated(ItemStack var1, World var2, EntityPlayer var3) {
 	}
+
+	public EnumAction getItemUseAction(ItemStack var1) {
+		return EnumAction.none;
+	}
+
+	public int getMaxItemUseDuration(ItemStack var1) {
+		return 0;
+	}
+
+	public void onPlayerStoppedUsing(ItemStack var1, World var2, EntityPlayer var3, int var4) {
+ 	}
 
 	static {
 		StatList.func_25151_b();
--- net/minecraft/src/ModelBiped.java
+++ net/minecraft/src/ModelBiped.java
@@ -13,6 +13,7 @@
 	public boolean field_1279_h;
 	public boolean field_1278_i;
 	public boolean isSneak;
+	public boolean field_40333_u;
 
 	public ModelBiped() {
 		this(0.0F);
@@ -26,30 +27,30 @@
 		this.field_1279_h = false;
 		this.field_1278_i = false;
 		this.isSneak = false;
-		this.bipedCloak = new ModelRenderer(0, 0);
+		this.bipedCloak = new ModelRenderer(this, 0, 0);
 		this.bipedCloak.addBox(-5.0F, 0.0F, -1.0F, 10, 16, 1, var1);
-		this.bipedEars = new ModelRenderer(24, 0);
+		this.bipedEars = new ModelRenderer(this, 24, 0);
 		this.bipedEars.addBox(-3.0F, -6.0F, -1.0F, 6, 6, 1, var1);
-		this.bipedHead = new ModelRenderer(0, 0);
+		this.bipedHead = new ModelRenderer(this, 0, 0);
 		this.bipedHead.addBox(-4.0F, -8.0F, -4.0F, 8, 8, 8, var1);
 		this.bipedHead.setRotationPoint(0.0F, 0.0F + var2, 0.0F);
-		this.bipedHeadwear = new ModelRenderer(32, 0);
+		this.bipedHeadwear = new ModelRenderer(this, 32, 0);
 		this.bipedHeadwear.addBox(-4.0F, -8.0F, -4.0F, 8, 8, 8, var1 + 0.5F);
 		this.bipedHeadwear.setRotationPoint(0.0F, 0.0F + var2, 0.0F);
-		this.bipedBody = new ModelRenderer(16, 16);
+		this.bipedBody = new ModelRenderer(this, 16, 16);
 		this.bipedBody.addBox(-4.0F, 0.0F, -2.0F, 8, 12, 4, var1);
 		this.bipedBody.setRotationPoint(0.0F, 0.0F + var2, 0.0F);
-		this.bipedRightArm = new ModelRenderer(40, 16);
+		this.bipedRightArm = new ModelRenderer(this, 40, 16);
 		this.bipedRightArm.addBox(-3.0F, -2.0F, -2.0F, 4, 12, 4, var1);
 		this.bipedRightArm.setRotationPoint(-5.0F, 2.0F + var2, 0.0F);
-		this.bipedLeftArm = new ModelRenderer(40, 16);
+		this.bipedLeftArm = new ModelRenderer(this, 40, 16);
 		this.bipedLeftArm.mirror = true;
 		this.bipedLeftArm.addBox(-1.0F, -2.0F, -2.0F, 4, 12, 4, var1);
 		this.bipedLeftArm.setRotationPoint(5.0F, 2.0F + var2, 0.0F);
-		this.bipedRightLeg = new ModelRenderer(0, 16);
+		this.bipedRightLeg = new ModelRenderer(this, 0, 16);
 		this.bipedRightLeg.addBox(-2.0F, 0.0F, -2.0F, 4, 12, 4, var1);
 		this.bipedRightLeg.setRotationPoint(-2.0F, 12.0F + var2, 0.0F);
-		this.bipedLeftLeg = new ModelRenderer(0, 16);
+		this.bipedLeftLeg = new ModelRenderer(this, 0, 16);
 		this.bipedLeftLeg.mirror = true;
 		this.bipedLeftLeg.addBox(-2.0F, 0.0F, -2.0F, 4, 12, 4, var1);
 		this.bipedLeftLeg.setRotationPoint(2.0F, 12.0F + var2, 0.0F);
@@ -98,8 +99,10 @@
 
 		this.bipedRightArm.rotateAngleY = 0.0F;
 		this.bipedLeftArm.rotateAngleY = 0.0F;
+		float var7;
+		float var8;
 		if(this.onGround > -9990.0F) {
-			float var7 = this.onGround;
+			var7 = this.onGround;
 			this.bipedBody.rotateAngleY = MathHelper.sin(MathHelper.sqrt_float(var7) * (float)Math.PI * 2.0F) * 0.2F;
 			this.bipedRightArm.rotationPointZ = MathHelper.sin(this.bipedBody.rotateAngleY) * 5.0F;
 			this.bipedRightArm.rotationPointX = -MathHelper.cos(this.bipedBody.rotateAngleY) * 5.0F;
@@ -112,7 +115,7 @@
 			var7 *= var7;
 			var7 *= var7;
 			var7 = 1.0F - var7;
-			float var8 = MathHelper.sin(var7 * (float)Math.PI);
+			var8 = MathHelper.sin(var7 * (float)Math.PI);
 			float var9 = MathHelper.sin(this.onGround * (float)Math.PI) * -(this.bipedHead.rotateAngleX - 0.7F) * (12.0F / 16.0F);
 			this.bipedRightArm.rotateAngleX = (float)((double)this.bipedRightArm.rotateAngleX - ((double)var8 * 1.2D + (double)var9));
 			this.bipedRightArm.rotateAngleY += this.bipedBody.rotateAngleY * 2.0F;
@@ -143,6 +146,22 @@
 		this.bipedLeftArm.rotateAngleZ -= MathHelper.cos(var3 * 0.09F) * 0.05F + 0.05F;
 		this.bipedRightArm.rotateAngleX += MathHelper.sin(var3 * 0.067F) * 0.05F;
 		this.bipedLeftArm.rotateAngleX -= MathHelper.sin(var3 * 0.067F) * 0.05F;
+		if(this.field_40333_u) {
+			var7 = 0.0F;
+			var8 = 0.0F;
+			this.bipedRightArm.rotateAngleZ = 0.0F;
+			this.bipedLeftArm.rotateAngleZ = 0.0F;
+			this.bipedRightArm.rotateAngleY = -(0.1F - var7 * 0.6F) + this.bipedHead.rotateAngleY;
+			this.bipedLeftArm.rotateAngleY = 0.1F - var7 * 0.6F + this.bipedHead.rotateAngleY + 0.4F;
+			this.bipedRightArm.rotateAngleX = (float)Math.PI * -0.5F + this.bipedHead.rotateAngleX;
+			this.bipedLeftArm.rotateAngleX = (float)Math.PI * -0.5F + this.bipedHead.rotateAngleX;
+			this.bipedRightArm.rotateAngleX -= var7 * 1.2F - var8 * 0.4F;
+			this.bipedLeftArm.rotateAngleX -= var7 * 1.2F - var8 * 0.4F;
+			this.bipedRightArm.rotateAngleZ += MathHelper.cos(var3 * 0.09F) * 0.05F + 0.05F;
+			this.bipedLeftArm.rotateAngleZ -= MathHelper.cos(var3 * 0.09F) * 0.05F + 0.05F;
+			this.bipedRightArm.rotateAngleX += MathHelper.sin(var3 * 0.067F) * 0.05F;
+			this.bipedLeftArm.rotateAngleX -= MathHelper.sin(var3 * 0.067F) * 0.05F;
+		}
 	}
 
 	public void renderEars(float var1) {
--- net/minecraft/src/ColorizerWater.java
+++ net/minecraft/src/ColorizerWater.java
@@ -6,4 +6,14 @@
 	public static void func_28182_a(int[] var0) {
 		waterBuffer = var0;
 	}
+
+	public static int getWaterColor(double var0, double var2) {
+		try {
+			int var4 = (int)((1.0D - var0) * 255.0D);
+			int var5 = (int)((1.0D - var2 * var0) * 255.0D);
+			return waterBuffer[var5 << 8 | var4];
+		} catch (Throwable var6) {
+			return 25828;
+		}
+	}
 }
--- net/minecraft/src/EntitySheep.java
+++ net/minecraft/src/EntitySheep.java
@@ -3,11 +3,11 @@
 import java.util.Random;
 
 public class EntitySheep extends EntityAnimal {
-	public static final float[][] fleeceColorTable = new float[][]{{1.0F, 1.0F, 1.0F}, {0.95F, 0.7F, 0.2F}, {0.9F, 0.5F, 0.85F}, {0.6F, 0.7F, 0.95F}, {0.9F, 0.9F, 0.2F}, {0.5F, 0.8F, 0.1F}, {0.95F, 0.7F, 0.8F}, {0.3F, 0.3F, 0.3F}, {0.6F, 0.6F, 0.6F}, {0.3F, 0.6F, 0.7F}, {0.7F, 0.4F, 0.9F}, {0.2F, 0.4F, 0.8F}, {0.5F, 0.4F, 0.3F}, {0.4F, 0.5F, 0.2F}, {0.8F, 0.3F, 0.3F}, {0.1F, 0.1F, 0.1F}};
+	int fleeceColor = 15;
 
 	public EntitySheep(World var1) {
 		super(var1);
-		this.texture = "/mob/sheep.png";
+		this.texture = "/mob/sheep_0.png";
 		this.setSize(0.9F, 1.3F);
 	}
 
@@ -16,6 +16,14 @@
 		this.dataWatcher.addObject(16, new Byte((byte)0));
 	}
 
+	public String getEntityTexture() {
+		if(this.getFleeceColor() < 0 || this.getFleeceColor() >= 16) {
+			return super.getEntityTexture();
+		}
+
+		return "/mob/sheep_" + this.getFleeceColor() + ".png";
+	}
+
 	public boolean attackEntityFrom(Entity var1, int var2) {
 		return super.attackEntityFrom(var1, var2);
 	}
@@ -47,6 +55,7 @@
 			}
 
 			var2.damageItem(1, var1);
+			this.worldObj.playSoundAtEntity(this, "mob.sheep.shear", 1.0F, 1.0F);
 		}
 
 		return false;
@@ -77,12 +86,11 @@
 	}
 
 	public int getFleeceColor() {
-		return this.dataWatcher.getWatchableObjectByte(16) & 15;
+		return this.fleeceColor;
 	}
 
 	public void setFleeceColor(int var1) {
-		byte var2 = this.dataWatcher.getWatchableObjectByte(16);
-		this.dataWatcher.updateObject(16, Byte.valueOf((byte)(var2 & 240 | var1 & 15)));
+		this.fleeceColor = var1;
 	}
 
 	public boolean getSheared() {
--- net/minecraft/src/PlayerController.java
+++ net/minecraft/src/PlayerController.java
@@ -97,4 +97,8 @@
 		var2.craftingInventory.onCraftGuiClosed(var2);
 		var2.craftingInventory = var2.inventorySlots;
 	}
+
+	public void onStoppedUsingItem(EntityPlayer var1) {
+		var1.stopUsingItem();
+	}
 }
--- net/minecraft/src/Tessellator.java
+++ net/minecraft/src/Tessellator.java
@@ -4,24 +4,28 @@
 import java.nio.ByteOrder;
 import java.nio.FloatBuffer;
 import java.nio.IntBuffer;
+import java.nio.ShortBuffer;
 import org.lwjgl.opengl.ARBVertexBufferObject;
 import org.lwjgl.opengl.GL11;
 import org.lwjgl.opengl.GL15;
 import org.lwjgl.opengl.GLContext;
 
 public class Tessellator {
-	private static boolean convertQuadsToTriangles = true;
+	private static boolean convertQuadsToTriangles = false;
 	private static boolean tryVBO = false;
 	private ByteBuffer byteBuffer;
 	private IntBuffer intBuffer;
 	private FloatBuffer floatBuffer;
+	private ShortBuffer field_35836_g;
 	private int[] rawBuffer;
 	private int vertexCount = 0;
 	private double textureU;
 	private double textureV;
+	private int field_35837_l;
 	private int color;
 	private boolean hasColor = false;
 	private boolean hasTexture = false;
+	private boolean field_35838_p = false;
 	private boolean hasNormals = false;
 	private int rawBufferIndex = 0;
 	private int addedVertices = 0;
@@ -44,6 +48,7 @@
 		this.byteBuffer = GLAllocation.createDirectByteBuffer(var1 * 4);
 		this.intBuffer = this.byteBuffer.asIntBuffer();
 		this.floatBuffer = this.byteBuffer.asFloatBuffer();
+		this.field_35836_g = this.byteBuffer.asShortBuffer();
 		this.rawBuffer = new int[var1];
 		this.useVBO = tryVBO && GLContext.getCapabilities().GL_ARB_vertex_buffer_object;
 		if(this.useVBO) {
@@ -80,6 +85,19 @@
 					GL11.glEnableClientState(GL11.GL_TEXTURE_COORD_ARRAY);
 				}
 
+				if(this.field_35838_p) {
+					OpenGlHelper.setClientActiveTexture(OpenGlHelper.lightmapEnabled);
+					if(this.useVBO) {
+						GL11.glTexCoordPointer(2, GL11.GL_SHORT, 32, 24L);
+					} else {
+						this.field_35836_g.position(14);
+						GL11.glTexCoordPointer(2, 32, (ShortBuffer)this.field_35836_g);
+					}
+
+					GL11.glEnableClientState(GL11.GL_TEXTURE_COORD_ARRAY);
+					OpenGlHelper.setClientActiveTexture(OpenGlHelper.lightmapDisabled);
+				}
+
 				if(this.hasColor) {
 					if(this.useVBO) {
 						GL11.glColorPointer(4, GL11.GL_UNSIGNED_BYTE, 32, 20L);
@@ -121,6 +139,12 @@
 					GL11.glDisableClientState(GL11.GL_TEXTURE_COORD_ARRAY);
 				}
 
+				if(this.field_35838_p) {
+					OpenGlHelper.setClientActiveTexture(OpenGlHelper.lightmapEnabled);
+					GL11.glDisableClientState(GL11.GL_TEXTURE_COORD_ARRAY);
+					OpenGlHelper.setClientActiveTexture(OpenGlHelper.lightmapDisabled);
+				}
+
 				if(this.hasColor) {
 					GL11.glDisableClientState(GL11.GL_COLOR_ARRAY);
 				}
@@ -155,6 +179,7 @@
 			this.hasNormals = false;
 			this.hasColor = false;
 			this.hasTexture = false;
+			this.field_35838_p = false;
 			this.isColorDisabled = false;
 		}
 	}
@@ -165,6 +190,11 @@
 		this.textureV = var3;
 	}
 
+	public void func_35835_b(int var1) {
+		this.field_35838_p = true;
+		this.field_35837_l = var1;
+	}
+
 	public void setColorOpaque_F(float var1, float var2, float var3) {
 		this.setColorOpaque((int)(var1 * 255.0F), (int)(var2 * 255.0F), (int)(var3 * 255.0F));
 	}
@@ -236,6 +266,10 @@
 					this.rawBuffer[this.rawBufferIndex + 4] = this.rawBuffer[this.rawBufferIndex - var8 + 4];
 				}
 
+				if(this.field_35838_p) {
+					this.rawBuffer[this.rawBufferIndex + 7] = this.rawBuffer[this.rawBufferIndex - var8 + 7];
+				}
+
 				if(this.hasColor) {
 					this.rawBuffer[this.rawBufferIndex + 5] = this.rawBuffer[this.rawBufferIndex - var8 + 5];
 				}
@@ -253,6 +287,10 @@
 			this.rawBuffer[this.rawBufferIndex + 4] = Float.floatToRawIntBits((float)this.textureV);
 		}
 
+		if(this.field_35838_p) {
+			this.rawBuffer[this.rawBufferIndex + 7] = this.field_35837_l;
+		}
+
 		if(this.hasColor) {
 			this.rawBuffer[this.rawBufferIndex + 5] = this.color;
 		}
@@ -297,7 +335,7 @@
 		}
 
 		this.hasNormals = true;
-		byte var4 = (byte)((int)(var1 * 128.0F));
+		byte var4 = (byte)((int)(var1 * 127.0F));
 		byte var5 = (byte)((int)(var2 * 127.0F));
 		byte var6 = (byte)((int)(var3 * 127.0F));
 		this.normal = var4 | var5 << 8 | var6 << 16;
--- net/minecraft/src/TextureWaterFlowFX.java
+++ net/minecraft/src/TextureWaterFlowFX.java
@@ -63,8 +63,8 @@
 			}
 
 			float var13 = var3 * var3;
-			var5 = (int)(32.0F + var13 * 32.0F);
-			var6 = (int)(50.0F + var13 * 64.0F);
+			var5 = (int)(111.0F + var13 * 76.0F);
+			var6 = (int)(139.0F + var13 * 116.0F);
 			int var7 = 255;
 			int var8 = (int)(146.0F + var13 * 50.0F);
 			if(this.anaglyphEnabled) {
--- net/minecraft/src/ItemRenderer.java
+++ net/minecraft/src/ItemRenderer.java
@@ -22,7 +22,7 @@
 		GL11.glPushMatrix();
 		if(var2.itemID < 256 && RenderBlocks.renderItemIn3d(Block.blocksList[var2.itemID].getRenderType())) {
 			GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.mc.renderEngine.getTexture("/terrain.png"));
-			this.renderBlocksInstance.renderBlockOnInventory(Block.blocksList[var2.itemID], var2.getItemDamage(), var1.getEntityBrightness(1.0F));
+			this.renderBlocksInstance.renderBlockOnInventory(Block.blocksList[var2.itemID], var2.getItemDamage(), 1.0F);
 		} else {
 			if(var2.itemID < 256) {
 				GL11.glBindTexture(GL11.GL_TEXTURE_2D, this.mc.renderEngine.getTexture("/terrain.png"));
@@ -33,9 +33,9 @@
 			Tessellator var3 = Tessellator.instance;
 			int var4 = var1.getItemIcon(var2);
 			float var5 = ((float)(var4 % 16 * 16) + 0.0F) / 256.0F;
-			float var6 = ((float)(var4 % 16 * 16) + 15.99F) / 256.0F;
+			float var6 = ((float)(var4 % 16 * 16) + 16.0F) / 256.0F;
 			float var7 = ((float)(var4 / 16 * 16) + 0.0F) / 256.0F;
-			float var8 = ((float)(var4 / 16 * 16) + 15.99F) / 256.0F;
+			float var8 = ((float)(var4 / 16 * 16) + 16.0F) / 256.0F;
 			float var9 = 1.0F;
 			float var10 = 0.0F;
 			float var11 = 0.3F;
@@ -136,8 +136,26 @@
 		GL11.glRotatef(var3.prevRotationYaw + (var3.rotationYaw - var3.prevRotationYaw) * var1, 0.0F, 1.0F, 0.0F);
 		RenderHelper.enableStandardItemLighting();
 		GL11.glPopMatrix();
+		if(var3 instanceof EntityPlayerSP) {
+			float flSwayPitch;
+			float flSwayYaw;
+
+			EntityPlayerSP var5 = (EntityPlayerSP)var3;
+			flSwayPitch = var5.flPreviousRenderArmPitch + (var5.flRenderArmPitch - var5.flPreviousRenderArmPitch) * var1;
+			flSwayYaw = var5.flPreviousRenderArmYaw + (var5.flRenderArmYaw - var5.flPreviousRenderArmYaw) * var1;
+			GL11.glRotatef((var3.rotationPitch - flSwayPitch) * 0.1F, 1.0F, 0.0F, 0.0F);
+			GL11.glRotatef((var3.rotationYaw - flSwayYaw) * 0.1F, 0.0F, 1.0F, 0.0F);
+		}
+		
+		float var6;
 		ItemStack var5 = this.itemToRender;
-		float var6 = this.mc.theWorld.getLightBrightness(MathHelper.floor_double(var3.posX), MathHelper.floor_double(var3.posY), MathHelper.floor_double(var3.posZ));
+		var6 = this.mc.theWorld.getLightBrightness(MathHelper.floor_double(var3.posX), MathHelper.floor_double(var3.posY), MathHelper.floor_double(var3.posZ));
+		var6 = 1.0F;
+		int var70 = this.mc.theWorld.func_35451_b(MathHelper.floor_double(var3.posX), MathHelper.floor_double(var3.posY), MathHelper.floor_double(var3.posZ), 0);
+		int var71 = var70 % 65536;
+		int var72 = var70 / 65536;
+		OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapEnabled, (float)var71 / 1.0F, (float)var72 / 1.0F);
+		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 		float var8;
 		float var9;
 		float var10;
@@ -152,6 +170,8 @@
 		}
 
 		float var14;
+		float var13;
+		float var18;
 		if(var5 != null && var5.itemID == Item.mapItem.shiftedIndex) {
 			GL11.glPushMatrix();
 			var14 = 0.8F;
@@ -185,7 +205,7 @@
 				GL11.glRotatef((float)(-65 * var21), 0.0F, 1.0F, 0.0F);
 				Render var11 = RenderManager.instance.getEntityRenderObject(this.mc.thePlayer);
 				RenderPlayer var12 = (RenderPlayer)var11;
-				float var13 = 1.0F;
+				var13 = 1.0F;
 				GL11.glScalef(var13, var13, var13);
 				var12.drawFirstPersonHand();
 				GL11.glPopMatrix();
@@ -193,7 +213,7 @@
 
 			var9 = var3.getSwingProgress(var1);
 			var10 = MathHelper.sin(var9 * var9 * (float)Math.PI);
-			float var18 = MathHelper.sin(MathHelper.sqrt_float(var9) * (float)Math.PI);
+			var18 = MathHelper.sin(MathHelper.sqrt_float(var9) * (float)Math.PI);
 			GL11.glRotatef(-var10 * 20.0F, 0.0F, 1.0F, 0.0F);
 			GL11.glRotatef(-var18 * 20.0F, 0.0F, 0.0F, 1.0F);
 			GL11.glRotatef(-var18 * 80.0F, 1.0F, 0.0F, 0.0F);
@@ -220,10 +240,30 @@
 		} else if(var5 != null) {
 			GL11.glPushMatrix();
 			var14 = 0.8F;
-			var8 = var3.getSwingProgress(var1);
-			var9 = MathHelper.sin(var8 * (float)Math.PI);
-			var10 = MathHelper.sin(MathHelper.sqrt_float(var8) * (float)Math.PI);
-			GL11.glTranslatef(-var10 * 0.4F, MathHelper.sin(MathHelper.sqrt_float(var8) * (float)Math.PI * 2.0F) * 0.2F, -var9 * 0.2F);
+			float var12;
+			if(var3.getItemInUseCount() > 0) {
+				EnumAction var17 = var5.getItemUseAction();
+				if(var17 == EnumAction.eat) {
+					var9 = (float)var3.getItemInUseCount() - var1 + 1.0F;
+					var10 = 1.0F - var9 / (float)var5.getMaxItemUseDuration();
+					var12 = 1.0F - var10;
+					var12 = var12 * var12 * var12;
+					var12 = var12 * var12 * var12;
+					var12 = var12 * var12 * var12;
+					var13 = 1.0F - var12;
+					GL11.glTranslatef(0.0F, MathHelper.abs(MathHelper.cos(var9 / 4.0F * (float)Math.PI) * 0.1F) * (float)((double)var10 > 0.2D ? 1 : 0), 0.0F);
+					GL11.glTranslatef(var13 * 0.6F, -var13 * 0.5F, 0.0F);
+					GL11.glRotatef(var13 * 90.0F, 0.0F, 1.0F, 0.0F);
+					GL11.glRotatef(var13 * 10.0F, 1.0F, 0.0F, 0.0F);
+					GL11.glRotatef(var13 * 30.0F, 0.0F, 0.0F, 1.0F);
+				}
+			} else {
+				var8 = var3.getSwingProgress(var1);
+				var9 = MathHelper.sin(var8 * (float)Math.PI);
+				var10 = MathHelper.sin(MathHelper.sqrt_float(var8) * (float)Math.PI);
+				GL11.glTranslatef(-var10 * 0.4F, MathHelper.sin(MathHelper.sqrt_float(var8) * (float)Math.PI * 2.0F) * 0.2F, -var9 * 0.2F);
+			}
+
 			GL11.glTranslatef(0.7F * var14, -0.65F * var14 - (1.0F - var2) * 0.6F, -0.9F * var14);
 			GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
 			GL11.glEnable(GL12.GL_RESCALE_NORMAL);
@@ -235,6 +275,36 @@
 			GL11.glRotatef(-var10 * 80.0F, 1.0F, 0.0F, 0.0F);
 			var8 = 0.4F;
 			GL11.glScalef(var8, var8, var8);
+			if(var3.getItemInUseCount() > 0) {
+				EnumAction var17 = var5.getItemUseAction();
+				if(var17 == EnumAction.bow) {
+					GL11.glRotatef(-18.0F, 0.0F, 0.0F, 1.0F);
+					GL11.glRotatef(-12.0F, 0.0F, 1.0F, 0.0F);
+					GL11.glRotatef(-8.0F, 1.0F, 0.0F, 0.0F);
+					GL11.glTranslatef(-0.9F, 0.2F, 0.0F);
+					var10 = (float)var5.getMaxItemUseDuration() - ((float)var3.getItemInUseCount() - var1 + 1.0F);
+					var18 = var10 / 20.0F;
+					var18 = (var18 * var18 + var18 * 2.0F) / 3.0F;
+					if(var18 > 1.0F) {
+						var18 = 1.0F;
+					}
+
+					if(var18 > 0.1F) {
+						GL11.glTranslatef(0.0F, MathHelper.sin((var10 - 0.1F) * 1.3F) * 0.01F * (var18 - 0.1F), 0.0F);
+					}
+
+					GL11.glTranslatef(0.0F, 0.0F, var18 * 0.1F);
+					GL11.glRotatef(-335.0F, 0.0F, 0.0F, 1.0F);
+					GL11.glRotatef(-50.0F, 0.0F, 1.0F, 0.0F);
+					GL11.glTranslatef(0.0F, 0.5F, 0.0F);
+					var12 = 1.0F + var18 * 0.2F;
+					GL11.glScalef(1.0F, 1.0F, var12);
+					GL11.glTranslatef(0.0F, -0.5F, 0.0F);
+					GL11.glRotatef(50.0F, 0.0F, 1.0F, 0.0F);
+					GL11.glRotatef(335.0F, 0.0F, 0.0F, 1.0F);
+				}
+			}
+
 			if(var5.getItem().shouldRotateAroundWhenRendering()) {
 				GL11.glRotatef(180.0F, 0.0F, 1.0F, 0.0F);
 			}
@@ -350,7 +420,9 @@
 	private void renderWarpedTextureOverlay(float var1) {
 		Tessellator var2 = Tessellator.instance;
 		float var3 = this.mc.thePlayer.getEntityBrightness(var1);
-		GL11.glColor4f(var3, var3, var3, 0.5F);
+		this.mc.theWorld.getWorldChunkManager().func_4069_a(MathHelper.floor_double(this.mc.thePlayer.posX), MathHelper.floor_double(this.mc.thePlayer.posZ), 1, 1);
+		int var69 = ColorizerWater.getWaterColor(this.mc.theWorld.getWorldChunkManager().temperature[0], this.mc.theWorld.getWorldChunkManager().humidity[0]);
+		GL11.glColor4f((float)(var69 >> 16 & 255) / 255.0F * var3, (float)(var69 >> 8 & 255) / 255.0F * var3, (float)(var69 & 255) / 255.0F * var3, 0.5F);
 		GL11.glEnable(GL11.GL_BLEND);
 		GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
 		GL11.glPushMatrix();
@@ -425,6 +497,10 @@
 
 		float var5 = 0.4F;
 		float var6 = var4 ? 1.0F : 0.0F;
+		if(var1.health <= 0) {
+			var6 = 0.0F;
+		}
+		
 		float var7 = var6 - this.equippedProgress;
 		if(var7 < -var5) {
 			var7 = -var5;
--- net/minecraft/src/BlockGrass.java
+++ net/minecraft/src/BlockGrass.java
@@ -9,6 +9,10 @@
 		this.setTickOnLoad(true);
 	}
 
+	public int getBlockTextureFromSideAndMetadata(int var1, int var2) {
+		return var1 == 1 ? 0 : (var1 == 0 ? 2 : 3);
+	}
+
 	public int getBlockTexture(IBlockAccess var1, int var2, int var3, int var4, int var5) {
 		if(var5 == 1) {
 			return 0;
@@ -20,6 +24,16 @@
 		}
 	}
 
+	public int getBlockColor() {
+		double var1 = 0.5D;
+		double var3 = 1.0D;
+		return ColorizerGrass.getGrassColor(var1, var3);
+	}
+
+	public int getRenderColor(int var1) {
+		return this.getBlockColor();
+	}
+
 	public int colorMultiplier(IBlockAccess var1, int var2, int var3, int var4) {
 		var1.getWorldChunkManager().func_4069_a(var2, var4, 1, 1);
 		double var5 = var1.getWorldChunkManager().temperature[0];
@@ -44,7 +58,7 @@
 					var1.setBlockWithNotify(var6, var7, var8, Block.grass.blockID);
 				}
 			}
-
+			
 		}
 	}
 
--- net/minecraft/src/SoundPool.java
+++ net/minecraft/src/SoundPool.java
@@ -12,11 +12,16 @@
 	private Random rand = new Random();
 	private Map nameToSoundPoolEntriesMapping = new HashMap();
 	private List allSoundPoolEntries = new ArrayList();
+	public List allSoundPoolSoundNames = new ArrayList();
 	public int numberOfSoundPoolEntries = 0;
 	public boolean field_1657_b = true;
 
 	public SoundPoolEntry addSound(String var1, File var2) {
 		try {
+			if(this.allSoundPoolSoundNames.contains(var1)) {
+				return null;
+			}
+
 			String var3 = var1;
 			var1 = var1.substring(0, var1.indexOf("."));
 			if(this.field_1657_b) {
@@ -33,6 +38,7 @@
 			SoundPoolEntry var4 = new SoundPoolEntry(var3, var2.toURI().toURL());
 			((List)this.nameToSoundPoolEntriesMapping.get(var1)).add(var4);
 			this.allSoundPoolEntries.add(var4);
+			this.allSoundPoolSoundNames.add(var3);
 			++this.numberOfSoundPoolEntries;
 			return var4;
 		} catch (MalformedURLException var5) {
--- net/minecraft/src/SoundManager.java
+++ net/minecraft/src/SoundManager.java
@@ -13,6 +13,7 @@
 	private SoundPool soundPoolSounds = new SoundPool();
 	private SoundPool soundPoolStreaming = new SoundPool();
 	private SoundPool soundPoolMusic = new SoundPool();
+	private SoundPool soundPoolTitleMusic = new SoundPool();
 	private int field_587_e = 0;
 	private GameSettings options;
 	private static boolean loaded = false;
@@ -85,6 +86,10 @@
 		this.soundPoolMusic.addSound(var1, var2);
 	}
 
+	public void addTitleMusic(String var1, File var2) {
+		this.soundPoolTitleMusic.addSound(var1, var2);
+	}
+
 	public void playRandomMusicIfReady() {
 		if(loaded && this.options.musicVolume != 0.0F) {
 			if(!sndSystem.playing("BgMusic") && !sndSystem.playing("streaming")) {
@@ -105,6 +110,20 @@
 		}
 	}
 
+	public void playTitleMusicIfReady() {
+		if(loaded && this.options.musicVolume != 0.0F) {
+			if(!sndSystem.playing("BgMusic") && !sndSystem.playing("streaming")) {
+				SoundPoolEntry var1 = this.soundPoolTitleMusic.getRandomSound();
+				if(var1 != null) {
+					sndSystem.backgroundMusic("BgMusic", var1.soundUrl, var1.soundName, false);
+					sndSystem.setVolume("BgMusic", this.options.musicVolume);
+					sndSystem.play("BgMusic");
+				}
+			}
+
+		}
+	}
+
 	public void func_338_a(EntityLiving var1, float var2) {
 		if(loaded && this.options.soundVolume != 0.0F) {
 			if(var1 != null) {
@@ -193,4 +212,10 @@
 
 		}
 	}
+
+	public void stopStreaming() {
+		if(sndSystem.playing("BgMusic")) {
+			sndSystem.stop("BgMusic");
+ 		}
+ 	}
 }
--- net/minecraft/src/ModelWolf.java
+++ net/minecraft/src/ModelWolf.java
@@ -18,37 +18,37 @@
 	public ModelWolf() {
 		float var1 = 0.0F;
 		float var2 = 13.5F;
-		this.wolfHeadMain = new ModelRenderer(0, 0);
+		this.wolfHeadMain = new ModelRenderer(this, 0, 0);
 		this.wolfHeadMain.addBox(-3.0F, -3.0F, -2.0F, 6, 6, 4, var1);
 		this.wolfHeadMain.setRotationPoint(-1.0F, var2, -7.0F);
-		this.wolfBody = new ModelRenderer(18, 14);
+		this.wolfBody = new ModelRenderer(this, 18, 14);
 		this.wolfBody.addBox(-4.0F, -2.0F, -3.0F, 6, 9, 6, var1);
 		this.wolfBody.setRotationPoint(0.0F, 14.0F, 2.0F);
-		this.wolfMane = new ModelRenderer(21, 0);
+		this.wolfMane = new ModelRenderer(this, 21, 0);
 		this.wolfMane.addBox(-4.0F, -3.0F, -3.0F, 8, 6, 7, var1);
 		this.wolfMane.setRotationPoint(-1.0F, 14.0F, 2.0F);
-		this.wolfLeg1 = new ModelRenderer(0, 18);
+		this.wolfLeg1 = new ModelRenderer(this, 0, 18);
 		this.wolfLeg1.addBox(-1.0F, 0.0F, -1.0F, 2, 8, 2, var1);
 		this.wolfLeg1.setRotationPoint(-2.5F, 16.0F, 7.0F);
-		this.wolfLeg2 = new ModelRenderer(0, 18);
+		this.wolfLeg2 = new ModelRenderer(this, 0, 18);
 		this.wolfLeg2.addBox(-1.0F, 0.0F, -1.0F, 2, 8, 2, var1);
 		this.wolfLeg2.setRotationPoint(0.5F, 16.0F, 7.0F);
-		this.wolfLeg3 = new ModelRenderer(0, 18);
+		this.wolfLeg3 = new ModelRenderer(this, 0, 18);
 		this.wolfLeg3.addBox(-1.0F, 0.0F, -1.0F, 2, 8, 2, var1);
 		this.wolfLeg3.setRotationPoint(-2.5F, 16.0F, -4.0F);
-		this.wolfLeg4 = new ModelRenderer(0, 18);
+		this.wolfLeg4 = new ModelRenderer(this, 0, 18);
 		this.wolfLeg4.addBox(-1.0F, 0.0F, -1.0F, 2, 8, 2, var1);
 		this.wolfLeg4.setRotationPoint(0.5F, 16.0F, -4.0F);
-		this.wolfTail = new ModelRenderer(9, 18);
+		this.wolfTail = new ModelRenderer(this, 9, 18);
 		this.wolfTail.addBox(-1.0F, 0.0F, -1.0F, 2, 8, 2, var1);
 		this.wolfTail.setRotationPoint(-1.0F, 12.0F, 8.0F);
-		this.wolfRightEar = new ModelRenderer(16, 14);
+		this.wolfRightEar = new ModelRenderer(this, 16, 14);
 		this.wolfRightEar.addBox(-3.0F, -5.0F, 0.0F, 2, 2, 1, var1);
 		this.wolfRightEar.setRotationPoint(-1.0F, var2, -7.0F);
-		this.wolfLeftEar = new ModelRenderer(16, 14);
+		this.wolfLeftEar = new ModelRenderer(this, 16, 14);
 		this.wolfLeftEar.addBox(1.0F, -5.0F, 0.0F, 2, 2, 1, var1);
 		this.wolfLeftEar.setRotationPoint(-1.0F, var2, -7.0F);
-		this.wolfSnout = new ModelRenderer(0, 10);
+		this.wolfSnout = new ModelRenderer(this, 0, 10);
 		this.wolfSnout.addBox(-2.0F, 0.0F, -5.0F, 3, 3, 4, var1);
 		this.wolfSnout.setRotationPoint(-0.5F, var2, -7.0F);
 	}
--- net/minecraft/src/ModelGhast.java
+++ net/minecraft/src/ModelGhast.java
@@ -8,13 +8,13 @@
 
 	public ModelGhast() {
 		byte var1 = -16;
-		this.body = new ModelRenderer(0, 0);
+		this.body = new ModelRenderer(this, 0, 0);
 		this.body.addBox(-8.0F, -8.0F, -8.0F, 16, 16, 16);
 		this.body.rotationPointY += (float)(24 + var1);
 		Random var2 = new Random(1660L);
 
 		for(int var3 = 0; var3 < this.tentacles.length; ++var3) {
-			this.tentacles[var3] = new ModelRenderer(0, 0);
+			this.tentacles[var3] = new ModelRenderer(this, 0, 0);
 			float var4 = (((float)(var3 % 3) - (float)(var3 / 3 % 2) * 0.5F + 0.25F) / 2.0F * 2.0F - 1.0F) * 5.0F;
 			float var5 = ((float)(var3 / 3) / 2.0F * 2.0F - 1.0F) * 5.0F;
 			int var6 = var2.nextInt(7) + 8;
--- net/minecraft/src/RenderBiped.java
+++ net/minecraft/src/RenderBiped.java
@@ -24,6 +24,13 @@
 				GL11.glRotatef(20.0F, 1.0F, 0.0F, 0.0F);
 				GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
 				GL11.glScalef(var4, -var4, var4);
+			} else if(var3.itemID == Item.bow.shiftedIndex) {
+				var4 = 10.0F / 16.0F;
+				GL11.glTranslatef(0.0F, 2.0F / 16.0F, 5.0F / 16.0F);
+				GL11.glRotatef(-20.0F, 0.0F, 1.0F, 0.0F);
+				GL11.glScalef(var4, -var4, var4);
+				GL11.glRotatef(-100.0F, 1.0F, 0.0F, 0.0F);
+				GL11.glRotatef(45.0F, 0.0F, 1.0F, 0.0F);
 			} else if(Item.itemsList[var3.itemID].isFull3D()) {
 				var4 = 10.0F / 16.0F;
 				GL11.glTranslatef(0.0F, 3.0F / 16.0F, 0.0F);
--- net/minecraft/src/GuiGameOver.java
+++ net/minecraft/src/GuiGameOver.java
@@ -38,7 +38,7 @@
 		GL11.glScalef(2.0F, 2.0F, 2.0F);
 		this.drawCenteredString(this.fontRenderer, "Game over!", this.width / 2 / 2, 30, 16777215);
 		GL11.glPopMatrix();
-		this.drawCenteredString(this.fontRenderer, "Score: &e" + this.mc.thePlayer.getScore(), this.width / 2, 100, 16777215);
+		this.drawCenteredString(this.fontRenderer, "Score: e" + this.mc.thePlayer.getScore(), this.width / 2, 100, 16777215);
 		super.drawScreen(var1, var2, var3);
 	}
 
--- net/minecraft/src/EntityLiving.java
+++ net/minecraft/src/EntityLiving.java
@@ -39,6 +39,8 @@
 	public float field_705_Q;
 	public float field_704_R;
 	public float field_703_S;
+	public int field_35172_bP = 0;
+	public int field_35173_bQ = 0;
 	protected int newPosRotationIncrements;
 	protected double newPosX;
 	protected double newPosY;
@@ -56,6 +58,7 @@
 	protected float moveSpeed = 0.7F;
 	private Entity currentTarget;
 	protected int numTicksToChaseTarget = 0;
+	public int healAmount = 0;
 
 	public EntityLiving(World var1) {
 		super(var1);
@@ -96,7 +99,7 @@
 
 	public void playLivingSound() {
 		String var1 = this.getLivingSound();
-		if(var1 != null) {
+		if(var1 != null && this.health > 0) {
 			this.worldObj.playSoundAtEntity(this, var1, this.getSoundVolume(), (this.rand.nextFloat() - this.rand.nextFloat()) * 0.2F + 1.0F);
 		}
 
@@ -202,6 +205,17 @@
 
 	public void onUpdate() {
 		super.onUpdate();
+		if(this.field_35172_bP > 0) {
+			if(this.field_35173_bQ <= 0) {
+				this.field_35173_bQ = 600;
+			}
+
+			--this.field_35173_bQ;
+			if(this.field_35173_bQ <= 0) {
+				--this.field_35172_bP;
+			}
+		}
+
 		this.onLivingUpdate();
 		double var1 = this.posX - this.prevPosX;
 		double var3 = this.posZ - this.prevPosZ;
@@ -441,6 +455,12 @@
 		super.fall(var1);
 		int var2 = (int)Math.ceil((double)(var1 - 3.0F));
 		if(var2 > 0) {
+			if(var2 > 4) {
+				this.worldObj.playSoundAtEntity(this, "damage.fallbig", 1.0F, 1.0F);
+			} else {
+				this.worldObj.playSoundAtEntity(this, "damage.fallsmall", 1.0F, 1.0F);
+			}
+
 			this.attackEntityFrom((Entity)null, var2);
 			int var3 = this.worldObj.getBlockId(MathHelper.floor_double(this.posX), MathHelper.floor_double(this.posY - (double)0.2F - (double)this.yOffset), MathHelper.floor_double(this.posZ));
 			if(var3 > 0) {
@@ -581,6 +601,11 @@
 	}
 
 	public void onLivingUpdate() {
+		if(this.healAmount > 0) {
+			this.heal(this.healAmount);
+			this.healAmount = 0;
+		}
+
 		if(this.newPosRotationIncrements > 0) {
 			double var1 = this.posX + (this.newPosX - this.posX) / (double)this.newPosRotationIncrements;
 			double var3 = this.posY + (this.newPosY - this.posY) / (double)this.newPosRotationIncrements;
@@ -872,4 +897,20 @@
 	public int getItemIcon(ItemStack var1) {
 		return var1.getIconIndex();
 	}
+
+	public void func_41005_b(ItemStack var1) {
+		this.worldObj.playSoundAtEntity(this, "random.break", 0.8F, 0.8F + this.worldObj.rand.nextFloat() * 0.4F);
+
+		for(int var2 = 0; var2 < 5; ++var2) {
+			Vec3D var3 = Vec3D.createVector(((double)this.rand.nextFloat() - 0.5D) * 0.1D, Math.random() * 0.1D + 0.1D, 0.0D);
+			var3.rotateAroundX(-this.rotationPitch * (float)Math.PI / 180.0F);
+			var3.rotateAroundY(-this.rotationYaw * (float)Math.PI / 180.0F);
+			Vec3D var4 = Vec3D.createVector(((double)this.rand.nextFloat() - 0.5D) * 0.3D, (double)(-this.rand.nextFloat()) * 0.6D - 0.3D, 0.6D);
+			var4.rotateAroundX(-this.rotationPitch * (float)Math.PI / 180.0F);
+			var4.rotateAroundY(-this.rotationYaw * (float)Math.PI / 180.0F);
+			var4 = var4.addVector(this.posX, this.posY + (double)this.getEyeHeight(), this.posZ);
+			this.worldObj.spawnParticle("iconcrack_" + var1.getItem().shiftedIndex, var4.xCoord, var4.yCoord, var4.zCoord, var3.xCoord, var3.yCoord + 0.05D, var3.zCoord);
+		}
+
+ 	}
 }
--- net/minecraft/src/BlockCake.java
+++ net/minecraft/src/BlockCake.java
@@ -65,7 +65,7 @@
 
 	private void eatCakeSlice(World var1, int var2, int var3, int var4, EntityPlayer var5) {
 		if(var5.health < 20) {
-			var5.heal(3);
+			var5.healAmount += 3;
 			int var6 = var1.getBlockMetadata(var2, var3, var4) + 1;
 			if(var6 >= 6) {
 				var1.setBlockWithNotify(var2, var3, var4, 0);
--- /dev/null
+++ net/minecraft/src/EntityBreakingFX.java
@@ -1,0 +1,42 @@
+package net.minecraft.src;
+
+public class EntityBreakingFX extends EntityFX {
+	public EntityBreakingFX(World var1, double var2, double var4, double var6, Item var8) {
+		super(var1, var2, var4, var6, 0.0D, 0.0D, 0.0D);
+		this.particleTextureIndex = var8.getIconFromDamage(0);
+		this.particleRed = this.particleGreen = this.particleBlue = 1.0F;
+		this.particleGravity = Block.blockSnow.blockParticleGravity;
+		this.particleScale /= 2.0F;
+	}
+
+	public EntityBreakingFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12, Item var14) {
+		this(var1, var2, var4, var6, var14);
+		this.motionX *= (double)0.1F;
+		this.motionY *= (double)0.1F;
+		this.motionZ *= (double)0.1F;
+		this.motionX += var8;
+		this.motionY += var10;
+		this.motionZ += var12;
+	}
+
+	public int getFXLayer() {
+		return 2;
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		float var8 = ((float)(this.particleTextureIndex % 16) + this.particleTextureJitterX / 4.0F) / 16.0F;
+		float var9 = var8 + 0.999F / 64.0F;
+		float var10 = ((float)(this.particleTextureIndex / 16) + this.particleTextureJitterY / 4.0F) / 16.0F;
+		float var11 = var10 + 0.999F / 64.0F;
+		float var12 = 0.1F * this.particleScale;
+		float var13 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
+		float var14 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
+		float var15 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
+		float var16 = 1.0F;
+		var1.setColorOpaque_F(var16 * this.particleRed, var16 * this.particleGreen, var16 * this.particleBlue);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var8, (double)var11);
+		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var8, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 + var5 * var12 + var7 * var12), (double)var9, (double)var10);
+		var1.addVertexWithUV((double)(var13 + var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 + var5 * var12 - var7 * var12), (double)var9, (double)var11);
+	}
+}
--- net/minecraft/src/RenderSpider.java
+++ net/minecraft/src/RenderSpider.java
@@ -22,7 +22,12 @@
 			float var4 = (1.0F - var1.getEntityBrightness(1.0F)) * 0.5F;
 			GL11.glEnable(GL11.GL_BLEND);
 			GL11.glDisable(GL11.GL_ALPHA_TEST);
-			GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
+			GL11.glBlendFunc(GL11.GL_ONE, GL11.GL_ONE);
+			char var5 = '\uf0f0';
+			int var6 = var5 % 65536;
+			int var7 = var5 / 65536;
+			OpenGlHelper.setLightmapTextureCoords(OpenGlHelper.lightmapEnabled, (float)var6 / 1.0F, (float)var7 / 1.0F);
+			GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
 			GL11.glColor4f(1.0F, 1.0F, 1.0F, var4);
 			return true;
 		}
--- net/minecraft/src/RenderItem.java
+++ net/minecraft/src/RenderItem.java
@@ -42,7 +42,8 @@
 			GL11.glRotatef(var12, 0.0F, 1.0F, 0.0F);
 			this.loadTexture("/terrain.png");
 			float var28 = 0.25F;
-			if(!Block.blocksList[var10.itemID].renderAsNormalBlock() && var10.itemID != Block.stairSingle.blockID && Block.blocksList[var10.itemID].getRenderType() != 16) {
+			int var31 = Block.blocksList[var10.itemID].getRenderType();
+			if(var31 == 1 || var31 == 19 || var31 == 12 || var31 == 2) {
 				var28 = 0.5F;
 			}
 
@@ -57,7 +58,8 @@
 					GL11.glTranslatef(var16, var17, var18);
 				}
 
-				this.renderBlocks.renderBlockOnInventory(Block.blocksList[var10.itemID], var10.getItemDamage(), var1.getEntityBrightness(var9));
+				var16 = 1.0F;
+				this.renderBlocks.renderBlockOnInventory(Block.blocksList[var10.itemID], var10.getItemDamage(), var16);
 				GL11.glPopMatrix();
 			}
 		} else {
@@ -86,7 +88,7 @@
 				var24 = (float)(var23 >> 16 & 255) / 255.0F;
 				var25 = (float)(var23 >> 8 & 255) / 255.0F;
 				var26 = (float)(var23 & 255) / 255.0F;
-				float var27 = var1.getEntityBrightness(var9);
+				float var27 = 1.0F;
 				GL11.glColor4f(var24 * var27, var25 * var27, var26 * var27, 1.0F);
 			}
 
@@ -163,9 +165,13 @@
 		GL11.glEnable(GL11.GL_CULL_FACE);
 	}
 
-	public void renderItemIntoGUI(FontRenderer var1, RenderEngine var2, ItemStack var3, int var4, int var5) {
+	public void renderItemIntoGUI(FontRenderer var1, RenderEngine var2, ItemStack var3, int var4, int var5, EntityPlayer var6) {
 		if(var3 != null) {
-			this.drawItemIntoGui(var1, var2, var3.itemID, var3.getItemDamage(), var3.getIconIndex(), var4, var5);
+			if(var6 != null) {
+				this.drawItemIntoGui(var1, var2, var3.itemID, var3.getItemDamage(), var6.getItemIcon(var3), var4, var5);
+			} else {
+				this.drawItemIntoGui(var1, var2, var3.itemID, var3.getItemDamage(), var3.getIconIndex(), var4, var5);
+			}
 		}
 	}
 
--- /dev/null
+++ net/minecraft/src/EntitySuspendFX.java
@@ -1,0 +1,34 @@
+package net.minecraft.src;
+
+public class EntitySuspendFX extends EntityFX {
+	public EntitySuspendFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		super(var1, var2, var4 - 0.125D, var6, var8, var10, var12);
+		var1.getWorldChunkManager().func_4069_a(MathHelper.floor_double(var2), MathHelper.floor_double(var6), 1, 1);
+		int var14 = ColorizerWater.getWaterColor(var1.getWorldChunkManager().temperature[0], var1.getWorldChunkManager().humidity[0]);
+		this.particleRed = (float)(var14 >> 16 & 255) / 446.25F;
+		this.particleGreen = (float)(var14 >> 8 & 255) / 446.25F;
+		this.particleBlue = (float)(var14 & 255) / 255.0F;
+		this.particleTextureIndex = 0;
+		this.setSize(0.01F, 0.01F);
+		this.particleScale *= this.rand.nextFloat() * 0.6F + 0.2F;
+		this.motionX = var8 * 0.0D;
+		this.motionY = var10 * 0.0D;
+		this.motionZ = var12 * 0.0D;
+		this.particleMaxAge = (int)(16.0D / (Math.random() * 0.8D + 0.2D));
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		if(this.worldObj.getBlockMaterial(MathHelper.floor_double(this.posX), MathHelper.floor_double(this.posY), MathHelper.floor_double(this.posZ)) != Material.water) {
+			this.setEntityDead();
+		}
+
+		if(this.particleMaxAge-- <= 0) {
+			this.setEntityDead();
+		}
+
+	}
+}
--- net/minecraft/src/GuiStats.java
+++ net/minecraft/src/GuiStats.java
@@ -78,10 +78,7 @@
 	private void func_27138_c(int var1, int var2, int var3) {
 		this.func_27147_a(var1 + 1, var2 + 1);
 		GL11.glEnable(GL12.GL_RESCALE_NORMAL);
-		GL11.glPushMatrix();
-		GL11.glRotatef(180.0F, 1.0F, 0.0F, 0.0F);
-		RenderHelper.enableStandardItemLighting();
-		GL11.glPopMatrix();
+		RenderHelper.func_41089_c();
 		field_27153_j.drawItemIntoGui(this.fontRenderer, this.mc.renderEngine, var3, 0, Item.itemsList[var3].getIconFromDamage(0), var1 + 2, var2 + 2);
 		RenderHelper.disableStandardItemLighting();
 		GL11.glDisable(GL12.GL_RESCALE_NORMAL);
--- net/minecraft/src/EntitySlimeFX.java
+++ net/minecraft/src/EntitySlimeFX.java
@@ -22,7 +22,7 @@
 		float var13 = (float)(this.prevPosX + (this.posX - this.prevPosX) * (double)var2 - interpPosX);
 		float var14 = (float)(this.prevPosY + (this.posY - this.prevPosY) * (double)var2 - interpPosY);
 		float var15 = (float)(this.prevPosZ + (this.posZ - this.prevPosZ) * (double)var2 - interpPosZ);
-		float var16 = this.getEntityBrightness(var2);
+		float var16 = 1.0F;
 		var1.setColorOpaque_F(var16 * this.particleRed, var16 * this.particleGreen, var16 * this.particleBlue);
 		var1.addVertexWithUV((double)(var13 - var3 * var12 - var6 * var12), (double)(var14 - var4 * var12), (double)(var15 - var5 * var12 - var7 * var12), (double)var8, (double)var11);
 		var1.addVertexWithUV((double)(var13 - var3 * var12 + var6 * var12), (double)(var14 + var4 * var12), (double)(var15 - var5 * var12 + var7 * var12), (double)var8, (double)var10);
--- net/minecraft/src/ModelSheep1.java
+++ net/minecraft/src/ModelSheep1.java
@@ -3,23 +3,23 @@
 public class ModelSheep1 extends ModelQuadruped {
 	public ModelSheep1() {
 		super(12, 0.0F);
-		this.head = new ModelRenderer(0, 0);
+		this.head = new ModelRenderer(this, 0, 0);
 		this.head.addBox(-3.0F, -4.0F, -4.0F, 6, 6, 6, 0.6F);
 		this.head.setRotationPoint(0.0F, 6.0F, -8.0F);
-		this.body = new ModelRenderer(28, 8);
+		this.body = new ModelRenderer(this, 28, 8);
 		this.body.addBox(-4.0F, -10.0F, -7.0F, 8, 16, 6, 1.75F);
 		this.body.setRotationPoint(0.0F, 5.0F, 2.0F);
 		float var1 = 0.5F;
-		this.leg1 = new ModelRenderer(0, 16);
+		this.leg1 = new ModelRenderer(this, 0, 16);
 		this.leg1.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg1.setRotationPoint(-3.0F, 12.0F, 7.0F);
-		this.leg2 = new ModelRenderer(0, 16);
+		this.leg2 = new ModelRenderer(this, 0, 16);
 		this.leg2.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg2.setRotationPoint(3.0F, 12.0F, 7.0F);
-		this.leg3 = new ModelRenderer(0, 16);
+		this.leg3 = new ModelRenderer(this, 0, 16);
 		this.leg3.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg3.setRotationPoint(-3.0F, 12.0F, -5.0F);
-		this.leg4 = new ModelRenderer(0, 16);
+		this.leg4 = new ModelRenderer(this, 0, 16);
 		this.leg4.addBox(-2.0F, 0.0F, -2.0F, 4, 6, 4, var1);
 		this.leg4.setRotationPoint(3.0F, 12.0F, -5.0F);
 	}
--- /dev/null
+++ net/minecraft/src/EntityCritFX.java
@@ -1,0 +1,68 @@
+package net.minecraft.src;
+
+public class EntityCritFX extends EntityFX {
+	private boolean field_35136_ay;
+	float field_35137_a;
+
+	public EntityCritFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12) {
+		this(var1, var2, var4, var6, var8, var10, var12, 1.0F);
+	}
+
+	public EntityCritFX(World var1, double var2, double var4, double var6, double var8, double var10, double var12, float var14) {
+		super(var1, var2, var4, var6, 0.0D, 0.0D, 0.0D);
+		this.field_35136_ay = true;
+		this.motionX *= (double)0.1F;
+		this.motionY *= (double)0.1F;
+		this.motionZ *= (double)0.1F;
+		this.motionX += var8 * 0.4D;
+		this.motionY += var10 * 0.4D;
+		this.motionZ += var12 * 0.4D;
+		this.particleRed = this.particleGreen = this.particleBlue = (float)(Math.random() * (double)0.3F + (double)0.6F);
+		this.particleScale *= 12.0F / 16.0F;
+		this.particleScale *= var14;
+		this.field_35137_a = this.particleScale;
+		this.particleMaxAge = (int)(6.0D / (Math.random() * 0.8D + 0.6D));
+		this.particleMaxAge = (int)((float)this.particleMaxAge * var14);
+		this.noClip = false;
+		this.particleTextureIndex = 65;
+		this.onUpdate();
+	}
+
+	public void renderParticle(Tessellator var1, float var2, float var3, float var4, float var5, float var6, float var7) {
+		if(this.field_35136_ay) {
+			float var8 = ((float)this.particleAge + var2) / (float)this.particleMaxAge * 32.0F;
+			if(var8 < 0.0F) {
+				var8 = 0.0F;
+			}
+
+			if(var8 > 1.0F) {
+				var8 = 1.0F;
+			}
+
+			this.particleScale = this.field_35137_a * var8;
+			super.renderParticle(var1, var2, var3, var4, var5, var6, var7);
+		}
+	}
+
+	public void onUpdate() {
+		this.prevPosX = this.posX;
+		this.prevPosY = this.posY;
+		this.prevPosZ = this.posZ;
+		if(this.particleAge++ >= this.particleMaxAge) {
+			this.setEntityDead();
+		}
+
+		this.moveEntity(this.motionX, this.motionY, this.motionZ);
+		this.particleGreen = (float)((double)this.particleGreen * 0.96D);
+		this.particleBlue = (float)((double)this.particleBlue * 0.9D);
+		this.motionX *= (double)0.7F;
+		this.motionY *= (double)0.7F;
+		this.motionZ *= (double)0.7F;
+		this.motionY -= (double)0.02F;
+		if(this.onGround) {
+			this.motionX *= (double)0.7F;
+			this.motionZ *= (double)0.7F;
+		}
+
+	}
+}
--- net/minecraft/src/GameSettings.java
+++ net/minecraft/src/GameSettings.java
@@ -48,6 +48,7 @@
 	public boolean field_22273_E = false;
 	public float field_22272_F = 1.0F;
 	public float field_22271_G = 1.0F;
+	public float fovSetting = 0.0F;
 	public int guiScale = 0;
 
 	public GameSettings(Minecraft var1, File var2) {
@@ -84,6 +85,10 @@
 			this.mc.sndManager.onSoundOptionsChanged();
 		}
 
+		if(var1 == EnumOptions.FOV) {
+			this.fovSetting = var2;
+		}
+
 		if(var1 == EnumOptions.SENSITIVITY) {
 			this.mouseSensitivity = var2;
 		}
@@ -139,7 +144,7 @@
 	}
 
 	public float getOptionFloatValue(EnumOptions var1) {
-		return var1 == EnumOptions.MUSIC ? this.musicVolume : (var1 == EnumOptions.SOUND ? this.soundVolume : (var1 == EnumOptions.SENSITIVITY ? this.mouseSensitivity : 0.0F));
+		return var1 == EnumOptions.FOV ? this.fovSetting : (var1 == EnumOptions.MUSIC ? this.musicVolume : (var1 == EnumOptions.SOUND ? this.soundVolume : (var1 == EnumOptions.SENSITIVITY ? this.mouseSensitivity : 0.0F)));
 	}
 
 	public boolean getOptionOrdinalValue(EnumOptions var1) {
@@ -164,7 +169,7 @@
 		String var3 = var2.translateKey(var1.getEnumString()) + ": ";
 		if(var1.getEnumFloat()) {
 			float var5 = this.getOptionFloatValue(var1);
-			return var1 == EnumOptions.SENSITIVITY ? (var5 == 0.0F ? var3 + var2.translateKey("options.sensitivity.min") : (var5 == 1.0F ? var3 + var2.translateKey("options.sensitivity.max") : var3 + (int)(var5 * 200.0F) + "%")) : (var5 == 0.0F ? var3 + var2.translateKey("options.off") : var3 + (int)(var5 * 100.0F) + "%");
+			return var1 == EnumOptions.SENSITIVITY ? (var5 == 0.0F ? var3 + var2.translateKey("options.sensitivity.min") : (var5 == 1.0F ? var3 + var2.translateKey("options.sensitivity.max") : var3 + (int)(var5 * 200.0F) + "%")) : (var1 == EnumOptions.FOV ? (var5 == 0.0F ? var3 + var2.translateKey("options.fov.min") : (var5 == 1.0F ? var3 + var2.translateKey("options.fov.max") : var3 + (int)(70.0F + var5 * 40.0F))) : (var5 == 0.0F ? var3 + var2.translateKey("options.off") : var3 + (int)(var5 * 100.0F) + "%"));
 		} else if(var1.getEnumBoolean()) {
 			boolean var4 = this.getOptionOrdinalValue(var1);
 			return var4 ? var3 + var2.translateKey("options.on") : var3 + var2.translateKey("options.off");
@@ -203,6 +208,10 @@
 						this.mouseSensitivity = this.parseFloat(var3[1]);
 					}
 
+					if(var3[0].equals("fov")) {
+						this.fovSetting = this.parseFloat(var3[1]);
+					}
+
 					if(var3[0].equals("invertYMouse")) {
 						this.invertMouse = var3[1].equals("true");
 					}
@@ -278,6 +287,7 @@
 			var1.println("sound:" + this.soundVolume);
 			var1.println("invertYMouse:" + this.invertMouse);
 			var1.println("mouseSensitivity:" + this.mouseSensitivity);
+			var1.println("fov:" + this.fovSetting);
 			var1.println("viewDistance:" + this.renderDistance);
 			var1.println("guiScale:" + this.guiScale);
 			var1.println("bobView:" + this.viewBobbing);
--- /dev/null
+++ net/minecraft/src/ActiveRenderInfo.java
@@ -1,0 +1,66 @@
+package net.minecraft.src;
+
+import java.nio.FloatBuffer;
+import java.nio.IntBuffer;
+import org.lwjgl.opengl.GL11;
+import org.lwjgl.util.glu.GLU;
+
+public class ActiveRenderInfo {
+	public static float field_41074_a = 0.0F;
+	public static float field_41072_b = 0.0F;
+	public static float field_41073_c = 0.0F;
+	private static IntBuffer field_41079_i = GLAllocation.createDirectIntBuffer(16);
+	private static FloatBuffer field_41076_j = GLAllocation.createDirectFloatBuffer(16);
+	private static FloatBuffer field_41077_k = GLAllocation.createDirectFloatBuffer(16);
+	private static FloatBuffer field_41075_l = GLAllocation.createDirectFloatBuffer(3);
+	public static float field_41070_d;
+	public static float field_41071_e;
+	public static float field_41068_f;
+	public static float field_41069_g;
+	public static float field_41078_h;
+
+	public static void func_41067_a(EntityPlayer var0, boolean var1) {
+		GL11.glGetFloat(GL11.GL_MODELVIEW_MATRIX, field_41076_j);
+		GL11.glGetFloat(GL11.GL_PROJECTION_MATRIX, field_41077_k);
+		GL11.glGetInteger(GL11.GL_VIEWPORT, field_41079_i);
+		float var2 = (float)((field_41079_i.get(0) + field_41079_i.get(2)) / 2);
+		float var3 = (float)((field_41079_i.get(1) + field_41079_i.get(3)) / 2);
+		GLU.gluUnProject(var2, var3, 0.0F, field_41076_j, field_41077_k, field_41079_i, field_41075_l);
+		field_41074_a = field_41075_l.get(0);
+		field_41072_b = field_41075_l.get(1);
+		field_41073_c = field_41075_l.get(2);
+		int var4 = var1 ? 1 : 0;
+		float var5 = var0.rotationPitch;
+		float var6 = var0.rotationYaw;
+		field_41070_d = MathHelper.cos(var6 * (float)Math.PI / 180.0F) * (float)(1 - var4 * 2);
+		field_41068_f = MathHelper.sin(var6 * (float)Math.PI / 180.0F) * (float)(1 - var4 * 2);
+		field_41069_g = -field_41068_f * MathHelper.sin(var5 * (float)Math.PI / 180.0F) * (float)(1 - var4 * 2);
+		field_41078_h = field_41070_d * MathHelper.sin(var5 * (float)Math.PI / 180.0F) * (float)(1 - var4 * 2);
+		field_41071_e = MathHelper.cos(var5 * (float)Math.PI / 180.0F);
+	}
+
+	public static Vec3D func_41065_a(EntityLiving var0, double var1) {
+		double var3 = var0.prevPosX + (var0.posX - var0.prevPosX) * var1;
+		double var5 = var0.prevPosY + (var0.posY - var0.prevPosY) * var1 + (double)var0.getEyeHeight();
+		double var7 = var0.prevPosZ + (var0.posZ - var0.prevPosZ) * var1;
+		double var9 = var3 + (double)(field_41074_a * 1.0F);
+		double var11 = var5 + (double)(field_41072_b * 1.0F);
+		double var13 = var7 + (double)(field_41073_c * 1.0F);
+		return Vec3D.createVector(var9, var11, var13);
+	}
+
+	public static int func_41066_a(World var0, EntityLiving var1, float var2) {
+		Vec3D var3 = func_41065_a(var1, (double)var2);
+		ChunkPosition var4 = new ChunkPosition(var3);
+		int var5 = var0.getBlockId(var4.x, var4.y, var4.z);
+		if(var5 != 0 && Block.blocksList[var5].blockMaterial.getIsLiquid()) {
+			float var6 = BlockFluid.getPercentAir(var0.getBlockMetadata(var4.x, var4.y, var4.z)) - 1.0F / 9.0F;
+			float var7 = (float)(var4.y + 1) - var6;
+			if(var3.yCoord >= (double)var7) {
+				var5 = var0.getBlockId(var4.x, var4.y + 1, var4.z);
+			}
+		}
+
+		return var5;
+	}
+}
--- net/minecraft/src/ModelBase.java
+++ net/minecraft/src/ModelBase.java
@@ -1,8 +1,12 @@
 package net.minecraft.src;
+import java.util.ArrayList;
+import java.util.List;
+import java.util.Random;
 
 public abstract class ModelBase {
 	public float onGround;
 	public boolean isRiding = false;
+	public List field_35394_j = new ArrayList();
 
 	public void render(float var1, float var2, float var3, float var4, float var5, float var6) {
 	}
@@ -12,4 +16,8 @@
 
 	public void setLivingAnimations(EntityLiving var1, float var2, float var3, float var4) {
 	}
+
+	public ModelRenderer func_35393_a(Random var1) {
+		return (ModelRenderer)this.field_35394_j.get(var1.nextInt(this.field_35394_j.size()));
+ 	}
 }
